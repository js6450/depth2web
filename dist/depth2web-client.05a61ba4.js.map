{"version":3,"sources":["peerjs.js","depth2web-client.js","../../../../../../usr/local/lib/node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["parcelRequire","modules","cache","entry","globalName","previousRequire","nodeRequire","require","newRequire","name","jumped","currentRequire","err","Error","code","localRequire","resolve","module","Module","call","exports","x","moduleName","id","bundle","isParcelRequire","parent","register","error","i","length","e","mainExports","define","amd","binaryFeatures","useBlobBuilder","Blob","useArrayBufferView","Uint8Array","size","BlobBuilder","window","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","BufferBuilder","_pieces","_parts","prototype","append","data","push","flush","buf","buffer","getBuffer","builder","ii","getBlob","BinaryPack","unpack","unpacker","Unpacker","pack","packer","Packer","index","dataBuffer","dataView","byteLength","type","unpack_uint8","unpack_raw","unpack_string","unpack_array","unpack_map","undefined","unpack_float","unpack_double","unpack_uint16","unpack_uint32","unpack_uint64","unpack_int8","unpack_int16","unpack_int32","unpack_int64","byte","bytes","read","uint16","uint32","uint64","uint8","Math","pow","slice","str","c","String","fromCharCode","objects","Array","map","key","value","sign","exp","fraction","h32","l32","hfrac","frac","j","subarray","bufferBuilder","pack_string","floor","pack_integer","pack_double","constructor","pack_array","File","pack_bin","ArrayBuffer","Object","toString","startsWith","pack_object","Date","toBinaryPack","blob","pack_uint8","pack_uint16","pack_uint32","utf8Length","ary","num","pack_int8","pack_int16","pack_int32","pack_int64","pack_uint64","log","LN2","frac0","frac1","b32","obj","keys","prop","hasOwnProperty","n","high","low","_utf8Replace","m","charCodeAt","replace","defineProperty","extractVersion","wrapPeerConnectionEvent","disableLog","disableWarnings","deprecated","detectBrowser","compactObject","walkStats","filterStats","_defineProperty","enumerable","configurable","writable","_typeof","Symbol","iterator","logDisabled_","deprecationWarnings_","uastring","expr","pos","match","parseInt","eventNameToWrap","wrapper","RTCPeerConnection","proto","nativeAddEventListener","addEventListener","nativeEventName","cb","apply","arguments","wrappedCallback","modifiedEvent","_eventMap","nativeRemoveEventListener","removeEventListener","unwrappedCb","get","set","bool","console","oldMethod","newMethod","warn","navigator","result","browser","version","mozGetUserMedia","userAgent","webkitGetUserMedia","isSecureContext","webkitRTCPeerConnection","RTCIceGatherer","mediaDevices","supportsUnifiedPlan","RTCRtpTransceiver","isObject","val","reduce","accumulator","isObj","isEmptyObject","assign","stats","base","resultSet","has","forEach","endsWith","track","outbound","streamStatsType","filteredResult","Map","trackStats","trackIdentifier","trackStat","trackId","shimGetUserMedia","utils","_interopRequireWildcard","_getRequireWildcardCache","WeakMap","__esModule","default","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","desc","logging","browserDetails","constraintsToChrome_","mandatory","optional","cc","r","ideal","exact","min","max","oldname_","prefix","charAt","toUpperCase","oc","mix","advanced","concat","shimConstraints_","constraints","func","JSON","parse","stringify","audio","remap","a","b","video","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","then","devices","filter","d","kind","dev","find","some","label","toLowerCase","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","getUserMedia_","onSuccess","onError","getUserMedia","bind","origGetUserMedia","cs","stream","getAudioTracks","getVideoTracks","getTracks","stop","DOMException","Promise","reject","shimGetDisplayMedia","getSourceId","getDisplayMedia","sourceId","widthSpecified","width","heightSpecified","height","frameRateSpecified","frameRate","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","shimMediaStream","shimOnTrack","shimGetSendersWithDtmf","shimGetStats","shimSenderReceiverGetStats","shimAddTrackRemoveTrackWithNative","shimAddTrackRemoveTrack","shimPeerConnection","fixNegotiationNeeded","_getusermedia","_getdisplaymedia","MediaStream","webkitMediaStream","_ontrack","f","origSetRemoteDescription","setRemoteDescription","_this","_ontrackpoly","te","receiver","getReceivers","event","Event","transceiver","streams","dispatchEvent","shimSenderWithDtmf","pc","dtmf","_dtmf","createDTMFSender","_pc","getSenders","_senders","origAddTrack","addTrack","sender","origRemoveTrack","removeTrack","idx","indexOf","splice","origAddStream","addStream","_this2","origRemoveStream","removeStream","_this3","s","RTCRtpSender","origGetSenders","_this4","senders","origGetStats","getStats","_this5","selector","onSucc","onErr","fixChromeStats_","response","standardReport","reports","report","standardStats","timestamp","localcandidate","remotecandidate","names","stat","makeMapStats","successCallbackWrapper_","RTCRtpReceiver","_this6","origGetReceivers","_this7","receivers","srcElement","MediaStreamTrack","getLocalStreams","_this8","_shimmedLocalStreams","streamId","_this9","alreadyExists","existingSenders","newSenders","newSender","_this10","origGetLocalStreams","_this11","nativeStreams","_reverseStreams","_this12","_streams","newStream","_this13","signalingState","t","oldStream","replaceInternalStreamId","description","sdp","internalId","externalStream","internalStream","RegExp","RTCSessionDescription","replaceExternalStreamId","method","nativeMethod","methodObj","_this14","args","isLegacyCall","origSetLocalDescription","setLocalDescription","origLocalDescription","_this15","isLocal","streamid","hasTrack","RTCIceCandidate","nativeAddIceCandidate","addIceCandidate","candidate","target","filterIceServers","iceServers","edgeVersion","hasTurn","server","urls","url","isString","validTurn","SDPUtils","generateIdentifier","random","substr","localCName","splitLines","trim","split","line","splitSections","parts","part","getDescription","sections","getMediaSections","shift","matchPrefix","parseCandidate","substring","foundation","component","protocol","priority","ip","address","port","relatedAddress","relatedPort","tcpType","ufrag","usernameFragment","writeCandidate","join","parseIceOptions","parseRtpMap","parsed","payloadType","clockRate","channels","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","direction","uri","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","parameters","params","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","parseSsrcGroup","semantics","ssrcs","getMid","mediaSection","mid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","role","fingerprints","writeDtlsParameters","setupType","fp","getIceParameters","iceParameters","password","writeIceParameters","parseRtpParameters","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","caps","maxptime","extension","parseRtpEncodingParameters","encodingParameters","hasRed","hasUlpfec","primarySsrc","secondarySsrc","flows","apt","encParam","codecPayloadType","rtx","fec","mechanism","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","remoteSsrc","cname","rsize","reducedSize","compound","mux","parseMsid","spec","planB","msidParts","parseSctpDescription","parseMLine","maxSizeLine","maxMessageSize","isNaN","sctpPort","fmt","sctpMapLines","writeSctpDescription","media","sctp","output","generateSessionId","writeSessionBoilerplate","sessId","sessVer","sessUser","sessionId","user","writeMediaSection","iceGatherer","getLocalParameters","dtlsTransport","rtpSender","rtpReceiver","msid","sendEncodingParameters","getDirection","getKind","isRejected","parseOLine","username","sessionVersion","netType","addressType","isValidSDP","fixStatsType","inboundrtp","outboundrtp","candidatepair","dtlsRole","_initialTrackId","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","findCodecByPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","rCodec","lHeaderExtension","rHeaderExtension","isActionAllowedInSignalingState","action","offer","answer","maybeAddCandidate","iceTransport","alreadyAdded","getRemoteCandidates","remoteCandidate","addRemoteCandidate","makeError","NotSupportedError","InvalidAccessError","TypeError","OperationError","addTrackToStreamAndFireEvent","MediaStreamTrackEvent","removeTrackFromStreamAndFireEvent","fireAddTrack","trackEvent","setTimeout","_dispatchEvent","config","_eventTarget","document","createDocumentFragment","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","_localDescription","_remoteDescription","iceConnectionState","connectionState","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","_iceGatherers","iceCandidatePoolSize","gatherPolicy","_config","transceivers","_sdpSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","_emitGatheringStateChange","getConfiguration","getRemoteStreams","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","clonedStream","clone","clonedTrack","enabled","_createIceGatherer","sdpMLineIndex","bufferedCandidateEvents","bufferCandidates","end","state","_gather","onlocalcandidate","evt","sdpMid","cand","serializedCandidate","toJSON","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_disposeIceAndDtlsTransports","_transceive","send","recv","encodings","p","receive","isIceLite","rejected","remoteIceParameters","remoteDtlsParameters","start","_updateSignalingState","receiverList","iceOptions","remoteMsid","isComplete","cands","setTransport","setRemoteCandidates","getCapabilities","isNewTrack","nativeTrack","hasRtx","sid","item","close","newState","states","closed","checking","connected","completed","disconnected","failed","new","connecting","createOffer","numAudioTracks","numVideoTracks","offerOptions","offerToReceiveAudio","offerToReceiveVideo","remoteCodec","hdrExt","remoteExtensions","rHdrExt","getLocalCandidates","createAnswer","mediaSectionsInOffer","localTrack","candidateString","senderOrReceiver","promises","all","allStats","results","ortcObjects","ortcObjectName","nativeGetstats","nativeStats","mapStats","methods","catch","shimReplaceTrack","_filtericeservers","_rtcpeerconnectionShim","_interopRequireDefault","origMSTEnabled","ev","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","replaceTrack","setTrack","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","preferredMediaSource","mediaSource","shimSenderGetStats","shimReceiverGetStats","shimRemoveStream","shimRTCDataChannel","shimAddTransceiver","shimCreateOffer","shimCreateAnswer","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","nativeGetStats","DataChannel","RTCDataChannel","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","ridRegex","test","rid","parseFloat","scaleResolutionDownBy","RangeError","maxFramerate","getParameters","setParameters","origCreateOffer","_arguments","finally","origCreateAnswer","_arguments2","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimCallbacksAPI","shimConstraints","shimRTCIceServerUrls","shimTrackEventTransceiver","shimCreateOfferLegacy","_localStreams","_addTrack","tracks","_remoteStreams","_onaddstream","_onaddstreampoly","successCallback","failureCallback","options","promise","withCallback","_getUserMedia","errcb","OrigPeerConnection","pcConfig","pcConstraints","newIceServers","generateCertificate","audioTransceiver","getTransceivers","setDirection","videoTransceiver","shimRTCIceCandidate","shimMaxMessageSize","shimSendThrowTypeError","shimConnectionState","removeAllowExtmapMixed","_sdp","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","_sctp","sctpInDescription","mLine","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","sdpSemantics","isFirefox","canSendMMS","remoteMMS","Number","POSITIVE_INFINITY","wrapDcSend","dc","origDataChannelSend","readyState","origCreateDataChannel","createDataChannel","dataChannel","channel","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","newEvent","nativeSRD","adapterFactory","chromeShim","edgeShim","firefoxShim","safariShim","commonShim","shimChrome","shimFirefox","shimEdge","shimSafari","adapter","browserShim","_adapter_factory","_default","__importDefault","mod","webrtc_adapter_1","webRTCAdapter","adapter_1","Supports","class_1","isIOS","platform","supportedBrowsers","minFirefoxVersion","minChromeVersion","minSafariVersion","isWebRTCSupported","isBrowserSupported","getBrowser","getVersion","validBrowser","isUnifiedPlanSupported","tempPc","supported","__importStar","k","supports_1","DEFAULT_CONFIG","credential","util","CLOUD_HOST","CLOUD_PORT","chunkedBrowsers","Chrome","chrome","chunkedMTU","defaultConfig","browserVersion","supports","webRTC","audioVideo","binaryBlob","reliable","ordered","binaryType","_dataCount","noop","validateId","chunk","chunks","total","ceil","__peerData","blobToArrayBuffer","fr","FileReader","onload","readAsArrayBuffer","binaryStringToArrayBuffer","binary","byteArray","randomToken","isSecure","location","Events","create","__proto__","EE","fn","context","once","addListener","emitter","listener","_events","_eventsCount","clearEvent","EventEmitter","eventNames","events","getOwnPropertySymbols","listeners","handlers","l","ee","listenerCount","emit","a1","a2","a3","a4","a5","len","removeListener","on","removeAllListeners","off","prefixed","__read","o","ar","next","done","__spread","LOG_PREFIX","LogLevel","Logger","_logLevel","Disabled","logLevel","_i","All","_print","Warnings","Errors","setLogFunction","rest","copy","ConnectionEventType","ConnectionType","PeerEventType","PeerErrorType","SerializationType","SocketEventType","ServerMessageType","__extends","_extendStatics","extendStatics","setPrototypeOf","__","__values","eventemitter3_1","logger_1","enums_1","Socket","_super","secure","host","path","pingInterval","_disconnected","_messagesQueue","wsProtocol","_baseUrl","token","_id","wsUrl","_socket","WebSocket","onmessage","Message","onclose","_cleanup","Disconnected","onopen","_sendQueuedMessages","_scheduleHeartbeat","_wsPingTimer","_sendHeartbeat","_wsOpen","Heartbeat","e_1","_a","copiedQueue","copiedQueue_1","copiedQueue_1_1","e_1_1","return","clearTimeout","__assign","__awaiter","thisArg","P","generator","adopt","fulfilled","step","__generator","body","_","sent","trys","ops","y","g","verb","v","op","pop","util_1","Negotiator","connection","startConnection","peerConnection","_startPeerConnection","Media","_stream","_addTracksToConnection","originator","Data","dataConnection","initialize","_makeOffer","handleSDP","provider","_setupListeners","peerId","peer","connectionId","connectionType","socket","Candidate","payload","dst","IceStateChanged","getConnection","mediaConnection","_addStreamToMediaConnection","cleanup","peerConnectionNotClosed","dataChannelNotClosed","err_2","err_1_1","sdpTransform","metadata","serialization","Offer","emitError","WebRTC","_makeAnswer","err_3","err_1_2","Answer","self","err_4","handleCandidate","ice","err_5","BaseConnection","_open","negotiator_1","baseconnection_1","MediaConnection","_localStream","ID_PREFIX","_negotiator","_remoteStream","remoteStream","Stream","handleMessage","_payload","messages","_getMessages","messages_1","messages_1_1","_removeConnection","open","Close","EncodingQueue","fileReader","_queue","_processing","doNextTask","destroy","queue","enque","processing","abort","encodingQueue_1","DataConnection","_buffer","_bufferSize","_buffering","_chunkedData","_encodingQueue","Binary","ab","_bufferedSend","_dc","_configureDataChannel","Open","_handleDataMessage","datatype","isBinarySerialization","BinaryUTF8","deserializedData","unpackedData","_handleChunk","chunkInfo","count","data_1","chunked","_sendChunks","msg","_trySend","bufferedAmount","MAX_BUFFERED_AMOUNT","_tryBuffer","blobs","blobs_1","blobs_1_1","blob_1","API","_options","_buildUrl","queryString","getTime","retrieveId","error_1","pathError","fetch","status","text","listAllPeers","helpfulError","error_2","json","socket_1","mediaconnection_1","dataconnection_1","api_1","PeerOptions","Peer","_lastServerId","_destroyed","_connections","_lostMessages","userId","debug","DEFAULT_KEY","hostname","logFunction","_api","_createServerConnection","_delayedAbort","BrowserIncompatible","InvalidID","_initialize","_abort","ServerError","plainConnections","_b","_c","_d","_handleMessage","SocketError","Network","disconnect","SocketClosed","e_2","src","IdTaken","UnavailableID","InvalidKey","Leave","_cleanupPeer","delete","Expire","PeerUnavailable","_addConnection","Call","Connection","message_1","e_2_1","_storeMessage","connect","connections","e_3","connections_1","connections_1_1","e_3_1","destroyed","e_4","e_4_1","e_5","connections_2","connections_2_1","e_5_1","currentId","reconnect","peers","peer_1","peerjs","Depth2Web","addr","imgWidth","imgHeight","depthBlob","colorBlob","depthURL","colorURL","peer_net","peer_id","conn","URL","createObjectURL","getElementById","depthImg","colorImg","OVERLAY_ID","OldModule","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","ws","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","generated","js","clear","hmrApply","hmrAcceptRun","reload","removeErrorOverlay","stack","overlay","createErrorOverlay","appendChild","remove","createElement","stackTrace","innerText","innerHTML","getParents","parents","dep","isArray","Function","deps","cached"],"mappings":"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","file":"depth2web-client.05a61ba4.js","sourceRoot":"../client","sourcesContent":["// modules are defined as an array\n// [ module function, map of requires ]\n//\n// map of requires is short require name -> numeric require\n//\n// anything defined in a previous bundle is accessed via the\n// orig method which is the require for previous bundles\nparcelRequire = (function (modules, cache, entry, globalName) {\n  // Save the require from previous bundle to this closure if any\n  var previousRequire = typeof parcelRequire === 'function' && parcelRequire;\n  var nodeRequire = typeof require === 'function' && require;\n\n  function newRequire(name, jumped) {\n    if (!cache[name]) {\n      if (!modules[name]) {\n        // if we cannot find the module within our internal map or\n        // cache jump to the current global require ie. the last bundle\n        // that was added to the page.\n        var currentRequire = typeof parcelRequire === 'function' && parcelRequire;\n        if (!jumped && currentRequire) {\n          return currentRequire(name, true);\n        }\n\n        // If there are other bundles on this page the require from the\n        // previous one is saved to 'previousRequire'. Repeat this as\n        // many times as there are bundles until the module is found or\n        // we exhaust the require chain.\n        if (previousRequire) {\n          return previousRequire(name, true);\n        }\n\n        // Try the node require function if it exists.\n        if (nodeRequire && typeof name === 'string') {\n          return nodeRequire(name);\n        }\n\n        var err = new Error('Cannot find module \\'' + name + '\\'');\n        err.code = 'MODULE_NOT_FOUND';\n        throw err;\n      }\n\n      localRequire.resolve = resolve;\n      localRequire.cache = {};\n\n      var module = cache[name] = new newRequire.Module(name);\n\n      modules[name][0].call(module.exports, localRequire, module, module.exports, this);\n    }\n\n    return cache[name].exports;\n\n    function localRequire(x){\n      return newRequire(localRequire.resolve(x));\n    }\n\n    function resolve(x){\n      return modules[name][1][x] || x;\n    }\n  }\n\n  function Module(moduleName) {\n    this.id = moduleName;\n    this.bundle = newRequire;\n    this.exports = {};\n  }\n\n  newRequire.isParcelRequire = true;\n  newRequire.Module = Module;\n  newRequire.modules = modules;\n  newRequire.cache = cache;\n  newRequire.parent = previousRequire;\n  newRequire.register = function (id, exports) {\n    modules[id] = [function (require, module) {\n      module.exports = exports;\n    }, {}];\n  };\n\n  var error;\n  for (var i = 0; i < entry.length; i++) {\n    try {\n      newRequire(entry[i]);\n    } catch (e) {\n      // Save first error but execute all entries\n      if (!error) {\n        error = e;\n      }\n    }\n  }\n\n  if (entry.length) {\n    // Expose entry point to Node, AMD or browser globals\n    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js\n    var mainExports = newRequire(entry[entry.length - 1]);\n\n    // CommonJS\n    if (typeof exports === \"object\" && typeof module !== \"undefined\") {\n      module.exports = mainExports;\n\n    // RequireJS\n    } else if (typeof define === \"function\" && define.amd) {\n     define(function () {\n       return mainExports;\n     });\n\n    // <script>\n    } else if (globalName) {\n      this[globalName] = mainExports;\n    }\n  }\n\n  // Override the current require with this new one\n  parcelRequire = newRequire;\n\n  if (error) {\n    // throw error from earlier, _after updating parcelRequire_\n    throw error;\n  }\n\n  return newRequire;\n})({\"EgBh\":[function(require,module,exports) {\nvar binaryFeatures = {};\r\nbinaryFeatures.useBlobBuilder = (function () {\r\n  try {\r\n    new Blob([]);\r\n    return false;\r\n  } catch (e) {\r\n    return true;\r\n  }\r\n})();\r\n\r\nbinaryFeatures.useArrayBufferView = !binaryFeatures.useBlobBuilder && (function () {\r\n  try {\r\n    return (new Blob([new Uint8Array([])])).size === 0;\r\n  } catch (e) {\r\n    return true;\r\n  }\r\n})();\r\n\r\nmodule.exports.binaryFeatures = binaryFeatures;\r\nvar BlobBuilder = module.exports.BlobBuilder;\r\nif (typeof window !== 'undefined') {\r\n  BlobBuilder = module.exports.BlobBuilder = window.WebKitBlobBuilder ||\r\n    window.MozBlobBuilder || window.MSBlobBuilder || window.BlobBuilder;\r\n}\r\n\r\nfunction BufferBuilder () {\r\n  this._pieces = [];\r\n  this._parts = [];\r\n}\r\n\r\nBufferBuilder.prototype.append = function (data) {\r\n  if (typeof data === 'number') {\r\n    this._pieces.push(data);\r\n  } else {\r\n    this.flush();\r\n    this._parts.push(data);\r\n  }\r\n};\r\n\r\nBufferBuilder.prototype.flush = function () {\r\n  if (this._pieces.length > 0) {\r\n    var buf = new Uint8Array(this._pieces);\r\n    if (!binaryFeatures.useArrayBufferView) {\r\n      buf = buf.buffer;\r\n    }\r\n    this._parts.push(buf);\r\n    this._pieces = [];\r\n  }\r\n};\r\n\r\nBufferBuilder.prototype.getBuffer = function () {\r\n  this.flush();\r\n  if (binaryFeatures.useBlobBuilder) {\r\n    var builder = new BlobBuilder();\r\n    for (var i = 0, ii = this._parts.length; i < ii; i++) {\r\n      builder.append(this._parts[i]);\r\n    }\r\n    return builder.getBlob();\r\n  } else {\r\n    return new Blob(this._parts);\r\n  }\r\n};\r\n\r\nmodule.exports.BufferBuilder = BufferBuilder;\r\n\n},{}],\"kdPp\":[function(require,module,exports) {\nvar BufferBuilder = require('./bufferbuilder').BufferBuilder;\r\nvar binaryFeatures = require('./bufferbuilder').binaryFeatures;\r\n\r\nvar BinaryPack = {\r\n  unpack: function (data) {\r\n    var unpacker = new Unpacker(data);\r\n    return unpacker.unpack();\r\n  },\r\n  pack: function (data) {\r\n    var packer = new Packer();\r\n    packer.pack(data);\r\n    var buffer = packer.getBuffer();\r\n    return buffer;\r\n  }\r\n};\r\n\r\nmodule.exports = BinaryPack;\r\n\r\nfunction Unpacker (data) {\r\n  // Data is ArrayBuffer\r\n  this.index = 0;\r\n  this.dataBuffer = data;\r\n  this.dataView = new Uint8Array(this.dataBuffer);\r\n  this.length = this.dataBuffer.byteLength;\r\n}\r\n\r\nUnpacker.prototype.unpack = function () {\r\n  var type = this.unpack_uint8();\r\n  if (type < 0x80) {\r\n    return type;\r\n  } else if ((type ^ 0xe0) < 0x20) {\r\n    return (type ^ 0xe0) - 0x20;\r\n  }\r\n\r\n  var size;\r\n  if ((size = type ^ 0xa0) <= 0x0f) {\r\n    return this.unpack_raw(size);\r\n  } else if ((size = type ^ 0xb0) <= 0x0f) {\r\n    return this.unpack_string(size);\r\n  } else if ((size = type ^ 0x90) <= 0x0f) {\r\n    return this.unpack_array(size);\r\n  } else if ((size = type ^ 0x80) <= 0x0f) {\r\n    return this.unpack_map(size);\r\n  }\r\n\r\n  switch (type) {\r\n    case 0xc0:\r\n      return null;\r\n    case 0xc1:\r\n      return undefined;\r\n    case 0xc2:\r\n      return false;\r\n    case 0xc3:\r\n      return true;\r\n    case 0xca:\r\n      return this.unpack_float();\r\n    case 0xcb:\r\n      return this.unpack_double();\r\n    case 0xcc:\r\n      return this.unpack_uint8();\r\n    case 0xcd:\r\n      return this.unpack_uint16();\r\n    case 0xce:\r\n      return this.unpack_uint32();\r\n    case 0xcf:\r\n      return this.unpack_uint64();\r\n    case 0xd0:\r\n      return this.unpack_int8();\r\n    case 0xd1:\r\n      return this.unpack_int16();\r\n    case 0xd2:\r\n      return this.unpack_int32();\r\n    case 0xd3:\r\n      return this.unpack_int64();\r\n    case 0xd4:\r\n      return undefined;\r\n    case 0xd5:\r\n      return undefined;\r\n    case 0xd6:\r\n      return undefined;\r\n    case 0xd7:\r\n      return undefined;\r\n    case 0xd8:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_string(size);\r\n    case 0xd9:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_string(size);\r\n    case 0xda:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_raw(size);\r\n    case 0xdb:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_raw(size);\r\n    case 0xdc:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_array(size);\r\n    case 0xdd:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_array(size);\r\n    case 0xde:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_map(size);\r\n    case 0xdf:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_map(size);\r\n  }\r\n};\r\n\r\nUnpacker.prototype.unpack_uint8 = function () {\r\n  var byte = this.dataView[this.index] & 0xff;\r\n  this.index++;\r\n  return byte;\r\n};\r\n\r\nUnpacker.prototype.unpack_uint16 = function () {\r\n  var bytes = this.read(2);\r\n  var uint16 =\r\n    ((bytes[0] & 0xff) * 256) + (bytes[1] & 0xff);\r\n  this.index += 2;\r\n  return uint16;\r\n};\r\n\r\nUnpacker.prototype.unpack_uint32 = function () {\r\n  var bytes = this.read(4);\r\n  var uint32 =\r\n    ((bytes[0] * 256 +\r\n      bytes[1]) * 256 +\r\n      bytes[2]) * 256 +\r\n    bytes[3];\r\n  this.index += 4;\r\n  return uint32;\r\n};\r\n\r\nUnpacker.prototype.unpack_uint64 = function () {\r\n  var bytes = this.read(8);\r\n  var uint64 =\r\n    ((((((bytes[0] * 256 +\r\n      bytes[1]) * 256 +\r\n      bytes[2]) * 256 +\r\n      bytes[3]) * 256 +\r\n      bytes[4]) * 256 +\r\n      bytes[5]) * 256 +\r\n      bytes[6]) * 256 +\r\n    bytes[7];\r\n  this.index += 8;\r\n  return uint64;\r\n};\r\n\r\nUnpacker.prototype.unpack_int8 = function () {\r\n  var uint8 = this.unpack_uint8();\r\n  return (uint8 < 0x80) ? uint8 : uint8 - (1 << 8);\r\n};\r\n\r\nUnpacker.prototype.unpack_int16 = function () {\r\n  var uint16 = this.unpack_uint16();\r\n  return (uint16 < 0x8000) ? uint16 : uint16 - (1 << 16);\r\n};\r\n\r\nUnpacker.prototype.unpack_int32 = function () {\r\n  var uint32 = this.unpack_uint32();\r\n  return (uint32 < Math.pow(2, 31)) ? uint32\r\n    : uint32 - Math.pow(2, 32);\r\n};\r\n\r\nUnpacker.prototype.unpack_int64 = function () {\r\n  var uint64 = this.unpack_uint64();\r\n  return (uint64 < Math.pow(2, 63)) ? uint64\r\n    : uint64 - Math.pow(2, 64);\r\n};\r\n\r\nUnpacker.prototype.unpack_raw = function (size) {\r\n  if (this.length < this.index + size) {\r\n    throw new Error('BinaryPackFailure: index is out of range' +\r\n      ' ' + this.index + ' ' + size + ' ' + this.length);\r\n  }\r\n  var buf = this.dataBuffer.slice(this.index, this.index + size);\r\n  this.index += size;\r\n\r\n  // buf = util.bufferToString(buf);\r\n\r\n  return buf;\r\n};\r\n\r\nUnpacker.prototype.unpack_string = function (size) {\r\n  var bytes = this.read(size);\r\n  var i = 0;\r\n  var str = '';\r\n  var c;\r\n  var code;\r\n\r\n  while (i < size) {\r\n    c = bytes[i];\r\n    if (c < 128) {\r\n      str += String.fromCharCode(c);\r\n      i++;\r\n    } else if ((c ^ 0xc0) < 32) {\r\n      code = ((c ^ 0xc0) << 6) | (bytes[i + 1] & 63);\r\n      str += String.fromCharCode(code);\r\n      i += 2;\r\n    } else {\r\n      code = ((c & 15) << 12) | ((bytes[i + 1] & 63) << 6) |\r\n        (bytes[i + 2] & 63);\r\n      str += String.fromCharCode(code);\r\n      i += 3;\r\n    }\r\n  }\r\n\r\n  this.index += size;\r\n  return str;\r\n};\r\n\r\nUnpacker.prototype.unpack_array = function (size) {\r\n  var objects = new Array(size);\r\n  for (var i = 0; i < size; i++) {\r\n    objects[i] = this.unpack();\r\n  }\r\n  return objects;\r\n};\r\n\r\nUnpacker.prototype.unpack_map = function (size) {\r\n  var map = {};\r\n  for (var i = 0; i < size; i++) {\r\n    var key = this.unpack();\r\n    var value = this.unpack();\r\n    map[key] = value;\r\n  }\r\n  return map;\r\n};\r\n\r\nUnpacker.prototype.unpack_float = function () {\r\n  var uint32 = this.unpack_uint32();\r\n  var sign = uint32 >> 31;\r\n  var exp = ((uint32 >> 23) & 0xff) - 127;\r\n  var fraction = (uint32 & 0x7fffff) | 0x800000;\r\n  return (sign === 0 ? 1 : -1) *\r\n    fraction * Math.pow(2, exp - 23);\r\n};\r\n\r\nUnpacker.prototype.unpack_double = function () {\r\n  var h32 = this.unpack_uint32();\r\n  var l32 = this.unpack_uint32();\r\n  var sign = h32 >> 31;\r\n  var exp = ((h32 >> 20) & 0x7ff) - 1023;\r\n  var hfrac = (h32 & 0xfffff) | 0x100000;\r\n  var frac = hfrac * Math.pow(2, exp - 20) +\r\n    l32 * Math.pow(2, exp - 52);\r\n  return (sign === 0 ? 1 : -1) * frac;\r\n};\r\n\r\nUnpacker.prototype.read = function (length) {\r\n  var j = this.index;\r\n  if (j + length <= this.length) {\r\n    return this.dataView.subarray(j, j + length);\r\n  } else {\r\n    throw new Error('BinaryPackFailure: read index out of range');\r\n  }\r\n};\r\n\r\nfunction Packer () {\r\n  this.bufferBuilder = new BufferBuilder();\r\n}\r\n\r\nPacker.prototype.getBuffer = function () {\r\n  return this.bufferBuilder.getBuffer();\r\n};\r\n\r\nPacker.prototype.pack = function (value) {\r\n  var type = typeof (value);\r\n  if (type === 'string') {\r\n    this.pack_string(value);\r\n  } else if (type === 'number') {\r\n    if (Math.floor(value) === value) {\r\n      this.pack_integer(value);\r\n    } else {\r\n      this.pack_double(value);\r\n    }\r\n  } else if (type === 'boolean') {\r\n    if (value === true) {\r\n      this.bufferBuilder.append(0xc3);\r\n    } else if (value === false) {\r\n      this.bufferBuilder.append(0xc2);\r\n    }\r\n  } else if (type === 'undefined') {\r\n    this.bufferBuilder.append(0xc0);\r\n  } else if (type === 'object') {\r\n    if (value === null) {\r\n      this.bufferBuilder.append(0xc0);\r\n    } else {\r\n      var constructor = value.constructor;\r\n      if (constructor == Array) {\r\n        this.pack_array(value);\r\n      } else if (constructor == Blob || constructor == File || value instanceof Blob || value instanceof File) {\r\n        this.pack_bin(value);\r\n      } else if (constructor == ArrayBuffer) {\r\n        if (binaryFeatures.useArrayBufferView) {\r\n          this.pack_bin(new Uint8Array(value));\r\n        } else {\r\n          this.pack_bin(value);\r\n        }\r\n      } else if ('BYTES_PER_ELEMENT' in value) {\r\n        if (binaryFeatures.useArrayBufferView) {\r\n          this.pack_bin(new Uint8Array(value.buffer));\r\n        } else {\r\n          this.pack_bin(value.buffer);\r\n        }\r\n      } else if ((constructor == Object) || (constructor.toString().startsWith('class'))) {\r\n        this.pack_object(value);\r\n      } else if (constructor == Date) {\r\n        this.pack_string(value.toString());\r\n      } else if (typeof value.toBinaryPack === 'function') {\r\n        this.bufferBuilder.append(value.toBinaryPack());\r\n      } else {\r\n        throw new Error('Type \"' + constructor.toString() + '\" not yet supported');\r\n      }\r\n    }\r\n  } else {\r\n    throw new Error('Type \"' + type + '\" not yet supported');\r\n  }\r\n  this.bufferBuilder.flush();\r\n};\r\n\r\nPacker.prototype.pack_bin = function (blob) {\r\n  var length = blob.length || blob.byteLength || blob.size;\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0xa0 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xda);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xdb);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  this.bufferBuilder.append(blob);\r\n};\r\n\r\nPacker.prototype.pack_string = function (str) {\r\n  var length = utf8Length(str);\r\n\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0xb0 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xd8);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xd9);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  this.bufferBuilder.append(str);\r\n};\r\n\r\nPacker.prototype.pack_array = function (ary) {\r\n  var length = ary.length;\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0x90 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xdc);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xdd);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  for (var i = 0; i < length; i++) {\r\n    this.pack(ary[i]);\r\n  }\r\n};\r\n\r\nPacker.prototype.pack_integer = function (num) {\r\n  if (num >= -0x20 && num <= 0x7f) {\r\n    this.bufferBuilder.append(num & 0xff);\r\n  } else if (num >= 0x00 && num <= 0xff) {\r\n    this.bufferBuilder.append(0xcc);\r\n    this.pack_uint8(num);\r\n  } else if (num >= -0x80 && num <= 0x7f) {\r\n    this.bufferBuilder.append(0xd0);\r\n    this.pack_int8(num);\r\n  } else if (num >= 0x0000 && num <= 0xffff) {\r\n    this.bufferBuilder.append(0xcd);\r\n    this.pack_uint16(num);\r\n  } else if (num >= -0x8000 && num <= 0x7fff) {\r\n    this.bufferBuilder.append(0xd1);\r\n    this.pack_int16(num);\r\n  } else if (num >= 0x00000000 && num <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xce);\r\n    this.pack_uint32(num);\r\n  } else if (num >= -0x80000000 && num <= 0x7fffffff) {\r\n    this.bufferBuilder.append(0xd2);\r\n    this.pack_int32(num);\r\n  } else if (num >= -0x8000000000000000 && num <= 0x7FFFFFFFFFFFFFFF) {\r\n    this.bufferBuilder.append(0xd3);\r\n    this.pack_int64(num);\r\n  } else if (num >= 0x0000000000000000 && num <= 0xFFFFFFFFFFFFFFFF) {\r\n    this.bufferBuilder.append(0xcf);\r\n    this.pack_uint64(num);\r\n  } else {\r\n    throw new Error('Invalid integer');\r\n  }\r\n};\r\n\r\nPacker.prototype.pack_double = function (num) {\r\n  var sign = 0;\r\n  if (num < 0) {\r\n    sign = 1;\r\n    num = -num;\r\n  }\r\n  var exp = Math.floor(Math.log(num) / Math.LN2);\r\n  var frac0 = num / Math.pow(2, exp) - 1;\r\n  var frac1 = Math.floor(frac0 * Math.pow(2, 52));\r\n  var b32 = Math.pow(2, 32);\r\n  var h32 = (sign << 31) | ((exp + 1023) << 20) |\r\n    (frac1 / b32) & 0x0fffff;\r\n  var l32 = frac1 % b32;\r\n  this.bufferBuilder.append(0xcb);\r\n  this.pack_int32(h32);\r\n  this.pack_int32(l32);\r\n};\r\n\r\nPacker.prototype.pack_object = function (obj) {\r\n  var keys = Object.keys(obj);\r\n  var length = keys.length;\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0x80 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xde);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xdf);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  for (var prop in obj) {\r\n    if (obj.hasOwnProperty(prop)) {\r\n      this.pack(prop);\r\n      this.pack(obj[prop]);\r\n    }\r\n  }\r\n};\r\n\r\nPacker.prototype.pack_uint8 = function (num) {\r\n  this.bufferBuilder.append(num);\r\n};\r\n\r\nPacker.prototype.pack_uint16 = function (num) {\r\n  this.bufferBuilder.append(num >> 8);\r\n  this.bufferBuilder.append(num & 0xff);\r\n};\r\n\r\nPacker.prototype.pack_uint32 = function (num) {\r\n  var n = num & 0xffffffff;\r\n  this.bufferBuilder.append((n & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((n & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((n & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((n & 0x000000ff));\r\n};\r\n\r\nPacker.prototype.pack_uint64 = function (num) {\r\n  var high = num / Math.pow(2, 32);\r\n  var low = num % Math.pow(2, 32);\r\n  this.bufferBuilder.append((high & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((high & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((high & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((high & 0x000000ff));\r\n  this.bufferBuilder.append((low & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((low & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((low & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((low & 0x000000ff));\r\n};\r\n\r\nPacker.prototype.pack_int8 = function (num) {\r\n  this.bufferBuilder.append(num & 0xff);\r\n};\r\n\r\nPacker.prototype.pack_int16 = function (num) {\r\n  this.bufferBuilder.append((num & 0xff00) >> 8);\r\n  this.bufferBuilder.append(num & 0xff);\r\n};\r\n\r\nPacker.prototype.pack_int32 = function (num) {\r\n  this.bufferBuilder.append((num >>> 24) & 0xff);\r\n  this.bufferBuilder.append((num & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((num & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((num & 0x000000ff));\r\n};\r\n\r\nPacker.prototype.pack_int64 = function (num) {\r\n  var high = Math.floor(num / Math.pow(2, 32));\r\n  var low = num % Math.pow(2, 32);\r\n  this.bufferBuilder.append((high & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((high & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((high & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((high & 0x000000ff));\r\n  this.bufferBuilder.append((low & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((low & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((low & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((low & 0x000000ff));\r\n};\r\n\r\nfunction _utf8Replace (m) {\r\n  var code = m.charCodeAt(0);\r\n\r\n  if (code <= 0x7ff) return '00';\r\n  if (code <= 0xffff) return '000';\r\n  if (code <= 0x1fffff) return '0000';\r\n  if (code <= 0x3ffffff) return '00000';\r\n  return '000000';\r\n}\r\n\r\nfunction utf8Length (str) {\r\n  if (str.length > 600) {\r\n    // Blob method faster for large strings\r\n    return (new Blob([str])).size;\r\n  } else {\r\n    return str.replace(/[^\\u0000-\\u007F]/g, _utf8Replace).length;\r\n  }\r\n}\r\n\n},{\"./bufferbuilder\":\"EgBh\"}],\"iSxC\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.extractVersion = extractVersion;\nexports.wrapPeerConnectionEvent = wrapPeerConnectionEvent;\nexports.disableLog = disableLog;\nexports.disableWarnings = disableWarnings;\nexports.log = log;\nexports.deprecated = deprecated;\nexports.detectBrowser = detectBrowser;\nexports.compactObject = compactObject;\nexports.walkStats = walkStats;\nexports.filterStats = filterStats;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function (obj) { return typeof obj; }; } else { _typeof = function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar logDisabled_ = true;\nvar deprecationWarnings_ = true;\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\n\nfunction extractVersion(uastring, expr, pos) {\n  var match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n} // Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\n\n\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  var proto = window.RTCPeerConnection.prototype;\n  var nativeAddEventListener = proto.addEventListener;\n\n  proto.addEventListener = function (nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n\n    var wrappedCallback = function (e) {\n      var modifiedEvent = wrapper(e);\n\n      if (modifiedEvent) {\n        cb(modifiedEvent);\n      }\n    };\n\n    this._eventMap = this._eventMap || {};\n    this._eventMap[cb] = wrappedCallback;\n    return nativeAddEventListener.apply(this, [nativeEventName, wrappedCallback]);\n  };\n\n  var nativeRemoveEventListener = proto.removeEventListener;\n\n  proto.removeEventListener = function (nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap || !this._eventMap[cb]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n\n    var unwrappedCb = this._eventMap[cb];\n    delete this._eventMap[cb];\n    return nativeRemoveEventListener.apply(this, [nativeEventName, unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get: function () {\n      return this['_on' + eventNameToWrap];\n    },\n    set: function (cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap, this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n\n      if (cb) {\n        this.addEventListener(eventNameToWrap, this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nfunction disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + _typeof(bool) + '. Please use a boolean.');\n  }\n\n  logDisabled_ = bool;\n  return bool ? 'adapter.js logging disabled' : 'adapter.js logging enabled';\n}\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\n\n\nfunction disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + _typeof(bool) + '. Please use a boolean.');\n  }\n\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nfunction log() {\n  if ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\n\n\nfunction deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod + ' instead.');\n}\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\n\n\nfunction detectBrowser(window) {\n  var {\n    navigator: navigator\n  } = window; // Returned result object.\n\n  var result = {\n    browser: null,\n    version: null\n  }; // Fail early if it's not a browser\n\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  if (navigator.mozGetUserMedia) {\n    // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent, /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia || window.isSecureContext === false && window.webkitRTCPeerConnection && !window.RTCIceGatherer) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices && navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n    // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent, /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection && navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n    // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent, /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver && 'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else {\n    // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\n\n\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\n\n\nfunction compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function (accumulator, key) {\n    var isObj = isObject(data[key]);\n    var value = isObj ? compactObject(data[key]) : data[key];\n    var isEmptyObject = isObj && !Object.keys(value).length;\n\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n\n    return Object.assign(accumulator, _defineProperty({}, key, value));\n  }, {});\n}\n/* iterates the stats graph recursively. */\n\n\nfunction walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(function (name) {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(function (id) {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n/* filter getStats for a sender/receiver track. */\n\n\nfunction filterStats(result, track, outbound) {\n  var streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  var filteredResult = new Map();\n\n  if (track === null) {\n    return filteredResult;\n  }\n\n  var trackStats = [];\n  result.forEach(function (value) {\n    if (value.type === 'track' && value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(function (trackStat) {\n    result.forEach(function (stats) {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n},{}],\"s6SN\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetUserMedia = shimGetUserMedia;\n\nvar utils = _interopRequireWildcard(require(\"../utils.js\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function (obj) { return typeof obj; }; } else { _typeof = function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar logging = utils.log;\n\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  var browserDetails = utils.detectBrowser(window);\n\n  var constraintsToChrome_ = function (c) {\n    if (_typeof(c) !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n\n    var cc = {};\n    Object.keys(c).forEach(function (key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n\n      var r = _typeof(c[key]) === 'object' ? c[key] : {\n        ideal: c[key]\n      };\n\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n\n      var oldname_ = function (prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n\n        return name === 'deviceId' ? 'sourceId' : name;\n      };\n\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function (mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n\n    return cc;\n  };\n\n  var shimConstraints_ = function (constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n\n    constraints = JSON.parse(JSON.stringify(constraints));\n\n    if (constraints && _typeof(constraints.audio) === 'object') {\n      var remap = function (obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n\n    if (constraints && _typeof(constraints.video) === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      var face = constraints.video.facingMode;\n      face = face && (_typeof(face) === 'object' ? face : {\n        ideal: face\n      });\n      var getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if (face && (face.exact === 'user' || face.exact === 'environment' || face.ideal === 'user' || face.ideal === 'environment') && !(navigator.mediaDevices.getSupportedConstraints && navigator.mediaDevices.getSupportedConstraints().facingMode && !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        var matches;\n\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n            devices = devices.filter(function (d) {\n              return d.kind === 'videoinput';\n            });\n            var dev = devices.find(function (d) {\n              return matches.some(function (match) {\n                return d.label.toLowerCase().includes(match);\n              });\n            });\n\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {\n                exact: dev.deviceId\n              } : {\n                ideal: dev.deviceId\n              };\n            }\n\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function (e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString: function () {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function (constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function (c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function (e) {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n\n  navigator.getUserMedia = getUserMedia_.bind(navigator); // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n\n  if (navigator.mediaDevices.getUserMedia) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n\n    navigator.mediaDevices.getUserMedia = function (cs) {\n      return shimConstraints_(cs, function (c) {\n        return origGetUserMedia(c).then(function (stream) {\n          if (c.audio && !stream.getAudioTracks().length || c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function (track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n\n          return stream;\n        }, function (e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n}\n},{\"../utils.js\":\"iSxC\"}],\"VHa8\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = shimGetDisplayMedia;\n\nfunction shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n\n  if (!window.navigator.mediaDevices) {\n    return;\n  } // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n\n\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' + 'a function');\n    return;\n  }\n\n  window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n    return getSourceId(constraints).then(function (sourceId) {\n      var widthSpecified = constraints.video && constraints.video.width;\n      var heightSpecified = constraints.video && constraints.video.height;\n      var frameRateSpecified = constraints.video && constraints.video.frameRate;\n      constraints.video = {\n        mandatory: {\n          chromeMediaSource: 'desktop',\n          chromeMediaSourceId: sourceId,\n          maxFrameRate: frameRateSpecified || 3\n        }\n      };\n\n      if (widthSpecified) {\n        constraints.video.mandatory.maxWidth = widthSpecified;\n      }\n\n      if (heightSpecified) {\n        constraints.video.mandatory.maxHeight = heightSpecified;\n      }\n\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    });\n  };\n}\n},{}],\"uI5X\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimMediaStream = shimMediaStream;\nexports.shimOnTrack = shimOnTrack;\nexports.shimGetSendersWithDtmf = shimGetSendersWithDtmf;\nexports.shimGetStats = shimGetStats;\nexports.shimSenderReceiverGetStats = shimSenderReceiverGetStats;\nexports.shimAddTrackRemoveTrackWithNative = shimAddTrackRemoveTrackWithNative;\nexports.shimAddTrackRemoveTrack = shimAddTrackRemoveTrack;\nexports.shimPeerConnection = shimPeerConnection;\nexports.fixNegotiationNeeded = fixNegotiationNeeded;\nObject.defineProperty(exports, \"shimGetUserMedia\", {\n  enumerable: true,\n  get: function () {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\nObject.defineProperty(exports, \"shimGetDisplayMedia\", {\n  enumerable: true,\n  get: function () {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\n\nvar utils = _interopRequireWildcard(require(\"../utils.js\"));\n\nvar _getusermedia = require(\"./getusermedia\");\n\nvar _getdisplaymedia = require(\"./getdisplaymedia\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function (obj) { return typeof obj; }; } else { _typeof = function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nfunction shimOnTrack(window) {\n  if (_typeof(window) === 'object' && window.RTCPeerConnection && !('ontrack' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get: function () {\n        return this._ontrack;\n      },\n      set: function (f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      var _this = this;\n\n      if (!this._ontrackpoly) {\n        this._ontrackpoly = function (e) {\n          // onaddstream does not fire when a track is added to an existing\n          // stream. But stream.onaddtrack is implemented so we use that.\n          e.stream.addEventListener('addtrack', function (te) {\n            var receiver;\n\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = _this.getReceivers().find(function (r) {\n                return r.track && r.track.id === te.track.id;\n              });\n            } else {\n              receiver = {\n                track: te.track\n              };\n            }\n\n            var event = new Event('track');\n            event.track = te.track;\n            event.receiver = receiver;\n            event.transceiver = {\n              receiver: receiver\n            };\n            event.streams = [e.stream];\n\n            _this.dispatchEvent(event);\n          });\n          e.stream.getTracks().forEach(function (track) {\n            var receiver;\n\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = _this.getReceivers().find(function (r) {\n                return r.track && r.track.id === track.id;\n              });\n            } else {\n              receiver = {\n                track: track\n              };\n            }\n\n            var event = new Event('track');\n            event.track = track;\n            event.receiver = receiver;\n            event.transceiver = {\n              receiver: receiver\n            };\n            event.streams = [e.stream];\n\n            _this.dispatchEvent(event);\n          });\n        };\n\n        this.addEventListener('addstream', this._ontrackpoly);\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver', {\n          value: {\n            receiver: e.receiver\n          }\n        });\n      }\n\n      return e;\n    });\n  }\n}\n\nfunction shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (_typeof(window) === 'object' && window.RTCPeerConnection && !('getSenders' in window.RTCPeerConnection.prototype) && 'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    var shimSenderWithDtmf = function (pc, track) {\n      return {\n        track: track,\n\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n\n          return this._dtmf;\n        },\n\n        _pc: pc\n      };\n    }; // augment addTrack when getSenders is not available.\n\n\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n\n      var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n\n      window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n        var sender = origAddTrack.apply(this, arguments);\n\n        if (!sender) {\n          sender = shimSenderWithDtmf(this, track);\n\n          this._senders.push(sender);\n        }\n\n        return sender;\n      };\n\n      var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n\n      window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n        origRemoveTrack.apply(this, arguments);\n\n        var idx = this._senders.indexOf(sender);\n\n        if (idx !== -1) {\n          this._senders.splice(idx, 1);\n        }\n      };\n    }\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this2 = this;\n\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(function (track) {\n        _this2._senders.push(shimSenderWithDtmf(_this2, track));\n      });\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this3 = this;\n\n      this._senders = this._senders || [];\n      origRemoveStream.apply(this, [stream]);\n      stream.getTracks().forEach(function (track) {\n        var sender = _this3._senders.find(function (s) {\n          return s.track === track;\n        });\n\n        if (sender) {\n          // remove sender\n          _this3._senders.splice(_this3._senders.indexOf(sender), 1);\n        }\n      });\n    };\n  } else if (_typeof(window) === 'object' && window.RTCPeerConnection && 'getSenders' in window.RTCPeerConnection.prototype && 'createDTMFSender' in window.RTCPeerConnection.prototype && window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      var _this4 = this;\n\n      var senders = origGetSenders.apply(this, []);\n      senders.forEach(function (sender) {\n        return sender._pc = _this4;\n      });\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get: function () {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nfunction shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  var origGetStats = window.RTCPeerConnection.prototype.getStats;\n\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    var _this5 = this;\n\n    var [selector, onSucc, onErr] = arguments; // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    } // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n\n\n    if (origGetStats.length === 0 && (arguments.length === 0 || typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    var fixChromeStats_ = function (response) {\n      var standardReport = {};\n      var reports = response.result();\n      reports.forEach(function (report) {\n        var standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(function (name) {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n      return standardReport;\n    }; // shim getStats with maplike support\n\n\n    var makeMapStats = function (stats) {\n      return new Map(Object.keys(stats).map(function (key) {\n        return [key, stats[key]];\n      }));\n    };\n\n    if (arguments.length >= 2) {\n      var successCallbackWrapper_ = function (response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_, selector]);\n    } // promise-support\n\n\n    return new Promise(function (resolve, reject) {\n      origGetStats.apply(_this5, [function (response) {\n        resolve(makeMapStats(fixChromeStats_(response)));\n      }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderReceiverGetStats(window) {\n  if (!(_typeof(window) === 'object' && window.RTCPeerConnection && window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  } // shim sender stats.\n\n\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        var _this6 = this;\n\n        var senders = origGetSenders.apply(this, []);\n        senders.forEach(function (sender) {\n          return sender._pc = _this6;\n        });\n        return senders;\n      };\n    }\n\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        var sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      var sender = this;\n      return this._pc.getStats().then(function (result) {\n        return (\n          /* Note: this will include stats of all senders that\n           *   send a track with the same id as sender.track as\n           *   it is not possible to identify the RTCRtpSender.\n           */\n          utils.filterStats(result, sender.track, true)\n        );\n      });\n    };\n  } // shim receiver stats.\n\n\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n        var _this7 = this;\n\n        var receivers = origGetReceivers.apply(this, []);\n        receivers.forEach(function (receiver) {\n          return receiver._pc = _this7;\n        });\n        return receivers;\n      };\n    }\n\n    utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      var receiver = this;\n      return this._pc.getStats().then(function (result) {\n        return utils.filterStats(result, receiver.track, false);\n      });\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype && 'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  } // shim RTCPeerConnection.getStats(track).\n\n\n  var origGetStats = window.RTCPeerConnection.prototype.getStats;\n\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 && arguments[0] instanceof window.MediaStreamTrack) {\n      var track = arguments[0];\n      var sender;\n      var receiver;\n      var err;\n      this.getSenders().forEach(function (s) {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(function (r) {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n\n        return r.track === track;\n      });\n\n      if (err || sender && receiver) {\n        return Promise.reject(new DOMException('There are more than one sender or receiver for the track.', 'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n\n      return Promise.reject(new DOMException('There is no sender or receiver for the track.', 'InvalidAccessError'));\n    }\n\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nfunction shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n    var _this8 = this;\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    return Object.keys(this._shimmedLocalStreams).map(function (streamId) {\n      return _this8._shimmedLocalStreams[streamId][0];\n    });\n  };\n\n  var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n\n  window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n    if (!stream) {\n      return origAddTrack.apply(this, arguments);\n    }\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    var sender = origAddTrack.apply(this, arguments);\n\n    if (!this._shimmedLocalStreams[stream.id]) {\n      this._shimmedLocalStreams[stream.id] = [stream, sender];\n    } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n      this._shimmedLocalStreams[stream.id].push(sender);\n    }\n\n    return sender;\n  };\n\n  var origAddStream = window.RTCPeerConnection.prototype.addStream;\n\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    var _this9 = this;\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    stream.getTracks().forEach(function (track) {\n      var alreadyExists = _this9.getSenders().find(function (s) {\n        return s.track === track;\n      });\n\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.', 'InvalidAccessError');\n      }\n    });\n    var existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    var newSenders = this.getSenders().filter(function (newSender) {\n      return existingSenders.indexOf(newSender) === -1;\n    });\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    delete this._shimmedLocalStreams[stream.id];\n    return origRemoveStream.apply(this, arguments);\n  };\n\n  var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n\n  window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n    var _this10 = this;\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    if (sender) {\n      Object.keys(this._shimmedLocalStreams).forEach(function (streamId) {\n        var idx = _this10._shimmedLocalStreams[streamId].indexOf(sender);\n\n        if (idx !== -1) {\n          _this10._shimmedLocalStreams[streamId].splice(idx, 1);\n        }\n\n        if (_this10._shimmedLocalStreams[streamId].length === 1) {\n          delete _this10._shimmedLocalStreams[streamId];\n        }\n      });\n    }\n\n    return origRemoveTrack.apply(this, arguments);\n  };\n}\n\nfunction shimAddTrackRemoveTrack(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  var browserDetails = utils.detectBrowser(window); // shim addTrack and removeTrack.\n\n  if (window.RTCPeerConnection.prototype.addTrack && browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  } // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n\n\n  var origGetLocalStreams = window.RTCPeerConnection.prototype.getLocalStreams;\n\n  window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n    var _this11 = this;\n\n    var nativeStreams = origGetLocalStreams.apply(this);\n    this._reverseStreams = this._reverseStreams || {};\n    return nativeStreams.map(function (stream) {\n      return _this11._reverseStreams[stream.id];\n    });\n  };\n\n  var origAddStream = window.RTCPeerConnection.prototype.addStream;\n\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    var _this12 = this;\n\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n    stream.getTracks().forEach(function (track) {\n      var alreadyExists = _this12.getSenders().find(function (s) {\n        return s.track === track;\n      });\n\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.', 'InvalidAccessError');\n      }\n    }); // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n\n    if (!this._reverseStreams[stream.id]) {\n      var newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n\n    origAddStream.apply(this, [stream]);\n  };\n\n  var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n    origRemoveStream.apply(this, [this._streams[stream.id] || stream]);\n    delete this._reverseStreams[this._streams[stream.id] ? this._streams[stream.id].id : stream.id];\n    delete this._streams[stream.id];\n  };\n\n  window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n    var _this13 = this;\n\n    if (this.signalingState === 'closed') {\n      throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n    }\n\n    var streams = [].slice.call(arguments, 1);\n\n    if (streams.length !== 1 || !streams[0].getTracks().find(function (t) {\n      return t === track;\n    })) {\n      // this is not fully correct but all we can manage without\n      // [[associated MediaStreams]] internal slot.\n      throw new DOMException('The adapter.js addTrack polyfill only supports a single ' + ' stream which is associated with the specified track.', 'NotSupportedError');\n    }\n\n    var alreadyExists = this.getSenders().find(function (s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw new DOMException('Track already exists.', 'InvalidAccessError');\n    }\n\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n    var oldStream = this._streams[stream.id];\n\n    if (oldStream) {\n      // this is using odd Chrome behaviour, use with caution:\n      // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n      // Note: we rely on the high-level addTrack/dtmf shim to\n      // create the sender with a dtmf sender.\n      oldStream.addTrack(track); // Trigger ONN async.\n\n      Promise.resolve().then(function () {\n        _this13.dispatchEvent(new Event('negotiationneeded'));\n      });\n    } else {\n      var newStream = new window.MediaStream([track]);\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      this.addStream(newStream);\n    }\n\n    return this.getSenders().find(function (s) {\n      return s.track === track;\n    });\n  }; // replace the internal stream id with the external one and\n  // vice versa.\n\n\n  function replaceInternalStreamId(pc, description) {\n    var sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n      var externalStream = pc._reverseStreams[internalId];\n      var internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'), externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp: sdp\n    });\n  }\n\n  function replaceExternalStreamId(pc, description) {\n    var sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n      var externalStream = pc._reverseStreams[internalId];\n      var internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'), internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp: sdp\n    });\n  }\n\n  ['createOffer', 'createAnswer'].forEach(function (method) {\n    var nativeMethod = window.RTCPeerConnection.prototype[method];\n\n    var methodObj = _defineProperty({}, method, function () {\n      var _this14 = this;\n\n      var args = arguments;\n      var isLegacyCall = arguments.length && typeof arguments[0] === 'function';\n\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [function (description) {\n          var desc = replaceInternalStreamId(_this14, description);\n          args[0].apply(null, [desc]);\n        }, function (err) {\n          if (args[1]) {\n            args[1].apply(null, err);\n          }\n        }, arguments[2]]);\n      }\n\n      return nativeMethod.apply(this, arguments).then(function (description) {\n        return replaceInternalStreamId(_this14, description);\n      });\n    });\n\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n  var origSetLocalDescription = window.RTCPeerConnection.prototype.setLocalDescription;\n\n  window.RTCPeerConnection.prototype.setLocalDescription = function setLocalDescription() {\n    if (!arguments.length || !arguments[0].type) {\n      return origSetLocalDescription.apply(this, arguments);\n    }\n\n    arguments[0] = replaceExternalStreamId(this, arguments[0]);\n    return origSetLocalDescription.apply(this, arguments);\n  }; // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n\n  var origLocalDescription = Object.getOwnPropertyDescriptor(window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype, 'localDescription', {\n    get: function () {\n      var description = origLocalDescription.get.apply(this);\n\n      if (description.type === '') {\n        return description;\n      }\n\n      return replaceInternalStreamId(this, description);\n    }\n  });\n\n  window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n    var _this15 = this;\n\n    if (this.signalingState === 'closed') {\n      throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n    } // We can not yet check for sender instanceof RTCRtpSender\n    // since we shim RTPSender. So we check if sender._pc is set.\n\n\n    if (!sender._pc) {\n      throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' + 'does not implement interface RTCRtpSender.', 'TypeError');\n    }\n\n    var isLocal = sender._pc === this;\n\n    if (!isLocal) {\n      throw new DOMException('Sender was not created by this connection.', 'InvalidAccessError');\n    } // Search for the native stream the senders track belongs to.\n\n\n    this._streams = this._streams || {};\n    var stream;\n    Object.keys(this._streams).forEach(function (streamid) {\n      var hasTrack = _this15._streams[streamid].getTracks().find(function (track) {\n        return sender.track === track;\n      });\n\n      if (hasTrack) {\n        stream = _this15._streams[streamid];\n      }\n    });\n\n    if (stream) {\n      if (stream.getTracks().length === 1) {\n        // if this is the last track of the stream, remove the stream. This\n        // takes care of any shimmed _senders.\n        this.removeStream(this._reverseStreams[stream.id]);\n      } else {\n        // relying on the same odd chrome behaviour as above.\n        stream.removeTrack(sender.track);\n      }\n\n      this.dispatchEvent(new Event('negotiationneeded'));\n    }\n  };\n}\n\nfunction shimPeerConnection(window) {\n  var browserDetails = utils.detectBrowser(window);\n\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n\n  if (!window.RTCPeerConnection) {\n    return;\n  } // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n\n\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n\n      var methodObj = _defineProperty({}, method, function () {\n        arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n        return nativeMethod.apply(this, arguments);\n      });\n\n      window.RTCPeerConnection.prototype[method] = methodObj[method];\n    });\n  } // support for addIceCandidate(null or undefined)\n\n\n  var nativeAddIceCandidate = window.RTCPeerConnection.prototype.addIceCandidate;\n\n  window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\n    if (!arguments[0]) {\n      if (arguments[1]) {\n        arguments[1].apply(null);\n      }\n\n      return Promise.resolve();\n    } // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n    // in older versions. Native support planned for Chrome M77.\n\n\n    if (browserDetails.version < 78 && arguments[0] && arguments[0].candidate === '') {\n      return Promise.resolve();\n    }\n\n    return nativeAddIceCandidate.apply(this, arguments);\n  };\n}\n\nfunction fixNegotiationNeeded(window) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', function (e) {\n    var pc = e.target;\n\n    if (pc.signalingState !== 'stable') {\n      return;\n    }\n\n    return e;\n  });\n}\n},{\"../utils.js\":\"iSxC\",\"./getusermedia\":\"s6SN\",\"./getdisplaymedia\":\"VHa8\"}],\"NZ1C\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.filterIceServers = filterIceServers;\n\nvar utils = _interopRequireWildcard(require(\"../utils\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function (server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n\n      if (server.url && !server.urls) {\n        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n      }\n\n      var isString = typeof urls === 'string';\n\n      if (isString) {\n        urls = [urls];\n      }\n\n      urls = urls.filter(function (url) {\n        // filter STUN unconditionally.\n        if (url.indexOf('stun:') === 0) {\n          return false;\n        }\n\n        var validTurn = url.startsWith('turn') && !url.startsWith('turn:[') && url.includes('transport=udp');\n\n        if (validTurn && !hasTurn) {\n          hasTurn = true;\n          return true;\n        }\n\n        return validTurn && !hasTurn;\n      });\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n},{\"../utils\":\"iSxC\"}],\"YHvh\":[function(require,module,exports) {\n/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(parts) {\n      return parts.attribute === 'cname';\n    });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(function(line) {\n      var parts = line.substr(17).split(' ');\n      return parts.map(function(part) {\n        return parseInt(part, 10);\n      });\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(obj) {\n      return obj.attribute === 'cname';\n    })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(msidParts) {\n      return msidParts.attribute === 'msid';\n    });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  var mline = SDPUtils.parseMLine(mediaSection);\n  var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  var maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substr(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize: maxMessageSize\n    };\n  }\n  var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    var parts = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:')[0]\n      .substr(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize: maxMessageSize\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  var output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n'\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n    transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n    transceiver.dtlsTransport.getLocalParameters(),\n    type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n\n},{}],\"NJ2u\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps); // Map ICE parameters (ufrag, pwd) to SDP.\n\n  sdp += SDPUtils.writeIceParameters(transceiver.iceGatherer.getLocalParameters()); // Map DTLS parameters to SDP.\n\n  sdp += SDPUtils.writeDtlsParameters(transceiver.dtlsTransport.getLocalParameters(), type === 'offer' ? 'actpass' : dtlsRole || 'active');\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId || transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId; // spec.\n\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' + trackId + '\\r\\n';\n    sdp += 'a=' + msid; // for Chrome. Legacy should no longer be required.\n\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc + ' ' + msid; // RTX\n\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc + ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' + transceiver.sendEncodingParameters[0].ssrc + ' ' + transceiver.sendEncodingParameters[0].rtx.ssrc + '\\r\\n';\n    }\n  } // FIXME: this should be written by writeRtpDescription.\n\n\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc + ' cname:' + SDPUtils.localCName + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc + ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n\n  return sdp;\n} // Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\n\n\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function (server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n\n      var isString = typeof urls === 'string';\n\n      if (isString) {\n        urls = [urls];\n      }\n\n      urls = urls.filter(function (url) {\n        var validTurn = url.indexOf('turn:') === 0 && url.indexOf('transport=udp') !== -1 && url.indexOf('turn:[') === -1 && !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 && url.indexOf('?transport=udp') === -1;\n      });\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n} // Determines the intersection of local and remote capabilities.\n\n\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function (pt, codecs) {\n    pt = parseInt(pt, 10);\n\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt || codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function (lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec && lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function (lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() && lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' && lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec, localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n\n        rCodec.numChannels = Math.min(lCodec.numChannels, rCodec.numChannels); // push rCodec so we reply with offerer payload type\n\n        commonCapabilities.codecs.push(rCodec); // determine common feedback mechanisms\n\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function (fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type && lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n\n          return false;\n        }); // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n\n        break;\n      }\n    }\n  });\n  localCapabilities.headerExtensions.forEach(function (lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length; i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  }); // FIXME: fecMechanisms\n\n  return commonCapabilities;\n} // is action=setLocalDescription with type allowed in signalingState\n\n\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all field are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates().find(function (remoteCandidate) {\n    return candidate.foundation === remoteCandidate.foundation && candidate.ip === remoteCandidate.ip && candidate.port === remoteCandidate.port && candidate.priority === remoteCandidate.priority && candidate.protocol === remoteCandidate.protocol && candidate.type === remoteCandidate.type;\n  });\n\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n\n  return !alreadyAdded;\n}\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name; // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function (window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack', {\n      track: track\n    }));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack', {\n      track: track\n    }));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {\n      receiver: receiver\n    };\n    trackEvent.streams = streams;\n    window.setTimeout(function () {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function (config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n\n    ['addEventListener', 'removeEventListener', 'dispatchEvent'].forEach(function (method) {\n      pc[method] = _eventTarget[method].bind(_eventTarget);\n    });\n    this.canTrickleIceCandidates = null;\n    this.needNegotiation = false;\n    this.localStreams = [];\n    this.remoteStreams = [];\n    this._localDescription = null;\n    this._remoteDescription = null;\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n    config = JSON.parse(JSON.stringify(config || {}));\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw makeError('NotSupportedError', 'rtcpMuxPolicy \\'negotiate\\' is not supported');\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n    this._iceGatherers = [];\n\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config; // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n\n    this.transceivers = [];\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function () {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function () {\n      return this._remoteDescription;\n    }\n  }); // set up event handlers on prototype\n\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function (name, event) {\n    if (this._isClosed) {\n      return;\n    }\n\n    this.dispatchEvent(event);\n\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function () {\n    var event = new Event('icegatheringstatechange');\n\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function () {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function () {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function () {\n    return this.remoteStreams;\n  }; // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n\n\n  RTCPeerConnection.prototype._createTransceiver = function (kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function (track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError', 'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function (s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track && this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track, transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function (stream) {\n    var pc = this;\n\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function (track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function (track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function (event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function (track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function (sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError', 'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' + 'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function (t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError', 'Sender was not created by this connection.');\n    }\n\n    var stream = transceiver.stream;\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null; // remove the stream from the set of local streams\n\n    var localStreams = this.transceivers.map(function (t) {\n      return t.stream;\n    });\n\n    if (localStreams.indexOf(stream) === -1 && this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function (stream) {\n    var pc = this;\n    stream.getTracks().forEach(function (track) {\n      var sender = pc.getSenders().find(function (s) {\n        return s.track === track;\n      });\n\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function () {\n    return this.transceivers.filter(function (transceiver) {\n      return !!transceiver.rtpSender;\n    }).map(function (transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function () {\n    return this.transceivers.filter(function (transceiver) {\n      return !!transceiver.rtpReceiver;\n    }).map(function (transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n  RTCPeerConnection.prototype._createIceGatherer = function (sdpMLineIndex, usingBundle) {\n    var pc = this;\n\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state', {\n      value: 'new',\n      writable: true\n    });\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n\n    this.transceivers[sdpMLineIndex].bufferCandidates = function (event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0; // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n\n      iceGatherer.state = end ? 'completed' : 'gathering';\n\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n\n    iceGatherer.addEventListener('localcandidate', this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  }; // start gathering from an RTCIceGatherer.\n\n\n  RTCPeerConnection.prototype._gather = function (mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n\n    var bufferedCandidateEvents = this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate', this.transceivers[sdpMLineIndex].bufferCandidates);\n\n    iceGatherer.onlocalcandidate = function (evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // dpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n\n      var event = new Event('icecandidate');\n      event.candidate = {\n        sdpMid: mid,\n        sdpMLineIndex: sdpMLineIndex\n      };\n      var cand = evt.candidate; // Edge emits an empty object for RTCIceCandidateComplete\n\n      var end = !cand || Object.keys(cand).length === 0;\n\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        } // RTCIceCandidate doesn't have a component, needs to be added\n\n\n        cand.component = 1; // also the usernameFragment. TODO: update SDP to take both variants.\n\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate, SDPUtils.parseCandidate(serializedCandidate));\n        event.candidate.candidate = serializedCandidate;\n\n        event.candidate.toJSON = function () {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      } // update local description.\n\n\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] += 'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] += 'a=end-of-candidates\\r\\n';\n      }\n\n      pc._localDescription.sdp = SDPUtils.getDescription(pc._localDescription.sdp) + sections.join('');\n      var complete = pc.transceivers.every(function (transceiver) {\n        return transceiver.iceGatherer && transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n\n        pc._emitGatheringStateChange();\n      } // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n\n\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n\n        pc.iceGatheringState = 'complete';\n\n        pc._emitGatheringStateChange();\n      }\n    }; // emit already gathered candidates.\n\n\n    window.setTimeout(function () {\n      bufferedCandidateEvents.forEach(function (e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  }; // Create ICE transport and DTLS transport.\n\n\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function () {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n\n    iceTransport.onicestatechange = function () {\n      pc._updateIceConnectionState();\n\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n\n    dtlsTransport.ondtlsstatechange = function () {\n      pc._updateConnectionState();\n    };\n\n    dtlsTransport.onerror = function () {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state', {\n        value: 'failed',\n        writable: true\n      });\n\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  }; // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n\n\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function (sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  }; // Start the RTP Sender and Receiver for a transceiver.\n\n\n  RTCPeerConnection.prototype._transceive = function (transceiver, send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities, transceiver.remoteCapabilities);\n\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n\n      transceiver.rtpSender.send(params);\n    }\n\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video' && transceiver.recvEncodingParameters && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function (p) {\n          delete p.rtx;\n        });\n      }\n\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function (description) {\n    var pc = this; // Note: pranswer is not supported.\n\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError', 'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription', description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError', 'Can not set local ' + description.type + ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function (mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n      pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart, 'a=ice-lite').length > 0;\n      sections.forEach(function (mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities; // treat bundle-only as not-rejected.\n\n        var rejected = SDPUtils.isRejected(mediaSection) && SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection, sessionpart);\n\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters, isIceLite ? 'controlling' : 'controlled');\n            }\n\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          } // Calculate intersection of capabilities.\n\n\n          var params = getCommonCapabilities(localCapabilities, remoteCapabilities); // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n\n          pc._transceive(transceiver, params.codecs.length > 0, false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function (description) {\n    var pc = this; // Note: pranswer is not supported.\n\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError', 'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription', description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError', 'Can not set remote ' + description.type + ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function (stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart, 'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart, 'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart, 'a=ice-options:')[0];\n\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ').indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function (mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection); // treat bundle-only as not-rejected.\n\n      var rejected = SDPUtils.isRejected(mediaSection) && SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier(); // Reject datachannels which are not implemented yet.\n\n      if (rejected || kind === 'application' && (protocol === 'DTLS/SCTP' || protocol === 'UDP/DTLS/SCTP')) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] && pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n      var track; // FIXME: ensure the mediaSection has rtcp-mux set.\n\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection, sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection, sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n\n      recvEncodingParameters = SDPUtils.parseRtpEncodingParameters(mediaSection);\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n      var isComplete = SDPUtils.matchPrefix(mediaSection, 'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:').map(function (cand) {\n        return SDPUtils.parseCandidate(cand);\n      }).filter(function (cand) {\n        return cand.component === 1;\n      }); // Check if we can use BUNDLE and dispose transports.\n\n      if ((description.type === 'offer' || description.type === 'answer') && !rejected && usingBundle && sdpMLineIndex > 0 && pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n\n        pc.transceivers[sdpMLineIndex].iceGatherer = pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport = pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport = pc.transceivers[0].dtlsTransport;\n\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(pc.transceivers[0].dtlsTransport);\n        }\n\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(pc.transceivers[0].dtlsTransport);\n        }\n      }\n\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] || pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex, usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function (candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind); // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(function (codec) {\n            return codec.name !== 'rtx';\n          });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }]; // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n\n        var isNewTrack = false;\n\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver || new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track; // FIXME: does not work with Plan B.\n\n            if (remoteMsid && remoteMsid.stream === '-') {// no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function () {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n\n              Object.defineProperty(track, 'id', {\n                get: function () {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n\n              stream = streams.default;\n            }\n\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function (s) {\n            var nativeTrack = s.getTracks().find(function (t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters; // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n\n        pc._transceive(pc.transceivers[sdpMLineIndex], false, isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters = recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities = remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) && (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function (candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters, 'controlling');\n          }\n\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        } // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n\n\n        var commonCapabilities = getCommonCapabilities(transceiver.localCapabilities, transceiver.remoteCapabilities);\n        var hasRtx = commonCapabilities.codecs.filter(function (c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver, direction === 'sendrecv' || direction === 'recvonly', direction === 'sendrecv' || direction === 'sendonly'); // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n\n\n        if (rtpReceiver && (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    Object.keys(streams).forEach(function (sid) {\n      var stream = streams[sid];\n\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function () {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function (item) {\n          var track = item[0];\n          var receiver = item[1];\n\n          if (stream.id !== item[2].id) {\n            return;\n          }\n\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function (item) {\n      if (item[2]) {\n        return;\n      }\n\n      fireAddTrack(pc, item[0], item[1], []);\n    }); // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n\n    window.setTimeout(function () {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n\n      pc.transceivers.forEach(function (transceiver) {\n        if (transceiver.iceTransport && transceiver.iceTransport.state === 'new' && transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' + 'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function () {\n    this.transceivers.forEach(function (transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    }); // FIXME: clean up tracks, local streams, remote streams, etc\n\n    this._isClosed = true;\n\n    this._updateSignalingState('closed');\n  }; // Update the signaling state.\n\n\n  RTCPeerConnection.prototype._updateSignalingState = function (newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n\n    this._dispatchEvent('signalingstatechange', event);\n  }; // Determine whether to fire the negotiationneeded event.\n\n\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function () {\n    var pc = this;\n\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n\n    this.needNegotiation = true;\n    window.setTimeout(function () {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  }; // Update the ice connection state.\n\n\n  RTCPeerConnection.prototype._updateIceConnectionState = function () {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function (transceiver) {\n      if (transceiver.iceTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n      }\n    });\n    newState = 'new';\n\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  }; // Update the connection state.\n\n\n  RTCPeerConnection.prototype._updateConnectionState = function () {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function (transceiver) {\n      if (transceiver.iceTransport && transceiver.dtlsTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      }\n    }); // ICETransport.completed and connected are the same for this purpose.\n\n    states.connected += states.completed;\n    newState = 'new';\n\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function () {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError', 'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function (t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function (t) {\n      return t.kind === 'video';\n    }).length; // Determine number of audio and video tracks we need to send/recv.\n\n    var offerOptions = arguments[0];\n\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError('Legacy mandatory/optional constraints not supported.');\n      }\n\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function (transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    }); // Create M-lines for recvonly streams.\n\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n\n        numAudioTracks--;\n      }\n\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId, pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex, pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind); // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(function (codec) {\n          return codec.name !== 'rtx';\n        });\n      }\n\n      localCapabilities.codecs.forEach(function (codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' && codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        } // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n\n\n        if (transceiver.remoteCapabilities && transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function (remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() && codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function (hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities && transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function (rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      }); // generate an ssrc now, to be used later in rtpSender.send\n\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' && !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    }); // always offer BUNDLE and dispose on return if not supported.\n\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function (t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n\n    sdp += 'a=ice-options:trickle\\r\\n';\n    pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities, 'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' && (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function (cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function () {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError', 'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' || pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError', 'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId, pc._sdpSessionVersion++);\n\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function (t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n\n    sdp += 'a=ice-options:trickle\\r\\n';\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') {\n            // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol + ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' + 'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' + 'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' + 'a=inactive\\r\\n' + 'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      } // FIXME: look at direction.\n\n\n      if (transceiver.stream) {\n        var localTrack;\n\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' && !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      } // Calculate intersection of capabilities.\n\n\n      var commonCapabilities = getCommonCapabilities(transceiver.localCapabilities, transceiver.remoteCapabilities);\n      var hasRtx = commonCapabilities.codecs.filter(function (c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities, 'answer', transceiver.stream, pc._dtlsRole);\n\n      if (transceiver.rtcpParameters && transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function (candidate) {\n    var pc = this;\n    var sections;\n\n    if (candidate && !(candidate.sdpMLineIndex !== undefined || candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    } // TODO: needs to go into ops queue.\n\n\n    return new Promise(function (resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError', 'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp = SDPUtils.getDescription(pc._remoteDescription.sdp) + sections.join('');\n\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n\n        var transceiver = pc.transceivers[sdpMLineIndex];\n\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n\n          var cand = Object.keys(candidate.candidate).length > 0 ? SDPUtils.parseCandidate(candidate.candidate) : {}; // Ignore Chrome's invalid candidates since Edge does not like them.\n\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          } // Ignore RTCP candidates, we assume RTCP-MUX.\n\n\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          } // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n\n\n          if (sdpMLineIndex === 0 || sdpMLineIndex > 0 && transceiver.iceTransport !== pc.transceivers[0].iceTransport) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError', 'Can not add ICE candidate'));\n            }\n          } // update the remoteDescription.\n\n\n          var candidateString = candidate.candidate.trim();\n\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' + (cand.type ? candidateString : 'end-of-candidates') + '\\r\\n';\n          pc._remoteDescription.sdp = SDPUtils.getDescription(pc._remoteDescription.sdp) + sections.join('');\n        } else {\n          return reject(makeError('OperationError', 'Can not add ICE candidate'));\n        }\n      }\n\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function (selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function (transceiver) {\n        if (transceiver.rtpSender && transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function (transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport', 'dtlsTransport'].forEach(function (method) {\n        if (transceiver[method]) {\n          promises.push(transceiver[method].getStats());\n        }\n      });\n    });\n    return Promise.all(promises).then(function (allStats) {\n      var results = new Map();\n      allStats.forEach(function (stats) {\n        stats.forEach(function (stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  }; // fix low-level stat names and return Map instead of object.\n\n\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer', 'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function (ortcObjectName) {\n    var obj = window[ortcObjectName];\n\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n\n      obj.prototype.getStats = function () {\n        return nativeGetstats.apply(this).then(function (nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function (id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  }); // legacy callback shims. Should be moved to adapter.js some days.\n\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function (method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n\n    RTCPeerConnection.prototype[method] = function () {\n      var args = arguments;\n\n      if (typeof args[0] === 'function' || typeof args[1] === 'function') {\n        // legacy\n        return nativeMethod.apply(this, [arguments[2]]).then(function (description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function (error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function (method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n\n    RTCPeerConnection.prototype[method] = function () {\n      var args = arguments;\n\n      if (typeof args[1] === 'function' || typeof args[2] === 'function') {\n        // legacy\n        return nativeMethod.apply(this, arguments).then(function () {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function (error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n\n      return nativeMethod.apply(this, arguments);\n    };\n  }); // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n\n  ['getStats'].forEach(function (method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n\n    RTCPeerConnection.prototype[method] = function () {\n      var args = arguments;\n\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments).then(function () {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n  return RTCPeerConnection;\n};\n},{\"sdp\":\"YHvh\"}],\"YdKx\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetUserMedia = shimGetUserMedia;\n\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n\n  var shimError_ = function (e) {\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString: function () {\n        return this.name;\n      }\n    };\n  }; // getUserMedia error shim.\n\n\n  var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n\n  navigator.mediaDevices.getUserMedia = function (c) {\n    return origGetUserMedia(c).catch(function (e) {\n      return Promise.reject(shimError_(e));\n    });\n  };\n}\n},{}],\"P3bV\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = shimGetDisplayMedia;\n\nfunction shimGetDisplayMedia(window) {\n  if (!('getDisplayMedia' in window.navigator)) {\n    return;\n  }\n\n  if (!window.navigator.mediaDevices) {\n    return;\n  }\n\n  if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n\n  window.navigator.mediaDevices.getDisplayMedia = window.navigator.getDisplayMedia.bind(window.navigator);\n}\n},{}],\"XRic\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimPeerConnection = shimPeerConnection;\nexports.shimReplaceTrack = shimReplaceTrack;\nObject.defineProperty(exports, \"shimGetUserMedia\", {\n  enumerable: true,\n  get: function () {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\nObject.defineProperty(exports, \"shimGetDisplayMedia\", {\n  enumerable: true,\n  get: function () {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\n\nvar utils = _interopRequireWildcard(require(\"../utils\"));\n\nvar _filtericeservers = require(\"./filtericeservers\");\n\nvar _rtcpeerconnectionShim = _interopRequireDefault(require(\"rtcpeerconnection-shim\"));\n\nvar _getusermedia = require(\"./getusermedia\");\n\nvar _getdisplaymedia = require(\"./getdisplaymedia\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction shimPeerConnection(window) {\n  var browserDetails = utils.detectBrowser(window);\n\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function RTCIceCandidate(args) {\n        return args;\n      };\n    }\n\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function RTCSessionDescription(args) {\n        return args;\n      };\n    } // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n\n\n    if (browserDetails.version < 15025) {\n      var origMSTEnabled = Object.getOwnPropertyDescriptor(window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set: function (value) {\n          origMSTEnabled.set.call(this, value);\n          var ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  } // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n\n\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get: function () {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n\n        return this._dtmf;\n      }\n    });\n  } // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n\n\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n\n  var RTCPeerConnectionShim = (0, _rtcpeerconnectionShim.default)(window, browserDetails.version);\n\n  window.RTCPeerConnection = function RTCPeerConnection(config) {\n    if (config && config.iceServers) {\n      config.iceServers = (0, _filtericeservers.filterIceServers)(config.iceServers, browserDetails.version);\n      utils.log('ICE servers after filtering:', config.iceServers);\n    }\n\n    return new RTCPeerConnectionShim(config);\n  };\n\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\n\nfunction shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender && !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack = window.RTCRtpSender.prototype.setTrack;\n  }\n}\n},{\"../utils\":\"iSxC\",\"./filtericeservers\":\"NZ1C\",\"rtcpeerconnection-shim\":\"NJ2u\",\"./getusermedia\":\"YdKx\",\"./getdisplaymedia\":\"P3bV\"}],\"GzSv\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetUserMedia = shimGetUserMedia;\n\nvar utils = _interopRequireWildcard(require(\"../utils\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function (obj) { return typeof obj; }; } else { _typeof = function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction shimGetUserMedia(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n  var MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function (constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia', 'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 && 'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    var remap = function (obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n\n    navigator.mediaDevices.getUserMedia = function (c) {\n      if (_typeof(c) === 'object' && _typeof(c.audio) === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n\n      MediaStreamTrack.prototype.getSettings = function () {\n        var obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n\n      MediaStreamTrack.prototype.applyConstraints = function (c) {\n        if (this.kind === 'audio' && _typeof(c) === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n},{\"../utils\":\"iSxC\"}],\"UuGU\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = shimGetDisplayMedia;\n\nfunction shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n\n  if (!window.navigator.mediaDevices) {\n    return;\n  }\n\n  window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n    if (!(constraints && constraints.video)) {\n      var err = new DOMException('getDisplayMedia without video ' + 'constraints is undefined');\n      err.name = 'NotFoundError'; // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n\n      err.code = 8;\n      return Promise.reject(err);\n    }\n\n    if (constraints.video === true) {\n      constraints.video = {\n        mediaSource: preferredMediaSource\n      };\n    } else {\n      constraints.video.mediaSource = preferredMediaSource;\n    }\n\n    return window.navigator.mediaDevices.getUserMedia(constraints);\n  };\n}\n},{}],\"Fzdr\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimOnTrack = shimOnTrack;\nexports.shimPeerConnection = shimPeerConnection;\nexports.shimSenderGetStats = shimSenderGetStats;\nexports.shimReceiverGetStats = shimReceiverGetStats;\nexports.shimRemoveStream = shimRemoveStream;\nexports.shimRTCDataChannel = shimRTCDataChannel;\nexports.shimAddTransceiver = shimAddTransceiver;\nexports.shimCreateOffer = shimCreateOffer;\nexports.shimCreateAnswer = shimCreateAnswer;\nObject.defineProperty(exports, \"shimGetUserMedia\", {\n  enumerable: true,\n  get: function () {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\nObject.defineProperty(exports, \"shimGetDisplayMedia\", {\n  enumerable: true,\n  get: function () {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\n\nvar utils = _interopRequireWildcard(require(\"../utils\"));\n\nvar _getusermedia = require(\"./getusermedia\");\n\nvar _getdisplaymedia = require(\"./getdisplaymedia\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function (obj) { return typeof obj; }; } else { _typeof = function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction shimOnTrack(window) {\n  if (_typeof(window) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get: function () {\n        return {\n          receiver: this.receiver\n        };\n      }\n    });\n  }\n}\n\nfunction shimPeerConnection(window) {\n  var browserDetails = utils.detectBrowser(window);\n\n  if (_typeof(window) !== 'object' || !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n\n      var methodObj = _defineProperty({}, method, function () {\n        arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n        return nativeMethod.apply(this, arguments);\n      });\n\n      window.RTCPeerConnection.prototype[method] = methodObj[method];\n    });\n  } // support for addIceCandidate(null or undefined)\n  // as well as ignoring {sdpMid, candidate: \"\"}\n\n\n  if (browserDetails.version < 68) {\n    var nativeAddIceCandidate = window.RTCPeerConnection.prototype.addIceCandidate;\n\n    window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n\n        return Promise.resolve();\n      } // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n\n\n      if (arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n\n  var modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n  var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    var [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null]).then(function (stats) {\n      if (browserDetails.version < 53 && !onSucc) {\n        // Shim only promise getStats with spec-hyphens in type names\n        // Leave callback version alone; misc old uses of forEach before Map\n        try {\n          stats.forEach(function (stat) {\n            stat.type = modernStatsTypes[stat.type] || stat.type;\n          });\n        } catch (e) {\n          if (e.name !== 'TypeError') {\n            throw e;\n          } // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n\n\n          stats.forEach(function (stat, i) {\n            stats.set(i, Object.assign({}, stat, {\n              type: modernStatsTypes[stat.type] || stat.type\n            }));\n          });\n        }\n      }\n\n      return stats;\n    }).then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderGetStats(window) {\n  if (!(_typeof(window) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n    return;\n  }\n\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n\n  var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      var _this = this;\n\n      var senders = origGetSenders.apply(this, []);\n      senders.forEach(function (sender) {\n        return sender._pc = _this;\n      });\n      return senders;\n    };\n  }\n\n  var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      var sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) : Promise.resolve(new Map());\n  };\n}\n\nfunction shimReceiverGetStats(window) {\n  if (!(_typeof(window) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n    return;\n  }\n\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n\n  var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      var _this2 = this;\n\n      var receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(function (receiver) {\n        return receiver._pc = _this2;\n      });\n      return receivers;\n    };\n  }\n\n  utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nfunction shimRemoveStream(window) {\n  if (!window.RTCPeerConnection || 'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    var _this3 = this;\n\n    utils.deprecated('removeStream', 'removeTrack');\n    this.getSenders().forEach(function (sender) {\n      if (sender.track && stream.getTracks().includes(sender.track)) {\n        _this3.removeTrack(sender);\n      }\n    });\n  };\n}\n\nfunction shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nfunction shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(_typeof(window) === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n\n  var origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver = function addTransceiver() {\n      this.setParametersPromises = [];\n      var initParameters = arguments[1];\n      var shouldPerformCheck = initParameters && 'sendEncodings' in initParameters;\n\n      if (shouldPerformCheck) {\n        // If sendEncodings params are provided, validate grammar\n        initParameters.sendEncodings.forEach(function (encodingParam) {\n          if ('rid' in encodingParam) {\n            var ridRegex = /^[a-z0-9]{0,16}$/i;\n\n            if (!ridRegex.test(encodingParam.rid)) {\n              throw new TypeError('Invalid RID value provided.');\n            }\n          }\n\n          if ('scaleResolutionDownBy' in encodingParam) {\n            if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n              throw new RangeError('scale_resolution_down_by must be >= 1.0');\n            }\n          }\n\n          if ('maxFramerate' in encodingParam) {\n            if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n              throw new RangeError('max_framerate must be >= 0.0');\n            }\n          }\n        });\n      }\n\n      var transceiver = origAddTransceiver.apply(this, arguments);\n\n      if (shouldPerformCheck) {\n        // Check if the init options were applied. If not we do this in an\n        // asynchronous way and save the promise reference in a global object.\n        // This is an ugly hack, but at the same time is way more robust than\n        // checking the sender parameters before and after the createOffer\n        // Also note that after the createoffer we are not 100% sure that\n        // the params were asynchronously applied so we might miss the\n        // opportunity to recreate offer.\n        var {\n          sender: sender\n        } = transceiver;\n        var params = sender.getParameters();\n\n        if (!('encodings' in params)) {\n          params.encodings = initParameters.sendEncodings;\n          this.setParametersPromises.push(sender.setParameters(params).catch(function () {}));\n        }\n      }\n\n      return transceiver;\n    };\n  }\n}\n\nfunction shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(_typeof(window) === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n\n  var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    var _arguments = arguments,\n        _this4 = this;\n\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises).then(function () {\n        return origCreateOffer.apply(_this4, _arguments);\n      }).finally(function () {\n        _this4.setParametersPromises = [];\n      });\n    }\n\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nfunction shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(_typeof(window) === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n\n  var origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    var _arguments2 = arguments,\n        _this5 = this;\n\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises).then(function () {\n        return origCreateAnswer.apply(_this5, _arguments2);\n      }).finally(function () {\n        _this5.setParametersPromises = [];\n      });\n    }\n\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n},{\"../utils\":\"iSxC\",\"./getusermedia\":\"GzSv\",\"./getdisplaymedia\":\"UuGU\"}],\"t1lL\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimLocalStreamsAPI = shimLocalStreamsAPI;\nexports.shimRemoteStreamsAPI = shimRemoteStreamsAPI;\nexports.shimCallbacksAPI = shimCallbacksAPI;\nexports.shimGetUserMedia = shimGetUserMedia;\nexports.shimConstraints = shimConstraints;\nexports.shimRTCIceServerUrls = shimRTCIceServerUrls;\nexports.shimTrackEventTransceiver = shimTrackEventTransceiver;\nexports.shimCreateOfferLegacy = shimCreateOfferLegacy;\n\nvar utils = _interopRequireWildcard(require(\"../utils\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function (obj) { return typeof obj; }; } else { _typeof = function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction shimLocalStreamsAPI(window) {\n  if (_typeof(window) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n\n      return this._localStreams;\n    };\n  }\n\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this = this;\n\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      } // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n\n\n      stream.getAudioTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n      stream.getVideoTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track) {\n      var stream = arguments[1];\n\n      if (stream) {\n        if (!this._localStreams) {\n          this._localStreams = [stream];\n        } else if (!this._localStreams.includes(stream)) {\n          this._localStreams.push(stream);\n        }\n      }\n\n      return _addTrack.apply(this, arguments);\n    };\n  }\n\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this2 = this;\n\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n\n      var index = this._localStreams.indexOf(stream);\n\n      if (index === -1) {\n        return;\n      }\n\n      this._localStreams.splice(index, 1);\n\n      var tracks = stream.getTracks();\n      this.getSenders().forEach(function (sender) {\n        if (tracks.includes(sender.track)) {\n          _this2.removeTrack(sender);\n        }\n      });\n    };\n  }\n}\n\nfunction shimRemoteStreamsAPI(window) {\n  if (_typeof(window) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams = function getRemoteStreams() {\n      return this._remoteStreams ? this._remoteStreams : [];\n    };\n  }\n\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get: function () {\n        return this._onaddstream;\n      },\n      set: function (f) {\n        var _this3 = this;\n\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!_this3._remoteStreams) {\n              _this3._remoteStreams = [];\n            }\n\n            if (_this3._remoteStreams.includes(stream)) {\n              return;\n            }\n\n            _this3._remoteStreams.push(stream);\n\n            var event = new Event('addstream');\n            event.stream = stream;\n\n            _this3.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      var pc = this;\n\n      if (!this._onaddstreampoly) {\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!pc._remoteStreams) {\n              pc._remoteStreams = [];\n            }\n\n            if (pc._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n\n            pc._remoteStreams.push(stream);\n\n            var event = new Event('addstream');\n            event.stream = stream;\n            pc.dispatchEvent(event);\n          });\n        });\n      }\n\n      return origSetRemoteDescription.apply(pc, arguments);\n    };\n  }\n}\n\nfunction shimCallbacksAPI(window) {\n  if (_typeof(window) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n\n  var prototype = window.RTCPeerConnection.prototype;\n  var origCreateOffer = prototype.createOffer;\n  var origCreateAnswer = prototype.createAnswer;\n  var setLocalDescription = prototype.setLocalDescription;\n  var setRemoteDescription = prototype.setRemoteDescription;\n  var addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer = function createOffer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateOffer.apply(this, [options]);\n\n    if (!failureCallback) {\n      return promise;\n    }\n\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.createAnswer = function createAnswer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateAnswer.apply(this, [options]);\n\n    if (!failureCallback) {\n      return promise;\n    }\n\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  var withCallback = function (description, successCallback, failureCallback) {\n    var promise = setLocalDescription.apply(this, [description]);\n\n    if (!failureCallback) {\n      return promise;\n    }\n\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function (description, successCallback, failureCallback) {\n    var promise = setRemoteDescription.apply(this, [description]);\n\n    if (!failureCallback) {\n      return promise;\n    }\n\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function (candidate, successCallback, failureCallback) {\n    var promise = addIceCandidate.apply(this, [candidate]);\n\n    if (!failureCallback) {\n      return promise;\n    }\n\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.addIceCandidate = withCallback;\n}\n\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    var mediaDevices = navigator.mediaDevices;\n\n    var _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n\n    navigator.mediaDevices.getUserMedia = function (constraints) {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints).then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nfunction shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({}, constraints, {\n      video: utils.compactObject(constraints.video)\n    });\n  }\n\n  return constraints;\n}\n\nfunction shimRTCIceServerUrls(window) {\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  var OrigPeerConnection = window.RTCPeerConnection;\n\n  window.RTCPeerConnection = function RTCPeerConnection(pcConfig, pcConstraints) {\n    if (pcConfig && pcConfig.iceServers) {\n      var newIceServers = [];\n\n      for (var i = 0; i < pcConfig.iceServers.length; i++) {\n        var server = pcConfig.iceServers[i];\n\n        if (!server.hasOwnProperty('urls') && server.hasOwnProperty('url')) {\n          utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n          server = JSON.parse(JSON.stringify(server));\n          server.urls = server.url;\n          delete server.url;\n          newIceServers.push(server);\n        } else {\n          newIceServers.push(pcConfig.iceServers[i]);\n        }\n      }\n\n      pcConfig.iceServers = newIceServers;\n    }\n\n    return new OrigPeerConnection(pcConfig, pcConstraints);\n  };\n\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype; // wrap static methods. Currently just generateCertificate.\n\n  if ('generateCertificate' in window.RTCPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get: function () {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nfunction shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (_typeof(window) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get: function () {\n        return {\n          receiver: this.receiver\n        };\n      }\n    });\n  }\n}\n\nfunction shimCreateOfferLegacy(window) {\n  var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n\n  window.RTCPeerConnection.prototype.createOffer = function createOffer(offerOptions) {\n    if (offerOptions) {\n      if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n      }\n\n      var audioTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'audio';\n      });\n\n      if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n        if (audioTransceiver.direction === 'sendrecv') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('sendonly');\n          } else {\n            audioTransceiver.direction = 'sendonly';\n          }\n        } else if (audioTransceiver.direction === 'recvonly') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('inactive');\n          } else {\n            audioTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveAudio === true && !audioTransceiver) {\n        this.addTransceiver('audio');\n      }\n\n      if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n      }\n\n      var videoTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'video';\n      });\n\n      if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n        if (videoTransceiver.direction === 'sendrecv') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('sendonly');\n          } else {\n            videoTransceiver.direction = 'sendonly';\n          }\n        } else if (videoTransceiver.direction === 'recvonly') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('inactive');\n          } else {\n            videoTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveVideo === true && !videoTransceiver) {\n        this.addTransceiver('video');\n      }\n    }\n\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n},{\"../utils\":\"iSxC\"}],\"GOQK\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimRTCIceCandidate = shimRTCIceCandidate;\nexports.shimMaxMessageSize = shimMaxMessageSize;\nexports.shimSendThrowTypeError = shimSendThrowTypeError;\nexports.shimConnectionState = shimConnectionState;\nexports.removeAllowExtmapMixed = removeAllowExtmapMixed;\n\nvar _sdp = _interopRequireDefault(require(\"sdp\"));\n\nvar utils = _interopRequireWildcard(require(\"./utils\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function (obj) { return typeof obj; }; } else { _typeof = function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || window.RTCIceCandidate && 'foundation' in window.RTCIceCandidate.prototype) {\n    return;\n  }\n\n  var NativeRTCIceCandidate = window.RTCIceCandidate;\n\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (_typeof(args) === 'object' && args.candidate && args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      var nativeCandidate = new NativeRTCIceCandidate(args);\n\n      var parsedCandidate = _sdp.default.parseCandidate(args.candidate);\n\n      var augmentedCandidate = Object.assign(nativeCandidate, parsedCandidate); // Add a serializer that does not serialize the extra attributes.\n\n      augmentedCandidate.toJSON = function toJSON() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment\n        };\n      };\n\n      return augmentedCandidate;\n    }\n\n    return new NativeRTCIceCandidate(args);\n  };\n\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype; // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', function (e) {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n\n    return e;\n  });\n}\n\nfunction shimMaxMessageSize(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  var browserDetails = utils.detectBrowser(window);\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get: function () {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  var sctpInDescription = function (description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n\n    var sections = _sdp.default.splitSections(description.sdp);\n\n    sections.shift();\n    return sections.some(function (mediaSection) {\n      var mLine = _sdp.default.parseMLine(mediaSection);\n\n      return mLine && mLine.kind === 'application' && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  var getRemoteFirefoxVersion = function (description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n\n    var version = parseInt(match[1], 10); // Test for NaN (yes, this is ugly)\n\n    return version !== version ? -1 : version;\n  };\n\n  var getCanSendMaxMessageSize = function (remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    var canSendMaxMessageSize = 65536;\n\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize = browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n\n    return canSendMaxMessageSize;\n  };\n\n  var getMaxMessageSize = function (description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    var maxMessageSize = 65536; // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n\n    if (browserDetails.browser === 'firefox' && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    var match = _sdp.default.matchPrefix(description.sdp, 'a=max-message-size:');\n\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' && remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n\n    return maxMessageSize;\n  };\n\n  var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n\n  window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n    this._sctp = null; // Chrome decided to not expose .sctp in plan-b mode.\n    // As usual, adapter.js has to do an 'ugly worakaround'\n    // to cover up the mess.\n\n    if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n      var {\n        sdpSemantics: sdpSemantics\n      } = this.getConfiguration();\n\n      if (sdpSemantics === 'plan-b') {\n        Object.defineProperty(this, 'sctp', {\n          get: function () {\n            return typeof this._sctp === 'undefined' ? null : this._sctp;\n          },\n          enumerable: true,\n          configurable: true\n        });\n      }\n    }\n\n    if (sctpInDescription(arguments[0])) {\n      // Check if the remote is FF.\n      var isFirefox = getRemoteFirefoxVersion(arguments[0]); // Get the maximum message size the local peer is capable of sending\n\n      var canSendMMS = getCanSendMaxMessageSize(isFirefox); // Get the maximum message size of the remote peer.\n\n      var remoteMMS = getMaxMessageSize(arguments[0], isFirefox); // Determine final maximum message size\n\n      var maxMessageSize;\n\n      if (canSendMMS === 0 && remoteMMS === 0) {\n        maxMessageSize = Number.POSITIVE_INFINITY;\n      } else if (canSendMMS === 0 || remoteMMS === 0) {\n        maxMessageSize = Math.max(canSendMMS, remoteMMS);\n      } else {\n        maxMessageSize = Math.min(canSendMMS, remoteMMS);\n      } // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n      // attribute.\n\n\n      var sctp = {};\n      Object.defineProperty(sctp, 'maxMessageSize', {\n        get: function () {\n          return maxMessageSize;\n        }\n      });\n      this._sctp = sctp;\n    }\n\n    return origSetRemoteDescription.apply(this, arguments);\n  };\n}\n\nfunction shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection && 'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  } // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n\n  function wrapDcSend(dc, pc) {\n    var origDataChannelSend = dc.send;\n\n    dc.send = function send() {\n      var data = arguments[0];\n      var length = data.length || data.size || data.byteLength;\n\n      if (dc.readyState === 'open' && pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' + pc.sctp.maxMessageSize + ' bytes)');\n      }\n\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n\n  var origCreateDataChannel = window.RTCPeerConnection.prototype.createDataChannel;\n\n  window.RTCPeerConnection.prototype.createDataChannel = function createDataChannel() {\n    var dataChannel = origCreateDataChannel.apply(this, arguments);\n    wrapDcSend(dataChannel, this);\n    return dataChannel;\n  };\n\n  utils.wrapPeerConnectionEvent(window, 'datachannel', function (e) {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\n\n\nfunction shimConnectionState(window) {\n  if (!window.RTCPeerConnection || 'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n\n  var proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get: function () {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get: function () {\n      return this._onconnectionstatechange || null;\n    },\n    set: function (cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange', this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n\n      if (cb) {\n        this.addEventListener('connectionstatechange', this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ['setLocalDescription', 'setRemoteDescription'].forEach(function (method) {\n    var origMethod = proto[method];\n\n    proto[method] = function () {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = function (e) {\n          var pc = e.target;\n\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            var newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n\n          return e;\n        };\n\n        this.addEventListener('iceconnectionstatechange', this._connectionstatechangepoly);\n      }\n\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nfunction removeAllowExtmapMixed(window) {\n  /* remove a=extmap-allow-mixed for Chrome < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  var browserDetails = utils.detectBrowser(window);\n\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n\n  var nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n\n  window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      desc.sdp = desc.sdp.split('\\n').filter(function (line) {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n    }\n\n    return nativeSRD.apply(this, arguments);\n  };\n}\n},{\"sdp\":\"YHvh\",\"./utils\":\"iSxC\"}],\"KtlG\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.adapterFactory = adapterFactory;\n\nvar utils = _interopRequireWildcard(require(\"./utils\"));\n\nvar chromeShim = _interopRequireWildcard(require(\"./chrome/chrome_shim\"));\n\nvar edgeShim = _interopRequireWildcard(require(\"./edge/edge_shim\"));\n\nvar firefoxShim = _interopRequireWildcard(require(\"./firefox/firefox_shim\"));\n\nvar safariShim = _interopRequireWildcard(require(\"./safari/safari_shim\"));\n\nvar commonShim = _interopRequireWildcard(require(\"./common_shim\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n// Browser shims.\n// Shimming starts here.\nfunction adapterFactory() {\n  var {\n    window: window\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    shimChrome: true,\n    shimFirefox: true,\n    shimEdge: true,\n    shimSafari: true\n  };\n  // Utils.\n  var logging = utils.log;\n  var browserDetails = utils.detectBrowser(window);\n  var adapter = {\n    browserDetails: browserDetails,\n    commonShim: commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  }; // Shim browser if found.\n\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection || !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n\n      logging('adapter.js shimming chrome.'); // Export to the adapter global object visible in the browser.\n\n      adapter.browserShim = chromeShim;\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      chromeShim.shimGetStats(window);\n      chromeShim.shimSenderReceiverGetStats(window);\n      chromeShim.fixNegotiationNeeded(window);\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection || !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n\n      logging('adapter.js shimming firefox.'); // Export to the adapter global object visible in the browser.\n\n      adapter.browserShim = firefoxShim;\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      firefoxShim.shimRemoveStream(window);\n      firefoxShim.shimSenderGetStats(window);\n      firefoxShim.shimReceiverGetStats(window);\n      firefoxShim.shimRTCDataChannel(window);\n      firefoxShim.shimAddTransceiver(window);\n      firefoxShim.shimCreateOffer(window);\n      firefoxShim.shimCreateAnswer(window);\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n\n      logging('adapter.js shimming edge.'); // Export to the adapter global object visible in the browser.\n\n      adapter.browserShim = edgeShim;\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimGetDisplayMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window); // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n\n      logging('adapter.js shimming safari.'); // Export to the adapter global object visible in the browser.\n\n      adapter.browserShim = safariShim;\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCreateOfferLegacy(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n},{\"./utils\":\"iSxC\",\"./chrome/chrome_shim\":\"uI5X\",\"./edge/edge_shim\":\"XRic\",\"./firefox/firefox_shim\":\"Fzdr\",\"./safari/safari_shim\":\"t1lL\",\"./common_shim\":\"GOQK\"}],\"tI1X\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _adapter_factory = require(\"./adapter_factory.js\");\n\nvar adapter = (0, _adapter_factory.adapterFactory)({\n  window: window\n});\nvar _default = adapter;\nexports.default = _default;\n},{\"./adapter_factory.js\":\"KtlG\"}],\"sXtV\":[function(require,module,exports) {\n\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar webrtc_adapter_1 = __importDefault(require(\"webrtc-adapter\"));\n\nexports.webRTCAdapter = webrtc_adapter_1.default;\n},{\"webrtc-adapter\":\"tI1X\"}],\"I31f\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar adapter_1 = require(\"./adapter\");\n\nexports.Supports = new (\n/** @class */\nfunction () {\n  function class_1() {\n    this.isIOS = ['iPad', 'iPhone', 'iPod'].includes(navigator.platform);\n    this.supportedBrowsers = ['firefox', 'chrome', 'safari'];\n    this.minFirefoxVersion = 59;\n    this.minChromeVersion = 72;\n    this.minSafariVersion = 605;\n  }\n\n  class_1.prototype.isWebRTCSupported = function () {\n    return typeof RTCPeerConnection !== 'undefined';\n  };\n\n  ;\n\n  class_1.prototype.isBrowserSupported = function () {\n    var browser = this.getBrowser();\n    var version = this.getVersion();\n    var validBrowser = this.supportedBrowsers.includes(browser);\n    if (!validBrowser) return false;\n    if (browser === 'chrome') return version >= this.minChromeVersion;\n    if (browser === 'firefox') return version >= this.minFirefoxVersion;\n    if (browser === 'safari') return !this.isIOS && version >= this.minSafariVersion;\n    return false;\n  };\n\n  class_1.prototype.getBrowser = function () {\n    return adapter_1.webRTCAdapter.browserDetails.browser;\n  };\n\n  class_1.prototype.getVersion = function () {\n    return adapter_1.webRTCAdapter.browserDetails.version || 0;\n  };\n\n  class_1.prototype.isUnifiedPlanSupported = function () {\n    var browser = this.getBrowser();\n    var version = adapter_1.webRTCAdapter.browserDetails.version || 0;\n    if (browser === 'chrome' && version < 72) return false;\n    if (browser === 'firefox' && version >= 59) return true;\n    if (!window.RTCRtpTransceiver || !('currentDirection' in RTCRtpTransceiver.prototype)) return false;\n    var tempPc;\n    var supported = false;\n\n    try {\n      tempPc = new RTCPeerConnection();\n      tempPc.addTransceiver('audio');\n      supported = true;\n    } catch (e) {} finally {\n      if (tempPc) {\n        tempPc.close();\n      }\n    }\n\n    return supported;\n  };\n\n  class_1.prototype.toString = function () {\n    return \"Supports: \\n    browser:\" + this.getBrowser() + \" \\n    version:\" + this.getVersion() + \" \\n    isIOS:\" + this.isIOS + \" \\n    isWebRTCSupported:\" + this.isWebRTCSupported() + \" \\n    isBrowserSupported:\" + this.isBrowserSupported() + \" \\n    isUnifiedPlanSupported:\" + this.isUnifiedPlanSupported();\n  };\n\n  return class_1;\n}())();\n},{\"./adapter\":\"sXtV\"}],\"BHXf\":[function(require,module,exports) {\n\"use strict\";\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar BinaryPack = __importStar(require(\"peerjs-js-binarypack\"));\n\nvar supports_1 = require(\"./supports\");\n\nvar DEFAULT_CONFIG = {\n  iceServers: [{\n    urls: \"stun:stun.l.google.com:19302\"\n  }, {\n    urls: \"turn:0.peerjs.com:3478\",\n    username: \"peerjs\",\n    credential: \"peerjsp\"\n  }],\n  sdpSemantics: \"unified-plan\"\n};\nexports.util = new (\n/** @class */\nfunction () {\n  function class_1() {\n    this.CLOUD_HOST = \"0.peerjs.com\";\n    this.CLOUD_PORT = 443; // Browsers that need chunking:\n\n    this.chunkedBrowsers = {\n      Chrome: 1,\n      chrome: 1\n    };\n    this.chunkedMTU = 16300; // The original 60000 bytes setting does not work when sending data from Firefox to Chrome, which is \"cut off\" after 16384 bytes and delivered individually.\n    // Returns browser-agnostic default config\n\n    this.defaultConfig = DEFAULT_CONFIG;\n    this.browser = supports_1.Supports.getBrowser();\n    this.browserVersion = supports_1.Supports.getVersion(); // Lists which features are supported\n\n    this.supports = function () {\n      var supported = {\n        browser: supports_1.Supports.isBrowserSupported(),\n        webRTC: supports_1.Supports.isWebRTCSupported(),\n        audioVideo: false,\n        data: false,\n        binaryBlob: false,\n        reliable: false\n      };\n      if (!supported.webRTC) return supported;\n      var pc;\n\n      try {\n        pc = new RTCPeerConnection(DEFAULT_CONFIG);\n        supported.audioVideo = true;\n        var dc = void 0;\n\n        try {\n          dc = pc.createDataChannel(\"_PEERJSTEST\", {\n            ordered: true\n          });\n          supported.data = true;\n          supported.reliable = !!dc.ordered; // Binary test\n\n          try {\n            dc.binaryType = \"blob\";\n            supported.binaryBlob = !supports_1.Supports.isIOS;\n          } catch (e) {}\n        } catch (e) {} finally {\n          if (dc) {\n            dc.close();\n          }\n        }\n      } catch (e) {} finally {\n        if (pc) {\n          pc.close();\n        }\n      }\n\n      return supported;\n    }();\n\n    this.pack = BinaryPack.pack;\n    this.unpack = BinaryPack.unpack; // Binary stuff\n\n    this._dataCount = 1;\n  }\n\n  class_1.prototype.noop = function () {}; // Ensure alphanumeric ids\n\n\n  class_1.prototype.validateId = function (id) {\n    // Allow empty ids\n    return !id || /^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(id);\n  };\n\n  class_1.prototype.chunk = function (blob) {\n    var chunks = [];\n    var size = blob.size;\n    var total = Math.ceil(size / exports.util.chunkedMTU);\n    var index = 0;\n    var start = 0;\n\n    while (start < size) {\n      var end = Math.min(size, start + exports.util.chunkedMTU);\n      var b = blob.slice(start, end);\n      var chunk = {\n        __peerData: this._dataCount,\n        n: index,\n        data: b,\n        total: total\n      };\n      chunks.push(chunk);\n      start = end;\n      index++;\n    }\n\n    this._dataCount++;\n    return chunks;\n  };\n\n  class_1.prototype.blobToArrayBuffer = function (blob, cb) {\n    var fr = new FileReader();\n\n    fr.onload = function (evt) {\n      if (evt.target) {\n        cb(evt.target.result);\n      }\n    };\n\n    fr.readAsArrayBuffer(blob);\n    return fr;\n  };\n\n  class_1.prototype.binaryStringToArrayBuffer = function (binary) {\n    var byteArray = new Uint8Array(binary.length);\n\n    for (var i = 0; i < binary.length; i++) {\n      byteArray[i] = binary.charCodeAt(i) & 0xff;\n    }\n\n    return byteArray.buffer;\n  };\n\n  class_1.prototype.randomToken = function () {\n    return Math.random().toString(36).substr(2);\n  };\n\n  class_1.prototype.isSecure = function () {\n    return location.protocol === \"https:\";\n  };\n\n  return class_1;\n}())();\n},{\"peerjs-js-binarypack\":\"kdPp\",\"./supports\":\"I31f\"}],\"JJlS\":[function(require,module,exports) {\n'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n\n},{}],\"WOs9\":[function(require,module,exports) {\n\"use strict\";\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spread = this && this.__spread || function () {\n  for (var ar = [], i = 0; i < arguments.length; i++) {\n    ar = ar.concat(__read(arguments[i]));\n  }\n\n  return ar;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar LOG_PREFIX = 'PeerJS: ';\n/*\nPrints log messages depending on the debug level passed in. Defaults to 0.\n0  Prints no logs.\n1  Prints only errors.\n2  Prints errors and warnings.\n3  Prints all logs.\n*/\n\nvar LogLevel;\n\n(function (LogLevel) {\n  LogLevel[LogLevel[\"Disabled\"] = 0] = \"Disabled\";\n  LogLevel[LogLevel[\"Errors\"] = 1] = \"Errors\";\n  LogLevel[LogLevel[\"Warnings\"] = 2] = \"Warnings\";\n  LogLevel[LogLevel[\"All\"] = 3] = \"All\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\n\nvar Logger =\n/** @class */\nfunction () {\n  function Logger() {\n    this._logLevel = LogLevel.Disabled;\n  }\n\n  Object.defineProperty(Logger.prototype, \"logLevel\", {\n    get: function get() {\n      return this._logLevel;\n    },\n    set: function set(logLevel) {\n      this._logLevel = logLevel;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Logger.prototype.log = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (this._logLevel >= LogLevel.All) {\n      this._print.apply(this, __spread([LogLevel.All], args));\n    }\n  };\n\n  Logger.prototype.warn = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (this._logLevel >= LogLevel.Warnings) {\n      this._print.apply(this, __spread([LogLevel.Warnings], args));\n    }\n  };\n\n  Logger.prototype.error = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (this._logLevel >= LogLevel.Errors) {\n      this._print.apply(this, __spread([LogLevel.Errors], args));\n    }\n  };\n\n  Logger.prototype.setLogFunction = function (fn) {\n    this._print = fn;\n  };\n\n  Logger.prototype._print = function (logLevel) {\n    var rest = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      rest[_i - 1] = arguments[_i];\n    }\n\n    var copy = __spread([LOG_PREFIX], rest);\n\n    for (var i in copy) {\n      if (copy[i] instanceof Error) {\n        copy[i] = \"(\" + copy[i].name + \") \" + copy[i].message;\n      }\n    }\n\n    if (logLevel >= LogLevel.All) {\n      console.log.apply(console, __spread(copy));\n    } else if (logLevel >= LogLevel.Warnings) {\n      console.warn.apply(console, __spread([\"WARNING\"], copy));\n    } else if (logLevel >= LogLevel.Errors) {\n      console.error.apply(console, __spread([\"ERROR\"], copy));\n    }\n  };\n\n  return Logger;\n}();\n\nexports.default = new Logger();\n},{}],\"ZRYf\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar ConnectionEventType;\n\n(function (ConnectionEventType) {\n  ConnectionEventType[\"Open\"] = \"open\";\n  ConnectionEventType[\"Stream\"] = \"stream\";\n  ConnectionEventType[\"Data\"] = \"data\";\n  ConnectionEventType[\"Close\"] = \"close\";\n  ConnectionEventType[\"Error\"] = \"error\";\n  ConnectionEventType[\"IceStateChanged\"] = \"iceStateChanged\";\n})(ConnectionEventType = exports.ConnectionEventType || (exports.ConnectionEventType = {}));\n\nvar ConnectionType;\n\n(function (ConnectionType) {\n  ConnectionType[\"Data\"] = \"data\";\n  ConnectionType[\"Media\"] = \"media\";\n})(ConnectionType = exports.ConnectionType || (exports.ConnectionType = {}));\n\nvar PeerEventType;\n\n(function (PeerEventType) {\n  PeerEventType[\"Open\"] = \"open\";\n  PeerEventType[\"Close\"] = \"close\";\n  PeerEventType[\"Connection\"] = \"connection\";\n  PeerEventType[\"Call\"] = \"call\";\n  PeerEventType[\"Disconnected\"] = \"disconnected\";\n  PeerEventType[\"Error\"] = \"error\";\n})(PeerEventType = exports.PeerEventType || (exports.PeerEventType = {}));\n\nvar PeerErrorType;\n\n(function (PeerErrorType) {\n  PeerErrorType[\"BrowserIncompatible\"] = \"browser-incompatible\";\n  PeerErrorType[\"Disconnected\"] = \"disconnected\";\n  PeerErrorType[\"InvalidID\"] = \"invalid-id\";\n  PeerErrorType[\"InvalidKey\"] = \"invalid-key\";\n  PeerErrorType[\"Network\"] = \"network\";\n  PeerErrorType[\"PeerUnavailable\"] = \"peer-unavailable\";\n  PeerErrorType[\"SslUnavailable\"] = \"ssl-unavailable\";\n  PeerErrorType[\"ServerError\"] = \"server-error\";\n  PeerErrorType[\"SocketError\"] = \"socket-error\";\n  PeerErrorType[\"SocketClosed\"] = \"socket-closed\";\n  PeerErrorType[\"UnavailableID\"] = \"unavailable-id\";\n  PeerErrorType[\"WebRTC\"] = \"webrtc\";\n})(PeerErrorType = exports.PeerErrorType || (exports.PeerErrorType = {}));\n\nvar SerializationType;\n\n(function (SerializationType) {\n  SerializationType[\"Binary\"] = \"binary\";\n  SerializationType[\"BinaryUTF8\"] = \"binary-utf8\";\n  SerializationType[\"JSON\"] = \"json\";\n})(SerializationType = exports.SerializationType || (exports.SerializationType = {}));\n\nvar SocketEventType;\n\n(function (SocketEventType) {\n  SocketEventType[\"Message\"] = \"message\";\n  SocketEventType[\"Disconnected\"] = \"disconnected\";\n  SocketEventType[\"Error\"] = \"error\";\n  SocketEventType[\"Close\"] = \"close\";\n})(SocketEventType = exports.SocketEventType || (exports.SocketEventType = {}));\n\nvar ServerMessageType;\n\n(function (ServerMessageType) {\n  ServerMessageType[\"Heartbeat\"] = \"HEARTBEAT\";\n  ServerMessageType[\"Candidate\"] = \"CANDIDATE\";\n  ServerMessageType[\"Offer\"] = \"OFFER\";\n  ServerMessageType[\"Answer\"] = \"ANSWER\";\n  ServerMessageType[\"Open\"] = \"OPEN\";\n  ServerMessageType[\"Error\"] = \"ERROR\";\n  ServerMessageType[\"IdTaken\"] = \"ID-TAKEN\";\n  ServerMessageType[\"InvalidKey\"] = \"INVALID-KEY\";\n  ServerMessageType[\"Leave\"] = \"LEAVE\";\n  ServerMessageType[\"Expire\"] = \"EXPIRE\"; // The offer sent to a peer has expired without response.\n})(ServerMessageType = exports.ServerMessageType || (exports.ServerMessageType = {}));\n},{}],\"wJlv\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spread = this && this.__spread || function () {\n  for (var ar = [], i = 0; i < arguments.length; i++) {\n    ar = ar.concat(__read(arguments[i]));\n  }\n\n  return ar;\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar eventemitter3_1 = require(\"eventemitter3\");\n\nvar logger_1 = __importDefault(require(\"./logger\"));\n\nvar enums_1 = require(\"./enums\");\n/**\n * An abstraction on top of WebSockets to provide fastest\n * possible connection for peers.\n */\n\n\nvar Socket =\n/** @class */\nfunction (_super) {\n  __extends(Socket, _super);\n\n  function Socket(secure, host, port, path, key, pingInterval) {\n    if (pingInterval === void 0) {\n      pingInterval = 5000;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.pingInterval = pingInterval;\n    _this._disconnected = true;\n    _this._messagesQueue = [];\n    var wsProtocol = secure ? \"wss://\" : \"ws://\";\n    _this._baseUrl = wsProtocol + host + \":\" + port + path + \"peerjs?key=\" + key;\n    return _this;\n  }\n\n  Socket.prototype.start = function (id, token) {\n    var _this = this;\n\n    this._id = id;\n    var wsUrl = this._baseUrl + \"&id=\" + id + \"&token=\" + token;\n\n    if (!!this._socket || !this._disconnected) {\n      return;\n    }\n\n    this._socket = new WebSocket(wsUrl);\n    this._disconnected = false;\n\n    this._socket.onmessage = function (event) {\n      var data;\n\n      try {\n        data = JSON.parse(event.data);\n        logger_1.default.log(\"Server message received:\", data);\n      } catch (e) {\n        logger_1.default.log(\"Invalid server message\", event.data);\n        return;\n      }\n\n      _this.emit(enums_1.SocketEventType.Message, data);\n    };\n\n    this._socket.onclose = function (event) {\n      if (_this._disconnected) {\n        return;\n      }\n\n      logger_1.default.log(\"Socket closed.\", event);\n\n      _this._cleanup();\n\n      _this._disconnected = true;\n\n      _this.emit(enums_1.SocketEventType.Disconnected);\n    }; // Take care of the queue of connections if necessary and make sure Peer knows\n    // socket is open.\n\n\n    this._socket.onopen = function () {\n      if (_this._disconnected) {\n        return;\n      }\n\n      _this._sendQueuedMessages();\n\n      logger_1.default.log(\"Socket open\");\n\n      _this._scheduleHeartbeat();\n    };\n  };\n\n  Socket.prototype._scheduleHeartbeat = function () {\n    var _this = this;\n\n    this._wsPingTimer = setTimeout(function () {\n      _this._sendHeartbeat();\n    }, this.pingInterval);\n  };\n\n  Socket.prototype._sendHeartbeat = function () {\n    if (!this._wsOpen()) {\n      logger_1.default.log(\"Cannot send heartbeat, because socket closed\");\n      return;\n    }\n\n    var message = JSON.stringify({\n      type: enums_1.ServerMessageType.Heartbeat\n    });\n\n    this._socket.send(message);\n\n    this._scheduleHeartbeat();\n  };\n  /** Is the websocket currently open? */\n\n\n  Socket.prototype._wsOpen = function () {\n    return !!this._socket && this._socket.readyState === 1;\n  };\n  /** Send queued messages. */\n\n\n  Socket.prototype._sendQueuedMessages = function () {\n    var e_1, _a; //Create copy of queue and clear it,\n    //because send method push the message back to queue if smth will go wrong\n\n\n    var copiedQueue = __spread(this._messagesQueue);\n\n    this._messagesQueue = [];\n\n    try {\n      for (var copiedQueue_1 = __values(copiedQueue), copiedQueue_1_1 = copiedQueue_1.next(); !copiedQueue_1_1.done; copiedQueue_1_1 = copiedQueue_1.next()) {\n        var message = copiedQueue_1_1.value;\n        this.send(message);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (copiedQueue_1_1 && !copiedQueue_1_1.done && (_a = copiedQueue_1.return)) _a.call(copiedQueue_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n  /** Exposed send for DC & Peer. */\n\n\n  Socket.prototype.send = function (data) {\n    if (this._disconnected) {\n      return;\n    } // If we didn't get an ID yet, we can't yet send anything so we should queue\n    // up these messages.\n\n\n    if (!this._id) {\n      this._messagesQueue.push(data);\n\n      return;\n    }\n\n    if (!data.type) {\n      this.emit(enums_1.SocketEventType.Error, \"Invalid message\");\n      return;\n    }\n\n    if (!this._wsOpen()) {\n      return;\n    }\n\n    var message = JSON.stringify(data);\n\n    this._socket.send(message);\n  };\n\n  Socket.prototype.close = function () {\n    if (this._disconnected) {\n      return;\n    }\n\n    this._cleanup();\n\n    this._disconnected = true;\n  };\n\n  Socket.prototype._cleanup = function () {\n    if (!!this._socket) {\n      this._socket.onopen = this._socket.onmessage = this._socket.onclose = null;\n\n      this._socket.close();\n\n      this._socket = undefined;\n    }\n\n    clearTimeout(this._wsPingTimer);\n  };\n\n  return Socket;\n}(eventemitter3_1.EventEmitter);\n\nexports.Socket = Socket;\n},{\"eventemitter3\":\"JJlS\",\"./logger\":\"WOs9\",\"./enums\":\"ZRYf\"}],\"HCdX\":[function(require,module,exports) {\n\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = require(\"./util\");\n\nvar logger_1 = __importDefault(require(\"./logger\"));\n\nvar enums_1 = require(\"./enums\");\n/**\n * Manages all negotiations between Peers.\n */\n\n\nvar Negotiator =\n/** @class */\nfunction () {\n  function Negotiator(connection) {\n    this.connection = connection;\n  }\n  /** Returns a PeerConnection object set up correctly (for data, media). */\n\n\n  Negotiator.prototype.startConnection = function (options) {\n    var peerConnection = this._startPeerConnection(); // Set the connection's PC.\n\n\n    this.connection.peerConnection = peerConnection;\n\n    if (this.connection.type === enums_1.ConnectionType.Media && options._stream) {\n      this._addTracksToConnection(options._stream, peerConnection);\n    } // What do we need to do now?\n\n\n    if (options.originator) {\n      if (this.connection.type === enums_1.ConnectionType.Data) {\n        var dataConnection = this.connection;\n        var config = {\n          ordered: !!options.reliable\n        };\n        var dataChannel = peerConnection.createDataChannel(dataConnection.label, config);\n        dataConnection.initialize(dataChannel);\n      }\n\n      this._makeOffer();\n    } else {\n      this.handleSDP(\"OFFER\", options.sdp);\n    }\n  };\n  /** Start a PC. */\n\n\n  Negotiator.prototype._startPeerConnection = function () {\n    logger_1.default.log(\"Creating RTCPeerConnection.\");\n    var peerConnection = new RTCPeerConnection(this.connection.provider.options.config);\n\n    this._setupListeners(peerConnection);\n\n    return peerConnection;\n  };\n  /** Set up various WebRTC listeners. */\n\n\n  Negotiator.prototype._setupListeners = function (peerConnection) {\n    var _this = this;\n\n    var peerId = this.connection.peer;\n    var connectionId = this.connection.connectionId;\n    var connectionType = this.connection.type;\n    var provider = this.connection.provider; // ICE CANDIDATES.\n\n    logger_1.default.log(\"Listening for ICE candidates.\");\n\n    peerConnection.onicecandidate = function (evt) {\n      if (!evt.candidate || !evt.candidate.candidate) return;\n      logger_1.default.log(\"Received ICE candidates for \" + peerId + \":\", evt.candidate);\n      provider.socket.send({\n        type: enums_1.ServerMessageType.Candidate,\n        payload: {\n          candidate: evt.candidate,\n          type: connectionType,\n          connectionId: connectionId\n        },\n        dst: peerId\n      });\n    };\n\n    peerConnection.oniceconnectionstatechange = function () {\n      switch (peerConnection.iceConnectionState) {\n        case \"failed\":\n          logger_1.default.log(\"iceConnectionState is failed, closing connections to \" + peerId);\n\n          _this.connection.emit(enums_1.ConnectionEventType.Error, new Error(\"Negotiation of connection to \" + peerId + \" failed.\"));\n\n          _this.connection.close();\n\n          break;\n\n        case \"closed\":\n          logger_1.default.log(\"iceConnectionState is closed, closing connections to \" + peerId);\n\n          _this.connection.emit(enums_1.ConnectionEventType.Error, new Error(\"Connection to \" + peerId + \" closed.\"));\n\n          _this.connection.close();\n\n          break;\n\n        case \"disconnected\":\n          logger_1.default.log(\"iceConnectionState is disconnected, closing connections to \" + peerId);\n\n          _this.connection.emit(enums_1.ConnectionEventType.Error, new Error(\"Connection to \" + peerId + \" disconnected.\"));\n\n          _this.connection.close();\n\n          break;\n\n        case \"completed\":\n          peerConnection.onicecandidate = util_1.util.noop;\n          break;\n      }\n\n      _this.connection.emit(enums_1.ConnectionEventType.IceStateChanged, peerConnection.iceConnectionState);\n    }; // DATACONNECTION.\n\n\n    logger_1.default.log(\"Listening for data channel\"); // Fired between offer and answer, so options should already be saved\n    // in the options hash.\n\n    peerConnection.ondatachannel = function (evt) {\n      logger_1.default.log(\"Received data channel\");\n      var dataChannel = evt.channel;\n      var connection = provider.getConnection(peerId, connectionId);\n      connection.initialize(dataChannel);\n    }; // MEDIACONNECTION.\n\n\n    logger_1.default.log(\"Listening for remote stream\");\n\n    peerConnection.ontrack = function (evt) {\n      logger_1.default.log(\"Received remote stream\");\n      var stream = evt.streams[0];\n      var connection = provider.getConnection(peerId, connectionId);\n\n      if (connection.type === enums_1.ConnectionType.Media) {\n        var mediaConnection = connection;\n\n        _this._addStreamToMediaConnection(stream, mediaConnection);\n      }\n    };\n  };\n\n  Negotiator.prototype.cleanup = function () {\n    logger_1.default.log(\"Cleaning up PeerConnection to \" + this.connection.peer);\n    var peerConnection = this.connection.peerConnection;\n\n    if (!peerConnection) {\n      return;\n    }\n\n    this.connection.peerConnection = null; //unsubscribe from all PeerConnection's events\n\n    peerConnection.onicecandidate = peerConnection.oniceconnectionstatechange = peerConnection.ondatachannel = peerConnection.ontrack = function () {};\n\n    var peerConnectionNotClosed = peerConnection.signalingState !== \"closed\";\n    var dataChannelNotClosed = false;\n\n    if (this.connection.type === enums_1.ConnectionType.Data) {\n      var dataConnection = this.connection;\n      var dataChannel = dataConnection.dataChannel;\n\n      if (dataChannel) {\n        dataChannelNotClosed = !!dataChannel.readyState && dataChannel.readyState !== \"closed\";\n      }\n    }\n\n    if (peerConnectionNotClosed || dataChannelNotClosed) {\n      peerConnection.close();\n    }\n  };\n\n  Negotiator.prototype._makeOffer = function () {\n    return __awaiter(this, void 0, Promise, function () {\n      var peerConnection, provider, offer, payload, dataConnection, err_2, err_1_1;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            peerConnection = this.connection.peerConnection;\n            provider = this.connection.provider;\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 7,, 8]);\n\n            return [4\n            /*yield*/\n            , peerConnection.createOffer(this.connection.options.constraints)];\n\n          case 2:\n            offer = _a.sent();\n            logger_1.default.log(\"Created offer.\");\n\n            if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === 'function') {\n              offer.sdp = this.connection.options.sdpTransform(offer.sdp) || offer.sdp;\n            }\n\n            _a.label = 3;\n\n          case 3:\n            _a.trys.push([3, 5,, 6]);\n\n            return [4\n            /*yield*/\n            , peerConnection.setLocalDescription(offer)];\n\n          case 4:\n            _a.sent();\n\n            logger_1.default.log(\"Set localDescription:\", offer, \"for:\" + this.connection.peer);\n            payload = {\n              sdp: offer,\n              type: this.connection.type,\n              connectionId: this.connection.connectionId,\n              metadata: this.connection.metadata,\n              browser: util_1.util.browser\n            };\n\n            if (this.connection.type === enums_1.ConnectionType.Data) {\n              dataConnection = this.connection;\n              payload = __assign(__assign({}, payload), {\n                label: dataConnection.label,\n                reliable: dataConnection.reliable,\n                serialization: dataConnection.serialization\n              });\n            }\n\n            provider.socket.send({\n              type: enums_1.ServerMessageType.Offer,\n              payload: payload,\n              dst: this.connection.peer\n            });\n            return [3\n            /*break*/\n            , 6];\n\n          case 5:\n            err_2 = _a.sent(); // TODO: investigate why _makeOffer is being called from the answer\n\n            if (err_2 != \"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer\") {\n              provider.emitError(enums_1.PeerErrorType.WebRTC, err_2);\n              logger_1.default.log(\"Failed to setLocalDescription, \", err_2);\n            }\n\n            return [3\n            /*break*/\n            , 6];\n\n          case 6:\n            return [3\n            /*break*/\n            , 8];\n\n          case 7:\n            err_1_1 = _a.sent();\n            provider.emitError(enums_1.PeerErrorType.WebRTC, err_1_1);\n            logger_1.default.log(\"Failed to createOffer, \", err_1_1);\n            return [3\n            /*break*/\n            , 8];\n\n          case 8:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  Negotiator.prototype._makeAnswer = function () {\n    return __awaiter(this, void 0, Promise, function () {\n      var peerConnection, provider, answer, err_3, err_1_2;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            peerConnection = this.connection.peerConnection;\n            provider = this.connection.provider;\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 7,, 8]);\n\n            return [4\n            /*yield*/\n            , peerConnection.createAnswer()];\n\n          case 2:\n            answer = _a.sent();\n            logger_1.default.log(\"Created answer.\");\n\n            if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === 'function') {\n              answer.sdp = this.connection.options.sdpTransform(answer.sdp) || answer.sdp;\n            }\n\n            _a.label = 3;\n\n          case 3:\n            _a.trys.push([3, 5,, 6]);\n\n            return [4\n            /*yield*/\n            , peerConnection.setLocalDescription(answer)];\n\n          case 4:\n            _a.sent();\n\n            logger_1.default.log(\"Set localDescription:\", answer, \"for:\" + this.connection.peer);\n            provider.socket.send({\n              type: enums_1.ServerMessageType.Answer,\n              payload: {\n                sdp: answer,\n                type: this.connection.type,\n                connectionId: this.connection.connectionId,\n                browser: util_1.util.browser\n              },\n              dst: this.connection.peer\n            });\n            return [3\n            /*break*/\n            , 6];\n\n          case 5:\n            err_3 = _a.sent();\n            provider.emitError(enums_1.PeerErrorType.WebRTC, err_3);\n            logger_1.default.log(\"Failed to setLocalDescription, \", err_3);\n            return [3\n            /*break*/\n            , 6];\n\n          case 6:\n            return [3\n            /*break*/\n            , 8];\n\n          case 7:\n            err_1_2 = _a.sent();\n            provider.emitError(enums_1.PeerErrorType.WebRTC, err_1_2);\n            logger_1.default.log(\"Failed to create answer, \", err_1_2);\n            return [3\n            /*break*/\n            , 8];\n\n          case 8:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n  /** Handle an SDP. */\n\n\n  Negotiator.prototype.handleSDP = function (type, sdp) {\n    return __awaiter(this, void 0, Promise, function () {\n      var peerConnection, provider, self, err_4;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            sdp = new RTCSessionDescription(sdp);\n            peerConnection = this.connection.peerConnection;\n            provider = this.connection.provider;\n            logger_1.default.log(\"Setting remote description\", sdp);\n            self = this;\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 5,, 6]);\n\n            return [4\n            /*yield*/\n            , peerConnection.setRemoteDescription(sdp)];\n\n          case 2:\n            _a.sent();\n\n            logger_1.default.log(\"Set remoteDescription:\" + type + \" for:\" + this.connection.peer);\n            if (!(type === \"OFFER\")) return [3\n            /*break*/\n            , 4];\n            return [4\n            /*yield*/\n            , self._makeAnswer()];\n\n          case 3:\n            _a.sent();\n\n            _a.label = 4;\n\n          case 4:\n            return [3\n            /*break*/\n            , 6];\n\n          case 5:\n            err_4 = _a.sent();\n            provider.emitError(enums_1.PeerErrorType.WebRTC, err_4);\n            logger_1.default.log(\"Failed to setRemoteDescription, \", err_4);\n            return [3\n            /*break*/\n            , 6];\n\n          case 6:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n  /** Handle a candidate. */\n\n\n  Negotiator.prototype.handleCandidate = function (ice) {\n    return __awaiter(this, void 0, Promise, function () {\n      var candidate, sdpMLineIndex, sdpMid, peerConnection, provider, err_5;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            logger_1.default.log(\"handleCandidate:\", ice);\n            candidate = ice.candidate;\n            sdpMLineIndex = ice.sdpMLineIndex;\n            sdpMid = ice.sdpMid;\n            peerConnection = this.connection.peerConnection;\n            provider = this.connection.provider;\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , peerConnection.addIceCandidate(new RTCIceCandidate({\n              sdpMid: sdpMid,\n              sdpMLineIndex: sdpMLineIndex,\n              candidate: candidate\n            }))];\n\n          case 2:\n            _a.sent();\n\n            logger_1.default.log(\"Added ICE candidate for:\" + this.connection.peer);\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            err_5 = _a.sent();\n            provider.emitError(enums_1.PeerErrorType.WebRTC, err_5);\n            logger_1.default.log(\"Failed to handleCandidate, \", err_5);\n            return [3\n            /*break*/\n            , 4];\n\n          case 4:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  Negotiator.prototype._addTracksToConnection = function (stream, peerConnection) {\n    logger_1.default.log(\"add tracks from stream \" + stream.id + \" to peer connection\");\n\n    if (!peerConnection.addTrack) {\n      return logger_1.default.error(\"Your browser does't support RTCPeerConnection#addTrack. Ignored.\");\n    }\n\n    stream.getTracks().forEach(function (track) {\n      peerConnection.addTrack(track, stream);\n    });\n  };\n\n  Negotiator.prototype._addStreamToMediaConnection = function (stream, mediaConnection) {\n    logger_1.default.log(\"add stream \" + stream.id + \" to media connection \" + mediaConnection.connectionId);\n    mediaConnection.addStream(stream);\n  };\n\n  return Negotiator;\n}();\n\nexports.Negotiator = Negotiator;\n},{\"./util\":\"BHXf\",\"./logger\":\"WOs9\",\"./enums\":\"ZRYf\"}],\"tQFK\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar eventemitter3_1 = require(\"eventemitter3\");\n\nvar BaseConnection =\n/** @class */\nfunction (_super) {\n  __extends(BaseConnection, _super);\n\n  function BaseConnection(peer, provider, options) {\n    var _this = _super.call(this) || this;\n\n    _this.peer = peer;\n    _this.provider = provider;\n    _this.options = options;\n    _this._open = false;\n    _this.metadata = options.metadata;\n    return _this;\n  }\n\n  Object.defineProperty(BaseConnection.prototype, \"open\", {\n    get: function get() {\n      return this._open;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return BaseConnection;\n}(eventemitter3_1.EventEmitter);\n\nexports.BaseConnection = BaseConnection;\n},{\"eventemitter3\":\"JJlS\"}],\"dbHP\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = require(\"./util\");\n\nvar logger_1 = __importDefault(require(\"./logger\"));\n\nvar negotiator_1 = require(\"./negotiator\");\n\nvar enums_1 = require(\"./enums\");\n\nvar baseconnection_1 = require(\"./baseconnection\");\n/**\n * Wraps the streaming interface between two Peers.\n */\n\n\nvar MediaConnection =\n/** @class */\nfunction (_super) {\n  __extends(MediaConnection, _super);\n\n  function MediaConnection(peerId, provider, options) {\n    var _this = _super.call(this, peerId, provider, options) || this;\n\n    _this._localStream = _this.options._stream;\n    _this.connectionId = _this.options.connectionId || MediaConnection.ID_PREFIX + util_1.util.randomToken();\n    _this._negotiator = new negotiator_1.Negotiator(_this);\n\n    if (_this._localStream) {\n      _this._negotiator.startConnection({\n        _stream: _this._localStream,\n        originator: true\n      });\n    }\n\n    return _this;\n  }\n\n  Object.defineProperty(MediaConnection.prototype, \"type\", {\n    get: function get() {\n      return enums_1.ConnectionType.Media;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MediaConnection.prototype, \"localStream\", {\n    get: function get() {\n      return this._localStream;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MediaConnection.prototype, \"remoteStream\", {\n    get: function get() {\n      return this._remoteStream;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  MediaConnection.prototype.addStream = function (remoteStream) {\n    logger_1.default.log(\"Receiving stream\", remoteStream);\n    this._remoteStream = remoteStream;\n\n    _super.prototype.emit.call(this, enums_1.ConnectionEventType.Stream, remoteStream); // Should we call this `open`?\n\n  };\n\n  MediaConnection.prototype.handleMessage = function (message) {\n    var type = message.type;\n    var payload = message.payload;\n\n    switch (message.type) {\n      case enums_1.ServerMessageType.Answer:\n        // Forward to negotiator\n        this._negotiator.handleSDP(type, payload.sdp);\n\n        this._open = true;\n        break;\n\n      case enums_1.ServerMessageType.Candidate:\n        this._negotiator.handleCandidate(payload.candidate);\n\n        break;\n\n      default:\n        logger_1.default.warn(\"Unrecognized message type:\" + type + \" from peer:\" + this.peer);\n        break;\n    }\n  };\n\n  MediaConnection.prototype.answer = function (stream, options) {\n    var e_1, _a;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (this._localStream) {\n      logger_1.default.warn(\"Local stream already exists on this MediaConnection. Are you answering a call twice?\");\n      return;\n    }\n\n    this._localStream = stream;\n\n    if (options && options.sdpTransform) {\n      this.options.sdpTransform = options.sdpTransform;\n    }\n\n    this._negotiator.startConnection(__assign(__assign({}, this.options._payload), {\n      _stream: stream\n    })); // Retrieve lost messages stored because PeerConnection not set up.\n\n\n    var messages = this.provider._getMessages(this.connectionId);\n\n    try {\n      for (var messages_1 = __values(messages), messages_1_1 = messages_1.next(); !messages_1_1.done; messages_1_1 = messages_1.next()) {\n        var message = messages_1_1.value;\n        this.handleMessage(message);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (messages_1_1 && !messages_1_1.done && (_a = messages_1.return)) _a.call(messages_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    this._open = true;\n  };\n  /**\n   * Exposed functionality for users.\n   */\n\n  /** Allows user to close connection. */\n\n\n  MediaConnection.prototype.close = function () {\n    if (this._negotiator) {\n      this._negotiator.cleanup();\n\n      this._negotiator = null;\n    }\n\n    this._localStream = null;\n    this._remoteStream = null;\n\n    if (this.provider) {\n      this.provider._removeConnection(this);\n\n      this.provider = null;\n    }\n\n    if (this.options && this.options._stream) {\n      this.options._stream = null;\n    }\n\n    if (!this.open) {\n      return;\n    }\n\n    this._open = false;\n\n    _super.prototype.emit.call(this, enums_1.ConnectionEventType.Close);\n  };\n\n  MediaConnection.ID_PREFIX = \"mc_\";\n  return MediaConnection;\n}(baseconnection_1.BaseConnection);\n\nexports.MediaConnection = MediaConnection;\n},{\"./util\":\"BHXf\",\"./logger\":\"WOs9\",\"./negotiator\":\"HCdX\",\"./enums\":\"ZRYf\",\"./baseconnection\":\"tQFK\"}],\"GGp6\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar eventemitter3_1 = require(\"eventemitter3\");\n\nvar logger_1 = __importDefault(require(\"./logger\"));\n\nvar EncodingQueue =\n/** @class */\nfunction (_super) {\n  __extends(EncodingQueue, _super);\n\n  function EncodingQueue() {\n    var _this = _super.call(this) || this;\n\n    _this.fileReader = new FileReader();\n    _this._queue = [];\n    _this._processing = false;\n\n    _this.fileReader.onload = function (evt) {\n      _this._processing = false;\n\n      if (evt.target) {\n        _this.emit('done', evt.target.result);\n      }\n\n      _this.doNextTask();\n    };\n\n    _this.fileReader.onerror = function (evt) {\n      logger_1.default.error(\"EncodingQueue error:\", evt);\n      _this._processing = false;\n\n      _this.destroy();\n\n      _this.emit('error', evt);\n    };\n\n    return _this;\n  }\n\n  Object.defineProperty(EncodingQueue.prototype, \"queue\", {\n    get: function get() {\n      return this._queue;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EncodingQueue.prototype, \"size\", {\n    get: function get() {\n      return this.queue.length;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EncodingQueue.prototype, \"processing\", {\n    get: function get() {\n      return this._processing;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  EncodingQueue.prototype.enque = function (blob) {\n    this.queue.push(blob);\n    if (this.processing) return;\n    this.doNextTask();\n  };\n\n  EncodingQueue.prototype.destroy = function () {\n    this.fileReader.abort();\n    this._queue = [];\n  };\n\n  EncodingQueue.prototype.doNextTask = function () {\n    if (this.size === 0) return;\n    if (this.processing) return;\n    this._processing = true;\n    this.fileReader.readAsArrayBuffer(this.queue.shift());\n  };\n\n  return EncodingQueue;\n}(eventemitter3_1.EventEmitter);\n\nexports.EncodingQueue = EncodingQueue;\n},{\"eventemitter3\":\"JJlS\",\"./logger\":\"WOs9\"}],\"GBTQ\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = require(\"./util\");\n\nvar logger_1 = __importDefault(require(\"./logger\"));\n\nvar negotiator_1 = require(\"./negotiator\");\n\nvar enums_1 = require(\"./enums\");\n\nvar baseconnection_1 = require(\"./baseconnection\");\n\nvar encodingQueue_1 = require(\"./encodingQueue\");\n/**\n * Wraps a DataChannel between two Peers.\n */\n\n\nvar DataConnection =\n/** @class */\nfunction (_super) {\n  __extends(DataConnection, _super);\n\n  function DataConnection(peerId, provider, options) {\n    var _this = _super.call(this, peerId, provider, options) || this;\n\n    _this.stringify = JSON.stringify;\n    _this.parse = JSON.parse;\n    _this._buffer = [];\n    _this._bufferSize = 0;\n    _this._buffering = false;\n    _this._chunkedData = {};\n    _this._encodingQueue = new encodingQueue_1.EncodingQueue();\n    _this.connectionId = _this.options.connectionId || DataConnection.ID_PREFIX + util_1.util.randomToken();\n    _this.label = _this.options.label || _this.connectionId;\n    _this.serialization = _this.options.serialization || enums_1.SerializationType.Binary;\n    _this.reliable = !!_this.options.reliable;\n\n    _this._encodingQueue.on('done', function (ab) {\n      _this._bufferedSend(ab);\n    });\n\n    _this._encodingQueue.on('error', function () {\n      logger_1.default.error(\"DC#\" + _this.connectionId + \": Error occured in encoding from blob to arraybuffer, close DC\");\n\n      _this.close();\n    });\n\n    _this._negotiator = new negotiator_1.Negotiator(_this);\n\n    _this._negotiator.startConnection(_this.options._payload || {\n      originator: true\n    });\n\n    return _this;\n  }\n\n  Object.defineProperty(DataConnection.prototype, \"type\", {\n    get: function get() {\n      return enums_1.ConnectionType.Data;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DataConnection.prototype, \"dataChannel\", {\n    get: function get() {\n      return this._dc;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DataConnection.prototype, \"bufferSize\", {\n    get: function get() {\n      return this._bufferSize;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /** Called by the Negotiator when the DataChannel is ready. */\n\n  DataConnection.prototype.initialize = function (dc) {\n    this._dc = dc;\n\n    this._configureDataChannel();\n  };\n\n  DataConnection.prototype._configureDataChannel = function () {\n    var _this = this;\n\n    if (!util_1.util.supports.binaryBlob || util_1.util.supports.reliable) {\n      this.dataChannel.binaryType = \"arraybuffer\";\n    }\n\n    this.dataChannel.onopen = function () {\n      logger_1.default.log(\"DC#\" + _this.connectionId + \" dc connection success\");\n      _this._open = true;\n\n      _this.emit(enums_1.ConnectionEventType.Open);\n    };\n\n    this.dataChannel.onmessage = function (e) {\n      logger_1.default.log(\"DC#\" + _this.connectionId + \" dc onmessage:\", e.data);\n\n      _this._handleDataMessage(e);\n    };\n\n    this.dataChannel.onclose = function () {\n      logger_1.default.log(\"DC#\" + _this.connectionId + \" dc closed for:\", _this.peer);\n\n      _this.close();\n    };\n  }; // Handles a DataChannel message.\n\n\n  DataConnection.prototype._handleDataMessage = function (_a) {\n    var _this = this;\n\n    var data = _a.data;\n    var datatype = data.constructor;\n    var isBinarySerialization = this.serialization === enums_1.SerializationType.Binary || this.serialization === enums_1.SerializationType.BinaryUTF8;\n    var deserializedData = data;\n\n    if (isBinarySerialization) {\n      if (datatype === Blob) {\n        // Datatype should never be blob\n        util_1.util.blobToArrayBuffer(data, function (ab) {\n          var unpackedData = util_1.util.unpack(ab);\n\n          _this.emit(enums_1.ConnectionEventType.Data, unpackedData);\n        });\n        return;\n      } else if (datatype === ArrayBuffer) {\n        deserializedData = util_1.util.unpack(data);\n      } else if (datatype === String) {\n        // String fallback for binary data for browsers that don't support binary yet\n        var ab = util_1.util.binaryStringToArrayBuffer(data);\n        deserializedData = util_1.util.unpack(ab);\n      }\n    } else if (this.serialization === enums_1.SerializationType.JSON) {\n      deserializedData = this.parse(data);\n    } // Check if we've chunked--if so, piece things back together.\n    // We're guaranteed that this isn't 0.\n\n\n    if (deserializedData.__peerData) {\n      this._handleChunk(deserializedData);\n\n      return;\n    }\n\n    _super.prototype.emit.call(this, enums_1.ConnectionEventType.Data, deserializedData);\n  };\n\n  DataConnection.prototype._handleChunk = function (data) {\n    var id = data.__peerData;\n    var chunkInfo = this._chunkedData[id] || {\n      data: [],\n      count: 0,\n      total: data.total\n    };\n    chunkInfo.data[data.n] = data.data;\n    chunkInfo.count++;\n    this._chunkedData[id] = chunkInfo;\n\n    if (chunkInfo.total === chunkInfo.count) {\n      // Clean up before making the recursive call to `_handleDataMessage`.\n      delete this._chunkedData[id]; // We've received all the chunks--time to construct the complete data.\n\n      var data_1 = new Blob(chunkInfo.data);\n\n      this._handleDataMessage({\n        data: data_1\n      });\n    }\n  };\n  /**\n   * Exposed functionality for users.\n   */\n\n  /** Allows user to close connection. */\n\n\n  DataConnection.prototype.close = function () {\n    this._buffer = [];\n    this._bufferSize = 0;\n    this._chunkedData = {};\n\n    if (this._negotiator) {\n      this._negotiator.cleanup();\n\n      this._negotiator = null;\n    }\n\n    if (this.provider) {\n      this.provider._removeConnection(this);\n\n      this.provider = null;\n    }\n\n    if (this.dataChannel) {\n      this.dataChannel.onopen = null;\n      this.dataChannel.onmessage = null;\n      this.dataChannel.onclose = null;\n      this._dc = null;\n    }\n\n    if (this._encodingQueue) {\n      this._encodingQueue.destroy();\n\n      this._encodingQueue.removeAllListeners();\n\n      this._encodingQueue = null;\n    }\n\n    if (!this.open) {\n      return;\n    }\n\n    this._open = false;\n\n    _super.prototype.emit.call(this, enums_1.ConnectionEventType.Close);\n  };\n  /** Allows user to send data. */\n\n\n  DataConnection.prototype.send = function (data, chunked) {\n    if (!this.open) {\n      _super.prototype.emit.call(this, enums_1.ConnectionEventType.Error, new Error(\"Connection is not open. You should listen for the `open` event before sending messages.\"));\n\n      return;\n    }\n\n    if (this.serialization === enums_1.SerializationType.JSON) {\n      this._bufferedSend(this.stringify(data));\n    } else if (this.serialization === enums_1.SerializationType.Binary || this.serialization === enums_1.SerializationType.BinaryUTF8) {\n      var blob = util_1.util.pack(data);\n\n      if (!chunked && blob.size > util_1.util.chunkedMTU) {\n        this._sendChunks(blob);\n\n        return;\n      }\n\n      if (!util_1.util.supports.binaryBlob) {\n        // We only do this if we really need to (e.g. blobs are not supported),\n        // because this conversion is costly.\n        this._encodingQueue.enque(blob);\n      } else {\n        this._bufferedSend(blob);\n      }\n    } else {\n      this._bufferedSend(data);\n    }\n  };\n\n  DataConnection.prototype._bufferedSend = function (msg) {\n    if (this._buffering || !this._trySend(msg)) {\n      this._buffer.push(msg);\n\n      this._bufferSize = this._buffer.length;\n    }\n  }; // Returns true if the send succeeds.\n\n\n  DataConnection.prototype._trySend = function (msg) {\n    var _this = this;\n\n    if (!this.open) {\n      return false;\n    }\n\n    if (this.dataChannel.bufferedAmount > DataConnection.MAX_BUFFERED_AMOUNT) {\n      this._buffering = true;\n      setTimeout(function () {\n        _this._buffering = false;\n\n        _this._tryBuffer();\n      }, 50);\n      return false;\n    }\n\n    try {\n      this.dataChannel.send(msg);\n    } catch (e) {\n      logger_1.default.error(\"DC#:\" + this.connectionId + \" Error when sending:\", e);\n      this._buffering = true;\n      this.close();\n      return false;\n    }\n\n    return true;\n  }; // Try to send the first message in the buffer.\n\n\n  DataConnection.prototype._tryBuffer = function () {\n    if (!this.open) {\n      return;\n    }\n\n    if (this._buffer.length === 0) {\n      return;\n    }\n\n    var msg = this._buffer[0];\n\n    if (this._trySend(msg)) {\n      this._buffer.shift();\n\n      this._bufferSize = this._buffer.length;\n\n      this._tryBuffer();\n    }\n  };\n\n  DataConnection.prototype._sendChunks = function (blob) {\n    var e_1, _a;\n\n    var blobs = util_1.util.chunk(blob);\n    logger_1.default.log(\"DC#\" + this.connectionId + \" Try to send \" + blobs.length + \" chunks...\");\n\n    try {\n      for (var blobs_1 = __values(blobs), blobs_1_1 = blobs_1.next(); !blobs_1_1.done; blobs_1_1 = blobs_1.next()) {\n        var blob_1 = blobs_1_1.value;\n        this.send(blob_1, true);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (blobs_1_1 && !blobs_1_1.done && (_a = blobs_1.return)) _a.call(blobs_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  DataConnection.prototype.handleMessage = function (message) {\n    var payload = message.payload;\n\n    switch (message.type) {\n      case enums_1.ServerMessageType.Answer:\n        this._negotiator.handleSDP(message.type, payload.sdp);\n\n        break;\n\n      case enums_1.ServerMessageType.Candidate:\n        this._negotiator.handleCandidate(payload.candidate);\n\n        break;\n\n      default:\n        logger_1.default.warn(\"Unrecognized message type:\", message.type, \"from peer:\", this.peer);\n        break;\n    }\n  };\n\n  DataConnection.ID_PREFIX = \"dc_\";\n  DataConnection.MAX_BUFFERED_AMOUNT = 8 * 1024 * 1024;\n  return DataConnection;\n}(baseconnection_1.BaseConnection);\n\nexports.DataConnection = DataConnection;\n},{\"./util\":\"BHXf\",\"./logger\":\"WOs9\",\"./negotiator\":\"HCdX\",\"./enums\":\"ZRYf\",\"./baseconnection\":\"tQFK\",\"./encodingQueue\":\"GGp6\"}],\"in7L\":[function(require,module,exports) {\n\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = require(\"./util\");\n\nvar logger_1 = __importDefault(require(\"./logger\"));\n\nvar API =\n/** @class */\nfunction () {\n  function API(_options) {\n    this._options = _options;\n  }\n\n  API.prototype._buildUrl = function (method) {\n    var protocol = this._options.secure ? \"https://\" : \"http://\";\n    var url = protocol + this._options.host + \":\" + this._options.port + this._options.path + this._options.key + \"/\" + method;\n    var queryString = \"?ts=\" + new Date().getTime() + \"\" + Math.random();\n    url += queryString;\n    return url;\n  };\n  /** Get a unique ID from the server via XHR and initialize with it. */\n\n\n  API.prototype.retrieveId = function () {\n    return __awaiter(this, void 0, Promise, function () {\n      var url, response, error_1, pathError;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            url = this._buildUrl(\"id\");\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , fetch(url)];\n\n          case 2:\n            response = _a.sent();\n\n            if (response.status !== 200) {\n              throw new Error(\"Error. Status:\" + response.status);\n            }\n\n            return [2\n            /*return*/\n            , response.text()];\n\n          case 3:\n            error_1 = _a.sent();\n            logger_1.default.error(\"Error retrieving ID\", error_1);\n            pathError = \"\";\n\n            if (this._options.path === \"/\" && this._options.host !== util_1.util.CLOUD_HOST) {\n              pathError = \" If you passed in a `path` to your self-hosted PeerServer, \" + \"you'll also need to pass in that same path when creating a new \" + \"Peer.\";\n            }\n\n            throw new Error(\"Could not get an ID from the server.\" + pathError);\n\n          case 4:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n  /** @deprecated */\n\n\n  API.prototype.listAllPeers = function () {\n    return __awaiter(this, void 0, Promise, function () {\n      var url, response, helpfulError, error_2;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            url = this._buildUrl(\"peers\");\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , fetch(url)];\n\n          case 2:\n            response = _a.sent();\n\n            if (response.status !== 200) {\n              if (response.status === 401) {\n                helpfulError = \"\";\n\n                if (this._options.host === util_1.util.CLOUD_HOST) {\n                  helpfulError = \"It looks like you're using the cloud server. You can email \" + \"team@peerjs.com to enable peer listing for your API key.\";\n                } else {\n                  helpfulError = \"You need to enable `allow_discovery` on your self-hosted \" + \"PeerServer to use this feature.\";\n                }\n\n                throw new Error(\"It doesn't look like you have permission to list peers IDs. \" + helpfulError);\n              }\n\n              throw new Error(\"Error. Status:\" + response.status);\n            }\n\n            return [2\n            /*return*/\n            , response.json()];\n\n          case 3:\n            error_2 = _a.sent();\n            logger_1.default.error(\"Error retrieving list peers\", error_2);\n            throw new Error(\"Could not get list peers from the server.\" + error_2);\n\n          case 4:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  return API;\n}();\n\nexports.API = API;\n},{\"./util\":\"BHXf\",\"./logger\":\"WOs9\"}],\"Hxpd\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar eventemitter3_1 = require(\"eventemitter3\");\n\nvar util_1 = require(\"./util\");\n\nvar logger_1 = __importDefault(require(\"./logger\"));\n\nvar socket_1 = require(\"./socket\");\n\nvar mediaconnection_1 = require(\"./mediaconnection\");\n\nvar dataconnection_1 = require(\"./dataconnection\");\n\nvar enums_1 = require(\"./enums\");\n\nvar api_1 = require(\"./api\");\n\nvar PeerOptions =\n/** @class */\nfunction () {\n  function PeerOptions() {}\n\n  return PeerOptions;\n}();\n/**\n * A peer who can initiate connections with other peers.\n */\n\n\nvar Peer =\n/** @class */\nfunction (_super) {\n  __extends(Peer, _super);\n\n  function Peer(id, options) {\n    var _this = _super.call(this) || this;\n\n    _this._id = null;\n    _this._lastServerId = null; // States.\n\n    _this._destroyed = false; // Connections have been killed\n\n    _this._disconnected = false; // Connection to PeerServer killed but P2P connections still active\n\n    _this._open = false; // Sockets and such are not yet open.\n\n    _this._connections = new Map(); // All connections for this peer.\n\n    _this._lostMessages = new Map(); // src => [list of messages]\n\n    var userId; // Deal with overloading\n\n    if (id && id.constructor == Object) {\n      options = id;\n    } else if (id) {\n      userId = id.toString();\n    } // Configurize options\n\n\n    options = __assign({\n      debug: 0,\n      host: util_1.util.CLOUD_HOST,\n      port: util_1.util.CLOUD_PORT,\n      path: \"/\",\n      key: Peer.DEFAULT_KEY,\n      token: util_1.util.randomToken(),\n      config: util_1.util.defaultConfig\n    }, options);\n    _this._options = options; // Detect relative URL host.\n\n    if (_this._options.host === \"/\") {\n      _this._options.host = window.location.hostname;\n    } // Set path correctly.\n\n\n    if (_this._options.path) {\n      if (_this._options.path[0] !== \"/\") {\n        _this._options.path = \"/\" + _this._options.path;\n      }\n\n      if (_this._options.path[_this._options.path.length - 1] !== \"/\") {\n        _this._options.path += \"/\";\n      }\n    } // Set whether we use SSL to same as current host\n\n\n    if (_this._options.secure === undefined && _this._options.host !== util_1.util.CLOUD_HOST) {\n      _this._options.secure = util_1.util.isSecure();\n    } else if (_this._options.host == util_1.util.CLOUD_HOST) {\n      _this._options.secure = true;\n    } // Set a custom log function if present\n\n\n    if (_this._options.logFunction) {\n      logger_1.default.setLogFunction(_this._options.logFunction);\n    }\n\n    logger_1.default.logLevel = _this._options.debug || 0;\n    _this._api = new api_1.API(options);\n    _this._socket = _this._createServerConnection(); // Sanity checks\n    // Ensure WebRTC supported\n\n    if (!util_1.util.supports.audioVideo && !util_1.util.supports.data) {\n      _this._delayedAbort(enums_1.PeerErrorType.BrowserIncompatible, \"The current browser does not support WebRTC\");\n\n      return _this;\n    } // Ensure alphanumeric id\n\n\n    if (!!userId && !util_1.util.validateId(userId)) {\n      _this._delayedAbort(enums_1.PeerErrorType.InvalidID, \"ID \\\"\" + userId + \"\\\" is invalid\");\n\n      return _this;\n    }\n\n    if (userId) {\n      _this._initialize(userId);\n    } else {\n      _this._api.retrieveId().then(function (id) {\n        return _this._initialize(id);\n      }).catch(function (error) {\n        return _this._abort(enums_1.PeerErrorType.ServerError, error);\n      });\n    }\n\n    return _this;\n  }\n\n  Object.defineProperty(Peer.prototype, \"id\", {\n    get: function get() {\n      return this._id;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Peer.prototype, \"options\", {\n    get: function get() {\n      return this._options;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Peer.prototype, \"open\", {\n    get: function get() {\n      return this._open;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Peer.prototype, \"socket\", {\n    get: function get() {\n      return this._socket;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Peer.prototype, \"connections\", {\n    /**\n     * @deprecated\n     * Return type will change from Object to Map<string,[]>\n     */\n    get: function get() {\n      var e_1, _a;\n\n      var plainConnections = Object.create(null);\n\n      try {\n        for (var _b = __values(this._connections), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var _d = __read(_c.value, 2),\n              k = _d[0],\n              v = _d[1];\n\n          plainConnections[k] = v;\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n\n      return plainConnections;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Peer.prototype, \"destroyed\", {\n    get: function get() {\n      return this._destroyed;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Peer.prototype, \"disconnected\", {\n    get: function get() {\n      return this._disconnected;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Peer.prototype._createServerConnection = function () {\n    var _this = this;\n\n    var socket = new socket_1.Socket(this._options.secure, this._options.host, this._options.port, this._options.path, this._options.key, this._options.pingInterval);\n    socket.on(enums_1.SocketEventType.Message, function (data) {\n      _this._handleMessage(data);\n    });\n    socket.on(enums_1.SocketEventType.Error, function (error) {\n      _this._abort(enums_1.PeerErrorType.SocketError, error);\n    });\n    socket.on(enums_1.SocketEventType.Disconnected, function () {\n      if (_this.disconnected) {\n        return;\n      }\n\n      _this.emitError(enums_1.PeerErrorType.Network, \"Lost connection to server.\");\n\n      _this.disconnect();\n    });\n    socket.on(enums_1.SocketEventType.Close, function () {\n      if (_this.disconnected) {\n        return;\n      }\n\n      _this._abort(enums_1.PeerErrorType.SocketClosed, \"Underlying socket is already closed.\");\n    });\n    return socket;\n  };\n  /** Initialize a connection with the server. */\n\n\n  Peer.prototype._initialize = function (id) {\n    this._id = id;\n    this.socket.start(id, this._options.token);\n  };\n  /** Handles messages from the server. */\n\n\n  Peer.prototype._handleMessage = function (message) {\n    var e_2, _a;\n\n    var type = message.type;\n    var payload = message.payload;\n    var peerId = message.src;\n\n    switch (type) {\n      case enums_1.ServerMessageType.Open:\n        // The connection to the server is open.\n        this._lastServerId = this.id;\n        this._open = true;\n        this.emit(enums_1.PeerEventType.Open, this.id);\n        break;\n\n      case enums_1.ServerMessageType.Error:\n        // Server error.\n        this._abort(enums_1.PeerErrorType.ServerError, payload.msg);\n\n        break;\n\n      case enums_1.ServerMessageType.IdTaken:\n        // The selected ID is taken.\n        this._abort(enums_1.PeerErrorType.UnavailableID, \"ID \\\"\" + this.id + \"\\\" is taken\");\n\n        break;\n\n      case enums_1.ServerMessageType.InvalidKey:\n        // The given API key cannot be found.\n        this._abort(enums_1.PeerErrorType.InvalidKey, \"API KEY \\\"\" + this._options.key + \"\\\" is invalid\");\n\n        break;\n\n      case enums_1.ServerMessageType.Leave:\n        // Another peer has closed its connection to this peer.\n        logger_1.default.log(\"Received leave message from \" + peerId);\n\n        this._cleanupPeer(peerId);\n\n        this._connections.delete(peerId);\n\n        break;\n\n      case enums_1.ServerMessageType.Expire:\n        // The offer sent to a peer has expired without response.\n        this.emitError(enums_1.PeerErrorType.PeerUnavailable, \"Could not connect to peer \" + peerId);\n        break;\n\n      case enums_1.ServerMessageType.Offer:\n        {\n          // we should consider switching this to CALL/CONNECT, but this is the least breaking option.\n          var connectionId = payload.connectionId;\n          var connection = this.getConnection(peerId, connectionId);\n\n          if (connection) {\n            connection.close();\n            logger_1.default.warn(\"Offer received for existing Connection ID:\" + connectionId);\n          } // Create a new connection.\n\n\n          if (payload.type === enums_1.ConnectionType.Media) {\n            connection = new mediaconnection_1.MediaConnection(peerId, this, {\n              connectionId: connectionId,\n              _payload: payload,\n              metadata: payload.metadata\n            });\n\n            this._addConnection(peerId, connection);\n\n            this.emit(enums_1.PeerEventType.Call, connection);\n          } else if (payload.type === enums_1.ConnectionType.Data) {\n            connection = new dataconnection_1.DataConnection(peerId, this, {\n              connectionId: connectionId,\n              _payload: payload,\n              metadata: payload.metadata,\n              label: payload.label,\n              serialization: payload.serialization,\n              reliable: payload.reliable\n            });\n\n            this._addConnection(peerId, connection);\n\n            this.emit(enums_1.PeerEventType.Connection, connection);\n          } else {\n            logger_1.default.warn(\"Received malformed connection type:\" + payload.type);\n            return;\n          } // Find messages.\n\n\n          var messages = this._getMessages(connectionId);\n\n          try {\n            for (var messages_1 = __values(messages), messages_1_1 = messages_1.next(); !messages_1_1.done; messages_1_1 = messages_1.next()) {\n              var message_1 = messages_1_1.value;\n              connection.handleMessage(message_1);\n            }\n          } catch (e_2_1) {\n            e_2 = {\n              error: e_2_1\n            };\n          } finally {\n            try {\n              if (messages_1_1 && !messages_1_1.done && (_a = messages_1.return)) _a.call(messages_1);\n            } finally {\n              if (e_2) throw e_2.error;\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          if (!payload) {\n            logger_1.default.warn(\"You received a malformed message from \" + peerId + \" of type \" + type);\n            return;\n          }\n\n          var connectionId = payload.connectionId;\n          var connection = this.getConnection(peerId, connectionId);\n\n          if (connection && connection.peerConnection) {\n            // Pass it on.\n            connection.handleMessage(message);\n          } else if (connectionId) {\n            // Store for possible later use\n            this._storeMessage(connectionId, message);\n          } else {\n            logger_1.default.warn(\"You received an unrecognized message:\", message);\n          }\n\n          break;\n        }\n    }\n  };\n  /** Stores messages without a set up connection, to be claimed later. */\n\n\n  Peer.prototype._storeMessage = function (connectionId, message) {\n    if (!this._lostMessages.has(connectionId)) {\n      this._lostMessages.set(connectionId, []);\n    }\n\n    this._lostMessages.get(connectionId).push(message);\n  };\n  /** Retrieve messages from lost message store */\n  //TODO Change it to private\n\n\n  Peer.prototype._getMessages = function (connectionId) {\n    var messages = this._lostMessages.get(connectionId);\n\n    if (messages) {\n      this._lostMessages.delete(connectionId);\n\n      return messages;\n    }\n\n    return [];\n  };\n  /**\n   * Returns a DataConnection to the specified peer. See documentation for a\n   * complete list of options.\n   */\n\n\n  Peer.prototype.connect = function (peer, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (this.disconnected) {\n      logger_1.default.warn(\"You cannot connect to a new Peer because you called \" + \".disconnect() on this Peer and ended your connection with the \" + \"server. You can create a new Peer to reconnect, or call reconnect \" + \"on this peer if you believe its ID to still be available.\");\n      this.emitError(enums_1.PeerErrorType.Disconnected, \"Cannot connect to new Peer after disconnecting from server.\");\n      return;\n    }\n\n    var dataConnection = new dataconnection_1.DataConnection(peer, this, options);\n\n    this._addConnection(peer, dataConnection);\n\n    return dataConnection;\n  };\n  /**\n   * Returns a MediaConnection to the specified peer. See documentation for a\n   * complete list of options.\n   */\n\n\n  Peer.prototype.call = function (peer, stream, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (this.disconnected) {\n      logger_1.default.warn(\"You cannot connect to a new Peer because you called \" + \".disconnect() on this Peer and ended your connection with the \" + \"server. You can create a new Peer to reconnect.\");\n      this.emitError(enums_1.PeerErrorType.Disconnected, \"Cannot connect to new Peer after disconnecting from server.\");\n      return;\n    }\n\n    if (!stream) {\n      logger_1.default.error(\"To call a peer, you must provide a stream from your browser's `getUserMedia`.\");\n      return;\n    }\n\n    options._stream = stream;\n    var mediaConnection = new mediaconnection_1.MediaConnection(peer, this, options);\n\n    this._addConnection(peer, mediaConnection);\n\n    return mediaConnection;\n  };\n  /** Add a data/media connection to this peer. */\n\n\n  Peer.prototype._addConnection = function (peerId, connection) {\n    logger_1.default.log(\"add connection \" + connection.type + \":\" + connection.connectionId + \" to peerId:\" + peerId);\n\n    if (!this._connections.has(peerId)) {\n      this._connections.set(peerId, []);\n    }\n\n    this._connections.get(peerId).push(connection);\n  }; //TODO should be private\n\n\n  Peer.prototype._removeConnection = function (connection) {\n    var connections = this._connections.get(connection.peer);\n\n    if (connections) {\n      var index = connections.indexOf(connection);\n\n      if (index !== -1) {\n        connections.splice(index, 1);\n      }\n    } //remove from lost messages\n\n\n    this._lostMessages.delete(connection.connectionId);\n  };\n  /** Retrieve a data/media connection for this peer. */\n\n\n  Peer.prototype.getConnection = function (peerId, connectionId) {\n    var e_3, _a;\n\n    var connections = this._connections.get(peerId);\n\n    if (!connections) {\n      return null;\n    }\n\n    try {\n      for (var connections_1 = __values(connections), connections_1_1 = connections_1.next(); !connections_1_1.done; connections_1_1 = connections_1.next()) {\n        var connection = connections_1_1.value;\n\n        if (connection.connectionId === connectionId) {\n          return connection;\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (connections_1_1 && !connections_1_1.done && (_a = connections_1.return)) _a.call(connections_1);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    return null;\n  };\n\n  Peer.prototype._delayedAbort = function (type, message) {\n    var _this = this;\n\n    setTimeout(function () {\n      _this._abort(type, message);\n    }, 0);\n  };\n  /**\n   * Emits an error message and destroys the Peer.\n   * The Peer is not destroyed if it's in a disconnected state, in which case\n   * it retains its disconnected state and its existing connections.\n   */\n\n\n  Peer.prototype._abort = function (type, message) {\n    logger_1.default.error(\"Aborting!\");\n    this.emitError(type, message);\n\n    if (!this._lastServerId) {\n      this.destroy();\n    } else {\n      this.disconnect();\n    }\n  };\n  /** Emits a typed error message. */\n\n\n  Peer.prototype.emitError = function (type, err) {\n    logger_1.default.error(\"Error:\", err);\n    var error;\n\n    if (typeof err === \"string\") {\n      error = new Error(err);\n    } else {\n      error = err;\n    }\n\n    error.type = type;\n    this.emit(enums_1.PeerEventType.Error, error);\n  };\n  /**\n   * Destroys the Peer: closes all active connections as well as the connection\n   *  to the server.\n   * Warning: The peer can no longer create or accept connections after being\n   *  destroyed.\n   */\n\n\n  Peer.prototype.destroy = function () {\n    if (this.destroyed) {\n      return;\n    }\n\n    logger_1.default.log(\"Destroy peer with ID:\" + this.id);\n    this.disconnect();\n\n    this._cleanup();\n\n    this._destroyed = true;\n    this.emit(enums_1.PeerEventType.Close);\n  };\n  /** Disconnects every connection on this peer. */\n\n\n  Peer.prototype._cleanup = function () {\n    var e_4, _a;\n\n    try {\n      for (var _b = __values(this._connections.keys()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var peerId = _c.value;\n\n        this._cleanupPeer(peerId);\n\n        this._connections.delete(peerId);\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    this.socket.removeAllListeners();\n  };\n  /** Closes all connections to this peer. */\n\n\n  Peer.prototype._cleanupPeer = function (peerId) {\n    var e_5, _a;\n\n    var connections = this._connections.get(peerId);\n\n    if (!connections) return;\n\n    try {\n      for (var connections_2 = __values(connections), connections_2_1 = connections_2.next(); !connections_2_1.done; connections_2_1 = connections_2.next()) {\n        var connection = connections_2_1.value;\n        connection.close();\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (connections_2_1 && !connections_2_1.done && (_a = connections_2.return)) _a.call(connections_2);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n  };\n  /**\n   * Disconnects the Peer's connection to the PeerServer. Does not close any\n   *  active connections.\n   * Warning: The peer can no longer create or accept connections after being\n   *  disconnected. It also cannot reconnect to the server.\n   */\n\n\n  Peer.prototype.disconnect = function () {\n    if (this.disconnected) {\n      return;\n    }\n\n    var currentId = this.id;\n    logger_1.default.log(\"Disconnect peer with ID:\" + currentId);\n    this._disconnected = true;\n    this._open = false;\n    this.socket.close();\n    this._lastServerId = currentId;\n    this._id = null;\n    this.emit(enums_1.PeerEventType.Disconnected, currentId);\n  };\n  /** Attempts to reconnect with the same ID. */\n\n\n  Peer.prototype.reconnect = function () {\n    if (this.disconnected && !this.destroyed) {\n      logger_1.default.log(\"Attempting reconnection to server with ID \" + this._lastServerId);\n      this._disconnected = false;\n\n      this._initialize(this._lastServerId);\n    } else if (this.destroyed) {\n      throw new Error(\"This peer cannot reconnect to the server. It has already been destroyed.\");\n    } else if (!this.disconnected && !this.open) {\n      // Do nothing. We're still connecting the first time.\n      logger_1.default.error(\"In a hurry? We're still trying to make the initial connection!\");\n    } else {\n      throw new Error(\"Peer \" + this.id + \" cannot reconnect because it is not disconnected from the server!\");\n    }\n  };\n  /**\n   * Get a list of available peer IDs. If you're running your own server, you'll\n   * want to set allow_discovery: true in the PeerServer options. If you're using\n   * the cloud server, email team@peerjs.com to get the functionality enabled for\n   * your key.\n   */\n\n\n  Peer.prototype.listAllPeers = function (cb) {\n    var _this = this;\n\n    if (cb === void 0) {\n      cb = function cb(_) {};\n    }\n\n    this._api.listAllPeers().then(function (peers) {\n      return cb(peers);\n    }).catch(function (error) {\n      return _this._abort(enums_1.PeerErrorType.ServerError, error);\n    });\n  };\n\n  Peer.DEFAULT_KEY = \"peerjs\";\n  return Peer;\n}(eventemitter3_1.EventEmitter);\n\nexports.Peer = Peer;\n},{\"eventemitter3\":\"JJlS\",\"./util\":\"BHXf\",\"./logger\":\"WOs9\",\"./socket\":\"wJlv\",\"./mediaconnection\":\"dbHP\",\"./dataconnection\":\"GBTQ\",\"./enums\":\"ZRYf\",\"./api\":\"in7L\"}],\"iTK6\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = require(\"./util\");\n\nvar peer_1 = require(\"./peer\");\n\nexports.peerjs = {\n  Peer: peer_1.Peer,\n  util: util_1.util\n};\nexports.default = peer_1.Peer;\nwindow.peerjs = exports.peerjs;\n/** @deprecated Should use peerjs namespace */\n\nwindow.Peer = peer_1.Peer;\n},{\"./util\":\"BHXf\",\"./peer\":\"Hxpd\"}]},{},[\"iTK6\"], null)\n","import Peer from \"./peerjs\"\n\nclass Depth2Web{\n\n    constructor(addr){\n\n        this.imgWidth = 320;\n        this.imgHeight = 240;\n\n        this.depthBlob = [];\n        this.colorBlob = [];\n\n        this.depthURL = [];\n        this.colorURL = [];\n\n        this.peer_net = {host: \"localhost\", port: 8000, path: \"/\"};\n        this.peer_id = \"depth2web\";\n        this.connection = null;\n\n        if(addr){\n            this.peer_net.host = addr;\n        }\n\n        this.peer = new Peer(this.peer_net);\n\n        this.peer.on(\"open\", function(id){\n            console.log(\"open connection with peer id: \", id);\n\n            this.connect();\n        }.bind(this));\n\n        this.peer.on(\"connection\", function(conn){\n            conn.on(\"open\", function(){\n                console.log(\"connected to peer server\");\n            })\n        });\n\n    }\n\n    connect(){\n        this.connection = this.peer.connect(this.peer_id);\n\n        this.connection.on(\"open\", function(data){\n            console.log(\"open data connection with peer server\");\n        });\n\n        this.connection.on(\"data\", function(sent){\n\n            if(sent.event == \"depth\"){\n                this.depthBlob[sent.id] = new Blob([sent.data], {type: 'image/webp'});\n                this.depthURL[sent.id] = URL.createObjectURL(this.depthBlob[sent.id]);\n            }\n\n            if(sent.event == \"color\"){\n                this.colorBlob[sent.id] = new Blob([sent.data], {type: 'image/webp'});\n                this.colorURL[sent.id] = URL.createObjectURL(this.colorBlob[sent.id]);\n            }\n        }.bind(this));\n    }\n\n    deviceCount(){\n\n    }\n\n    depthCount(){\n        return this.depthURL.length;\n    }\n\n    colorCount(){\n        return this.colorURL.length;\n    }\n\n    getDepthBlob(){\n        if(this.depthBlob){\n            return this.depthBlob;\n        }else{\n            console.log(\"depth blob is not received\");\n        }\n    }\n\n    getDepthURL(){\n        if(this.depthURL){\n            return this.depthURL;\n        }else{\n            console.log(\"depth url is not received\");\n        }\n    }\n\n    displayDepthImage(){\n        if(document.getElementById('depthImg') == null && this.depthURL != null){\n            document.body.append(this.depthImg);\n        }\n    }\n\n    getColorBlob(){\n        if(this.colorBlob){\n            return this.colorBlob;\n        }else{\n            return \"color blob is not received\";\n        }\n    }\n\n    getColorURL(){\n        if(this.colorURL){\n            return this.colorURL;\n        }else{\n            return \"color url is not received\";\n        }\n    }\n\n    displayColorImage(){\n        if(document.getElementById('colorImg') == null && this.colorURL != null){\n            document.body.append(this.colorImg);\n        }\n    }\n\n}\n\nwindow.Depth2Web = Depth2Web;","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}