{"version":3,"sources":["peerjs.js","depth2web-client.js"],"names":["parcelRequire","modules","cache","entry","globalName","previousRequire","error","nodeRequire","require","newRequire","name","jumped","currentRequire","err","Error","code","localRequire","resolve","x","module","Module","call","exports","isParcelRequire","moduleName","id","bundle","parent","register","i","length","e","mainExports","define","amd","binaryFeatures","useBlobBuilder","Blob","useArrayBufferView","Uint8Array","size","BlobBuilder","BufferBuilder","_pieces","_parts","window","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","prototype","append","data","push","flush","buf","buffer","getBuffer","builder","ii","getBlob","BinaryPack","unpack","unpacker","Unpacker","pack","packer","Packer","index","dataBuffer","dataView","byteLength","bufferBuilder","_utf8Replace","m","charCodeAt","type","unpack_uint8","unpack_raw","unpack_string","unpack_array","unpack_map","undefined","unpack_float","unpack_double","unpack_uint16","unpack_uint32","unpack_uint64","unpack_int8","unpack_int16","unpack_int32","unpack_int64","byte","bytes","read","uint16","uint32","uint64","uint8","Math","pow","slice","c","str","String","fromCharCode","objects","Array","map","key","value","exp","h32","l32","j","subarray","pack_string","floor","pack_integer","pack_double","constructor","pack_array","File","pack_bin","ArrayBuffer","Object","toString","startsWith","pack_object","Date","toBinaryPack","blob","pack_uint8","pack_uint16","pack_uint32","utf8Length","replace","ary","num","pack_int8","pack_int16","pack_int32","pack_int64","pack_uint64","sign","log","LN2","frac0","frac1","b32","obj","keys","prop","hasOwnProperty","n","high","low","_typeof","Symbol","iterator","defineProperty","extractVersion","wrapPeerConnectionEvent","eventNameToWrap","wrapper","RTCPeerConnection","proto","nativeAddEventListener","addEventListener","nativeEventName","cb","apply","arguments","wrappedCallback","modifiedEvent","_eventMap","nativeRemoveEventListener","removeEventListener","unwrappedCb","get","set","enumerable","configurable","disableLog","bool","logDisabled_","disableWarnings","deprecationWarnings_","console","deprecated","oldMethod","newMethod","warn","detectBrowser","navigator","result","browser","version","mozGetUserMedia","userAgent","webkitGetUserMedia","isSecureContext","webkitRTCPeerConnection","RTCIceGatherer","mediaDevices","match","supportsUnifiedPlan","RTCRtpTransceiver","compactObject","isObject","reduce","accumulator","isObj","isEmptyObject","assign","_defineProperty","writable","walkStats","filterStats","track","outbound","streamStatsType","filteredResult","Map","trackStats","forEach","trackIdentifier","trackStat","stats","trackId","uastring","expr","pos","parseInt","val","base","resultSet","has","endsWith","shimGetUserMedia","browserDetails","utils","constraintsToChrome_","mandatory","optional","cc","r","ideal","exact","min","max","oldname_","prefix","charAt","toUpperCase","oc","mix","advanced","concat","shimConstraints_","constraints","func","JSON","parse","stringify","audio","remap","a","b","video","face","facingMode","getSupportedFacingModeLies","matches","getSupportedConstraints","enumerateDevices","then","devices","dev","filter","d","kind","find","some","label","toLowerCase","includes","deviceId","logging","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","getUserMedia","onSuccess","onError","bind","origGetUserMedia","cs","stream","getAudioTracks","getVideoTracks","getTracks","stop","DOMException","Promise","reject","_interopRequireWildcard","__esModule","default","_getRequireWildcardCache","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","desc","WeakMap","shimGetDisplayMedia","getSourceId","getDisplayMedia","sourceId","widthSpecified","width","heightSpecified","height","frameRateSpecified","frameRate","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","shimMediaStream","MediaStream","webkitMediaStream","shimOnTrack","transceiver","receiver","_ontrack","f","origSetRemoteDescription","setRemoteDescription","_this","_ontrackpoly","te","getReceivers","event","Event","streams","dispatchEvent","shimGetSendersWithDtmf","shimSenderWithDtmf","pc","dtmf","_dtmf","createDTMFSender","_pc","getSenders","_senders","origAddTrack","addTrack","sender","origRemoveTrack","removeTrack","idx","indexOf","splice","origAddStream","addStream","_this2","origRemoveStream","removeStream","_this3","s","RTCRtpSender","origGetSenders","_this4","senders","shimGetStats","origGetStats","getStats","_this5","selector","onSucc","onErr","fixChromeStats_","response","standardReport","reports","report","standardStats","timestamp","localcandidate","remotecandidate","names","stat","makeMapStats","shimSenderReceiverGetStats","RTCRtpReceiver","_this6","origGetReceivers","_this7","receivers","srcElement","MediaStreamTrack","shimAddTrackRemoveTrackWithNative","shimAddTrackRemoveTrack","origGetLocalStreams","getLocalStreams","_this11","nativeStreams","_reverseStreams","_this12","_streams","alreadyExists","newStream","replaceInternalStreamId","description","sdp","internalId","externalStream","internalStream","RegExp","RTCSessionDescription","_this13","signalingState","t","oldStream","method","nativeMethod","methodObj","_this14","args","isLegacyCall","origSetLocalDescription","setLocalDescription","replaceExternalStreamId","origLocalDescription","_this15","isLocal","streamid","hasTrack","shimPeerConnection","RTCIceCandidate","nativeAddIceCandidate","addIceCandidate","candidate","fixNegotiationNeeded","target","_getusermedia","_getdisplaymedia","_this8","_shimmedLocalStreams","streamId","_this9","existingSenders","newSenders","newSender","_this10","filterIceServers","iceServers","edgeVersion","hasTurn","server","urls","url","isString","validTurn","SDPUtils","random","substr","localCName","generateIdentifier","splitLines","trim","split","line","splitSections","parts","part","getDescription","sections","getMediaSections","shift","matchPrefix","parseCandidate","foundation","substring","component","protocol","priority","ip","address","port","relatedAddress","relatedPort","tcpType","ufrag","usernameFragment","writeCandidate","join","parseIceOptions","parseRtpMap","parsed","payloadType","clockRate","channels","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","direction","uri","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","parameters","params","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","parseSsrcGroup","semantics","ssrcs","getMid","mediaSection","mid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","role","fingerprints","writeDtlsParameters","setupType","fp","getIceParameters","iceParameters","password","writeIceParameters","parseRtpParameters","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","caps","maxptime","extension","parseRtpEncodingParameters","encodingParameters","secondarySsrc","hasRed","hasUlpfec","primarySsrc","flows","apt","encParam","codecPayloadType","rtx","fec","mechanism","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","remoteSsrc","cname","rsize","reducedSize","compound","mux","parseMsid","spec","planB","msidParts","parseSctpDescription","maxMessageSize","parseMLine","maxSizeLine","isNaN","sctpPort","fmt","sctpMapLines","writeSctpDescription","media","sctp","output","generateSessionId","writeSessionBoilerplate","sessId","sessVer","sessUser","sessionId","writeMediaSection","iceGatherer","getLocalParameters","dtlsTransport","rtpSender","rtpReceiver","msid","sendEncodingParameters","getDirection","getKind","isRejected","parseOLine","username","sessionVersion","netType","addressType","isValidSDP","dtlsRole","_initialTrackId","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","findCodecByPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","rCodec","lHeaderExtension","rHeaderExtension","isActionAllowedInSignalingState","action","offer","answer","maybeAddCandidate","iceTransport","alreadyAdded","getRemoteCandidates","remoteCandidate","addRemoteCandidate","makeError","NotSupportedError","InvalidAccessError","TypeError","OperationError","addTrackToStreamAndFireEvent","MediaStreamTrackEvent","fireAddTrack","trackEvent","setTimeout","_dispatchEvent","config","_eventTarget","document","createDocumentFragment","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","_localDescription","_remoteDescription","iceConnectionState","connectionState","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","_iceGatherers","iceCandidatePoolSize","gatherPolicy","_config","transceivers","_sdpSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","_emitGatheringStateChange","getConfiguration","getRemoteStreams","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","clonedStream","clone","clonedTrack","enabled","_createIceGatherer","sdpMLineIndex","bufferedCandidateEvents","bufferCandidates","end","state","_gather","onlocalcandidate","evt","sdpMid","cand","serializedCandidate","toJSON","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_disposeIceAndDtlsTransports","_transceive","send","recv","encodings","p","receive","isIceLite","rejected","remoteIceParameters","remoteDtlsParameters","start","_updateSignalingState","receiverList","iceOptions","remoteMsid","isComplete","cands","setTransport","setRemoteCandidates","getCapabilities","isNewTrack","nativeTrack","sid","item","close","newState","states","closed","checking","connected","completed","disconnected","failed","new","connecting","createOffer","numAudioTracks","numVideoTracks","offerOptions","offerToReceiveAudio","offerToReceiveVideo","remoteCodec","hdrExt","rHdrExt","getLocalCandidates","createAnswer","mediaSectionsInOffer","localTrack","candidateString","senderOrReceiver","promises","all","allStats","results","ortcObjectName","nativeGetstats","nativeStats","mapStats","fixStatsType","inboundrtp","outboundrtp","candidatepair","methods","catch","origMSTEnabled","ev","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","_rtcpeerconnectionShim","_filtericeservers","shimReplaceTrack","replaceTrack","setTrack","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","preferredMediaSource","mediaSource","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","nativeGetStats","shimSenderGetStats","shimReceiverGetStats","shimRemoveStream","shimRTCDataChannel","DataChannel","RTCDataChannel","shimAddTransceiver","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","test","rid","parseFloat","scaleResolutionDownBy","RangeError","maxFramerate","getParameters","setParameters","shimCreateOffer","origCreateOffer","_arguments","finally","shimCreateAnswer","origCreateAnswer","_arguments2","shimLocalStreamsAPI","_localStreams","_addTrack","tracks","shimRemoteStreamsAPI","_remoteStreams","_onaddstream","_onaddstreampoly","shimCallbacksAPI","successCallback","failureCallback","options","promise","withCallback","_getUserMedia","shimConstraints","errcb","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","newIceServers","generateCertificate","shimTrackEventTransceiver","shimCreateOfferLegacy","audioTransceiver","getTransceivers","setDirection","videoTransceiver","shimRTCIceCandidate","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","_sdp","augmentedCandidate","shimMaxMessageSize","_sctp","sctpInDescription","sdpSemantics","mLine","isFirefox","getRemoteFirefoxVersion","canSendMMS","remoteIsFirefox","canSendMaxMessageSize","getCanSendMaxMessageSize","remoteMMS","getMaxMessageSize","Number","POSITIVE_INFINITY","shimSendThrowTypeError","wrapDcSend","dc","origDataChannelSend","readyState","origCreateDataChannel","createDataChannel","dataChannel","channel","shimConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","newEvent","removeAllowExtmapMixed","nativeSRD","adapterFactory","shimChrome","shimFirefox","shimEdge","shimSafari","adapter","commonShim","chromeShim","browserShim","firefoxShim","edgeShim","safariShim","_adapter_factory","_default","__importDefault","mod","webrtc_adapter_1","webRTCAdapter","adapter_1","Supports","class_1","isIOS","platform","supportedBrowsers","minFirefoxVersion","minChromeVersion","minSafariVersion","isWebRTCSupported","isBrowserSupported","getBrowser","getVersion","isUnifiedPlanSupported","tempPc","supported","__importStar","k","supports_1","DEFAULT_CONFIG","credential","util","CLOUD_HOST","CLOUD_PORT","chunkedBrowsers","Chrome","chrome","chunkedMTU","defaultConfig","browserVersion","supports","webRTC","audioVideo","binaryBlob","reliable","ordered","binaryType","_dataCount","noop","validateId","chunk","chunks","total","ceil","__peerData","blobToArrayBuffer","fr","FileReader","onload","readAsArrayBuffer","binaryStringToArrayBuffer","binary","byteArray","randomToken","isSecure","location","Events","EE","fn","context","once","addListener","emitter","listener","_events","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","getOwnPropertySymbols","listeners","handlers","l","ee","listenerCount","emit","a1","a2","a3","a4","a5","len","removeListener","on","removeAllListeners","off","prefixed","__read","o","ar","next","done","__spread","LOG_PREFIX","LogLevel","Logger","_logLevel","Disabled","logLevel","_i","All","_print","Warnings","Errors","setLogFunction","rest","copy","ConnectionEventType","ConnectionType","PeerEventType","PeerErrorType","SerializationType","SocketEventType","ServerMessageType","__extends","_extendStatics","setPrototypeOf","__","__values","eventemitter3_1","logger_1","enums_1","Socket","_super","secure","host","path","pingInterval","_disconnected","_messagesQueue","wsProtocol","_baseUrl","token","_id","wsUrl","_socket","WebSocket","onmessage","Message","onclose","_cleanup","Disconnected","onopen","_sendQueuedMessages","_scheduleHeartbeat","_wsPingTimer","_sendHeartbeat","_wsOpen","Heartbeat","e_1","_a","copiedQueue","copiedQueue_1","copiedQueue_1_1","e_1_1","return","clearTimeout","__assign","__awaiter","thisArg","P","generator","fulfilled","step","adopt","__generator","body","_","y","g","sent","trys","ops","verb","v","op","pop","util_1","Negotiator","connection","startConnection","peerConnection","_startPeerConnection","Media","_stream","_addTracksToConnection","originator","Data","dataConnection","initialize","_makeOffer","handleSDP","provider","_setupListeners","peerId","peer","connectionId","connectionType","socket","Candidate","payload","dst","IceStateChanged","getConnection","mediaConnection","_addStreamToMediaConnection","cleanup","peerConnectionNotClosed","dataChannelNotClosed","err_2","err_1_1","sdpTransform","metadata","serialization","Offer","emitError","WebRTC","_makeAnswer","err_3","err_1_2","Answer","self","err_4","handleCandidate","ice","err_5","BaseConnection","_open","negotiator_1","MediaConnection","_localStream","ID_PREFIX","_negotiator","_remoteStream","remoteStream","Stream","handleMessage","_payload","messages","_getMessages","messages_1","messages_1_1","_removeConnection","open","Close","EncodingQueue","fileReader","_queue","_processing","doNextTask","destroy","queue","enque","processing","abort","baseconnection_1","encodingQueue_1","DataConnection","_buffer","_bufferSize","_buffering","_chunkedData","_encodingQueue","Binary","ab","_bufferedSend","_dc","_configureDataChannel","Open","_handleDataMessage","datatype","deserializedData","isBinarySerialization","BinaryUTF8","unpackedData","_handleChunk","chunkInfo","count","data_1","chunked","_sendChunks","msg","_trySend","bufferedAmount","MAX_BUFFERED_AMOUNT","_tryBuffer","blobs","blobs_1","blobs_1_1","blob_1","API","_options","_buildUrl","getTime","retrieveId","error_1","pathError","fetch","status","text","listAllPeers","helpfulError","error_2","json","socket_1","mediaconnection_1","dataconnection_1","api_1","Peer","userId","_lastServerId","_destroyed","_connections","_lostMessages","debug","DEFAULT_KEY","hostname","logFunction","_api","_createServerConnection","_delayedAbort","InvalidID","_initialize","_abort","ServerError","BrowserIncompatible","plainConnections","_b","_c","_d","_handleMessage","SocketError","Network","disconnect","SocketClosed","e_2","src","IdTaken","UnavailableID","InvalidKey","Leave","_cleanupPeer","delete","Expire","PeerUnavailable","_addConnection","Call","Connection","message_1","e_2_1","_storeMessage","connect","connections","e_3","connections_1","connections_1_1","e_3_1","destroyed","e_4","e_4_1","e_5","connections_2","connections_2_1","e_5_1","currentId","reconnect","peers","peer_1","peerjs","Depth2Web","addr","imgWidth","imgHeight","device_elems","show_elems","depthElems","colorElems","depthData","colorData","peer_net","peer_id","conn","toErase","parentNode","removeChild","devicename","device","device_index","div","createElement","style","display","depth_img_elem","color_img_elem","children","removeAttribute","newBlob","newURL","URL","createObjectURL"],"mappings":"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","file":"depth2web-client.js","sourceRoot":"..\\client","sourcesContent":["// modules are defined as an array\n// [ module function, map of requires ]\n//\n// map of requires is short require name -> numeric require\n//\n// anything defined in a previous bundle is accessed via the\n// orig method which is the require for previous bundles\nparcelRequire = (function (modules, cache, entry, globalName) {\n  // Save the require from previous bundle to this closure if any\n  var previousRequire = typeof parcelRequire === 'function' && parcelRequire;\n  var nodeRequire = typeof require === 'function' && require;\n\n  function newRequire(name, jumped) {\n    if (!cache[name]) {\n      if (!modules[name]) {\n        // if we cannot find the module within our internal map or\n        // cache jump to the current global require ie. the last bundle\n        // that was added to the page.\n        var currentRequire = typeof parcelRequire === 'function' && parcelRequire;\n        if (!jumped && currentRequire) {\n          return currentRequire(name, true);\n        }\n\n        // If there are other bundles on this page the require from the\n        // previous one is saved to 'previousRequire'. Repeat this as\n        // many times as there are bundles until the module is found or\n        // we exhaust the require chain.\n        if (previousRequire) {\n          return previousRequire(name, true);\n        }\n\n        // Try the node require function if it exists.\n        if (nodeRequire && typeof name === 'string') {\n          return nodeRequire(name);\n        }\n\n        var err = new Error('Cannot find module \\'' + name + '\\'');\n        err.code = 'MODULE_NOT_FOUND';\n        throw err;\n      }\n\n      localRequire.resolve = resolve;\n      localRequire.cache = {};\n\n      var module = cache[name] = new newRequire.Module(name);\n\n      modules[name][0].call(module.exports, localRequire, module, module.exports, this);\n    }\n\n    return cache[name].exports;\n\n    function localRequire(x){\n      return newRequire(localRequire.resolve(x));\n    }\n\n    function resolve(x){\n      return modules[name][1][x] || x;\n    }\n  }\n\n  function Module(moduleName) {\n    this.id = moduleName;\n    this.bundle = newRequire;\n    this.exports = {};\n  }\n\n  newRequire.isParcelRequire = true;\n  newRequire.Module = Module;\n  newRequire.modules = modules;\n  newRequire.cache = cache;\n  newRequire.parent = previousRequire;\n  newRequire.register = function (id, exports) {\n    modules[id] = [function (require, module) {\n      module.exports = exports;\n    }, {}];\n  };\n\n  var error;\n  for (var i = 0; i < entry.length; i++) {\n    try {\n      newRequire(entry[i]);\n    } catch (e) {\n      // Save first error but execute all entries\n      if (!error) {\n        error = e;\n      }\n    }\n  }\n\n  if (entry.length) {\n    // Expose entry point to Node, AMD or browser globals\n    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js\n    var mainExports = newRequire(entry[entry.length - 1]);\n\n    // CommonJS\n    if (typeof exports === \"object\" && typeof module !== \"undefined\") {\n      module.exports = mainExports;\n\n    // RequireJS\n    } else if (typeof define === \"function\" && define.amd) {\n     define(function () {\n       return mainExports;\n     });\n\n    // <script>\n    } else if (globalName) {\n      this[globalName] = mainExports;\n    }\n  }\n\n  // Override the current require with this new one\n  parcelRequire = newRequire;\n\n  if (error) {\n    // throw error from earlier, _after updating parcelRequire_\n    throw error;\n  }\n\n  return newRequire;\n})({\"EgBh\":[function(require,module,exports) {\nvar binaryFeatures = {};\r\nbinaryFeatures.useBlobBuilder = (function () {\r\n  try {\r\n    new Blob([]);\r\n    return false;\r\n  } catch (e) {\r\n    return true;\r\n  }\r\n})();\r\n\r\nbinaryFeatures.useArrayBufferView = !binaryFeatures.useBlobBuilder && (function () {\r\n  try {\r\n    return (new Blob([new Uint8Array([])])).size === 0;\r\n  } catch (e) {\r\n    return true;\r\n  }\r\n})();\r\n\r\nmodule.exports.binaryFeatures = binaryFeatures;\r\nvar BlobBuilder = module.exports.BlobBuilder;\r\nif (typeof window !== 'undefined') {\r\n  BlobBuilder = module.exports.BlobBuilder = window.WebKitBlobBuilder ||\r\n    window.MozBlobBuilder || window.MSBlobBuilder || window.BlobBuilder;\r\n}\r\n\r\nfunction BufferBuilder () {\r\n  this._pieces = [];\r\n  this._parts = [];\r\n}\r\n\r\nBufferBuilder.prototype.append = function (data) {\r\n  if (typeof data === 'number') {\r\n    this._pieces.push(data);\r\n  } else {\r\n    this.flush();\r\n    this._parts.push(data);\r\n  }\r\n};\r\n\r\nBufferBuilder.prototype.flush = function () {\r\n  if (this._pieces.length > 0) {\r\n    var buf = new Uint8Array(this._pieces);\r\n    if (!binaryFeatures.useArrayBufferView) {\r\n      buf = buf.buffer;\r\n    }\r\n    this._parts.push(buf);\r\n    this._pieces = [];\r\n  }\r\n};\r\n\r\nBufferBuilder.prototype.getBuffer = function () {\r\n  this.flush();\r\n  if (binaryFeatures.useBlobBuilder) {\r\n    var builder = new BlobBuilder();\r\n    for (var i = 0, ii = this._parts.length; i < ii; i++) {\r\n      builder.append(this._parts[i]);\r\n    }\r\n    return builder.getBlob();\r\n  } else {\r\n    return new Blob(this._parts);\r\n  }\r\n};\r\n\r\nmodule.exports.BufferBuilder = BufferBuilder;\r\n\n},{}],\"kdPp\":[function(require,module,exports) {\nvar BufferBuilder = require('./bufferbuilder').BufferBuilder;\r\nvar binaryFeatures = require('./bufferbuilder').binaryFeatures;\r\n\r\nvar BinaryPack = {\r\n  unpack: function (data) {\r\n    var unpacker = new Unpacker(data);\r\n    return unpacker.unpack();\r\n  },\r\n  pack: function (data) {\r\n    var packer = new Packer();\r\n    packer.pack(data);\r\n    var buffer = packer.getBuffer();\r\n    return buffer;\r\n  }\r\n};\r\n\r\nmodule.exports = BinaryPack;\r\n\r\nfunction Unpacker (data) {\r\n  // Data is ArrayBuffer\r\n  this.index = 0;\r\n  this.dataBuffer = data;\r\n  this.dataView = new Uint8Array(this.dataBuffer);\r\n  this.length = this.dataBuffer.byteLength;\r\n}\r\n\r\nUnpacker.prototype.unpack = function () {\r\n  var type = this.unpack_uint8();\r\n  if (type < 0x80) {\r\n    return type;\r\n  } else if ((type ^ 0xe0) < 0x20) {\r\n    return (type ^ 0xe0) - 0x20;\r\n  }\r\n\r\n  var size;\r\n  if ((size = type ^ 0xa0) <= 0x0f) {\r\n    return this.unpack_raw(size);\r\n  } else if ((size = type ^ 0xb0) <= 0x0f) {\r\n    return this.unpack_string(size);\r\n  } else if ((size = type ^ 0x90) <= 0x0f) {\r\n    return this.unpack_array(size);\r\n  } else if ((size = type ^ 0x80) <= 0x0f) {\r\n    return this.unpack_map(size);\r\n  }\r\n\r\n  switch (type) {\r\n    case 0xc0:\r\n      return null;\r\n    case 0xc1:\r\n      return undefined;\r\n    case 0xc2:\r\n      return false;\r\n    case 0xc3:\r\n      return true;\r\n    case 0xca:\r\n      return this.unpack_float();\r\n    case 0xcb:\r\n      return this.unpack_double();\r\n    case 0xcc:\r\n      return this.unpack_uint8();\r\n    case 0xcd:\r\n      return this.unpack_uint16();\r\n    case 0xce:\r\n      return this.unpack_uint32();\r\n    case 0xcf:\r\n      return this.unpack_uint64();\r\n    case 0xd0:\r\n      return this.unpack_int8();\r\n    case 0xd1:\r\n      return this.unpack_int16();\r\n    case 0xd2:\r\n      return this.unpack_int32();\r\n    case 0xd3:\r\n      return this.unpack_int64();\r\n    case 0xd4:\r\n      return undefined;\r\n    case 0xd5:\r\n      return undefined;\r\n    case 0xd6:\r\n      return undefined;\r\n    case 0xd7:\r\n      return undefined;\r\n    case 0xd8:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_string(size);\r\n    case 0xd9:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_string(size);\r\n    case 0xda:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_raw(size);\r\n    case 0xdb:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_raw(size);\r\n    case 0xdc:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_array(size);\r\n    case 0xdd:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_array(size);\r\n    case 0xde:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_map(size);\r\n    case 0xdf:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_map(size);\r\n  }\r\n};\r\n\r\nUnpacker.prototype.unpack_uint8 = function () {\r\n  var byte = this.dataView[this.index] & 0xff;\r\n  this.index++;\r\n  return byte;\r\n};\r\n\r\nUnpacker.prototype.unpack_uint16 = function () {\r\n  var bytes = this.read(2);\r\n  var uint16 =\r\n    ((bytes[0] & 0xff) * 256) + (bytes[1] & 0xff);\r\n  this.index += 2;\r\n  return uint16;\r\n};\r\n\r\nUnpacker.prototype.unpack_uint32 = function () {\r\n  var bytes = this.read(4);\r\n  var uint32 =\r\n    ((bytes[0] * 256 +\r\n      bytes[1]) * 256 +\r\n      bytes[2]) * 256 +\r\n    bytes[3];\r\n  this.index += 4;\r\n  return uint32;\r\n};\r\n\r\nUnpacker.prototype.unpack_uint64 = function () {\r\n  var bytes = this.read(8);\r\n  var uint64 =\r\n    ((((((bytes[0] * 256 +\r\n      bytes[1]) * 256 +\r\n      bytes[2]) * 256 +\r\n      bytes[3]) * 256 +\r\n      bytes[4]) * 256 +\r\n      bytes[5]) * 256 +\r\n      bytes[6]) * 256 +\r\n    bytes[7];\r\n  this.index += 8;\r\n  return uint64;\r\n};\r\n\r\nUnpacker.prototype.unpack_int8 = function () {\r\n  var uint8 = this.unpack_uint8();\r\n  return (uint8 < 0x80) ? uint8 : uint8 - (1 << 8);\r\n};\r\n\r\nUnpacker.prototype.unpack_int16 = function () {\r\n  var uint16 = this.unpack_uint16();\r\n  return (uint16 < 0x8000) ? uint16 : uint16 - (1 << 16);\r\n};\r\n\r\nUnpacker.prototype.unpack_int32 = function () {\r\n  var uint32 = this.unpack_uint32();\r\n  return (uint32 < Math.pow(2, 31)) ? uint32\r\n    : uint32 - Math.pow(2, 32);\r\n};\r\n\r\nUnpacker.prototype.unpack_int64 = function () {\r\n  var uint64 = this.unpack_uint64();\r\n  return (uint64 < Math.pow(2, 63)) ? uint64\r\n    : uint64 - Math.pow(2, 64);\r\n};\r\n\r\nUnpacker.prototype.unpack_raw = function (size) {\r\n  if (this.length < this.index + size) {\r\n    throw new Error('BinaryPackFailure: index is out of range' +\r\n      ' ' + this.index + ' ' + size + ' ' + this.length);\r\n  }\r\n  var buf = this.dataBuffer.slice(this.index, this.index + size);\r\n  this.index += size;\r\n\r\n  // buf = util.bufferToString(buf);\r\n\r\n  return buf;\r\n};\r\n\r\nUnpacker.prototype.unpack_string = function (size) {\r\n  var bytes = this.read(size);\r\n  var i = 0;\r\n  var str = '';\r\n  var c;\r\n  var code;\r\n\r\n  while (i < size) {\r\n    c = bytes[i];\r\n    if (c < 128) {\r\n      str += String.fromCharCode(c);\r\n      i++;\r\n    } else if ((c ^ 0xc0) < 32) {\r\n      code = ((c ^ 0xc0) << 6) | (bytes[i + 1] & 63);\r\n      str += String.fromCharCode(code);\r\n      i += 2;\r\n    } else {\r\n      code = ((c & 15) << 12) | ((bytes[i + 1] & 63) << 6) |\r\n        (bytes[i + 2] & 63);\r\n      str += String.fromCharCode(code);\r\n      i += 3;\r\n    }\r\n  }\r\n\r\n  this.index += size;\r\n  return str;\r\n};\r\n\r\nUnpacker.prototype.unpack_array = function (size) {\r\n  var objects = new Array(size);\r\n  for (var i = 0; i < size; i++) {\r\n    objects[i] = this.unpack();\r\n  }\r\n  return objects;\r\n};\r\n\r\nUnpacker.prototype.unpack_map = function (size) {\r\n  var map = {};\r\n  for (var i = 0; i < size; i++) {\r\n    var key = this.unpack();\r\n    var value = this.unpack();\r\n    map[key] = value;\r\n  }\r\n  return map;\r\n};\r\n\r\nUnpacker.prototype.unpack_float = function () {\r\n  var uint32 = this.unpack_uint32();\r\n  var sign = uint32 >> 31;\r\n  var exp = ((uint32 >> 23) & 0xff) - 127;\r\n  var fraction = (uint32 & 0x7fffff) | 0x800000;\r\n  return (sign === 0 ? 1 : -1) *\r\n    fraction * Math.pow(2, exp - 23);\r\n};\r\n\r\nUnpacker.prototype.unpack_double = function () {\r\n  var h32 = this.unpack_uint32();\r\n  var l32 = this.unpack_uint32();\r\n  var sign = h32 >> 31;\r\n  var exp = ((h32 >> 20) & 0x7ff) - 1023;\r\n  var hfrac = (h32 & 0xfffff) | 0x100000;\r\n  var frac = hfrac * Math.pow(2, exp - 20) +\r\n    l32 * Math.pow(2, exp - 52);\r\n  return (sign === 0 ? 1 : -1) * frac;\r\n};\r\n\r\nUnpacker.prototype.read = function (length) {\r\n  var j = this.index;\r\n  if (j + length <= this.length) {\r\n    return this.dataView.subarray(j, j + length);\r\n  } else {\r\n    throw new Error('BinaryPackFailure: read index out of range');\r\n  }\r\n};\r\n\r\nfunction Packer () {\r\n  this.bufferBuilder = new BufferBuilder();\r\n}\r\n\r\nPacker.prototype.getBuffer = function () {\r\n  return this.bufferBuilder.getBuffer();\r\n};\r\n\r\nPacker.prototype.pack = function (value) {\r\n  var type = typeof (value);\r\n  if (type === 'string') {\r\n    this.pack_string(value);\r\n  } else if (type === 'number') {\r\n    if (Math.floor(value) === value) {\r\n      this.pack_integer(value);\r\n    } else {\r\n      this.pack_double(value);\r\n    }\r\n  } else if (type === 'boolean') {\r\n    if (value === true) {\r\n      this.bufferBuilder.append(0xc3);\r\n    } else if (value === false) {\r\n      this.bufferBuilder.append(0xc2);\r\n    }\r\n  } else if (type === 'undefined') {\r\n    this.bufferBuilder.append(0xc0);\r\n  } else if (type === 'object') {\r\n    if (value === null) {\r\n      this.bufferBuilder.append(0xc0);\r\n    } else {\r\n      var constructor = value.constructor;\r\n      if (constructor == Array) {\r\n        this.pack_array(value);\r\n      } else if (constructor == Blob || constructor == File || value instanceof Blob || value instanceof File) {\r\n        this.pack_bin(value);\r\n      } else if (constructor == ArrayBuffer) {\r\n        if (binaryFeatures.useArrayBufferView) {\r\n          this.pack_bin(new Uint8Array(value));\r\n        } else {\r\n          this.pack_bin(value);\r\n        }\r\n      } else if ('BYTES_PER_ELEMENT' in value) {\r\n        if (binaryFeatures.useArrayBufferView) {\r\n          this.pack_bin(new Uint8Array(value.buffer));\r\n        } else {\r\n          this.pack_bin(value.buffer);\r\n        }\r\n      } else if ((constructor == Object) || (constructor.toString().startsWith('class'))) {\r\n        this.pack_object(value);\r\n      } else if (constructor == Date) {\r\n        this.pack_string(value.toString());\r\n      } else if (typeof value.toBinaryPack === 'function') {\r\n        this.bufferBuilder.append(value.toBinaryPack());\r\n      } else {\r\n        throw new Error('Type \"' + constructor.toString() + '\" not yet supported');\r\n      }\r\n    }\r\n  } else {\r\n    throw new Error('Type \"' + type + '\" not yet supported');\r\n  }\r\n  this.bufferBuilder.flush();\r\n};\r\n\r\nPacker.prototype.pack_bin = function (blob) {\r\n  var length = blob.length || blob.byteLength || blob.size;\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0xa0 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xda);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xdb);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  this.bufferBuilder.append(blob);\r\n};\r\n\r\nPacker.prototype.pack_string = function (str) {\r\n  var length = utf8Length(str);\r\n\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0xb0 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xd8);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xd9);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  this.bufferBuilder.append(str);\r\n};\r\n\r\nPacker.prototype.pack_array = function (ary) {\r\n  var length = ary.length;\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0x90 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xdc);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xdd);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  for (var i = 0; i < length; i++) {\r\n    this.pack(ary[i]);\r\n  }\r\n};\r\n\r\nPacker.prototype.pack_integer = function (num) {\r\n  if (num >= -0x20 && num <= 0x7f) {\r\n    this.bufferBuilder.append(num & 0xff);\r\n  } else if (num >= 0x00 && num <= 0xff) {\r\n    this.bufferBuilder.append(0xcc);\r\n    this.pack_uint8(num);\r\n  } else if (num >= -0x80 && num <= 0x7f) {\r\n    this.bufferBuilder.append(0xd0);\r\n    this.pack_int8(num);\r\n  } else if (num >= 0x0000 && num <= 0xffff) {\r\n    this.bufferBuilder.append(0xcd);\r\n    this.pack_uint16(num);\r\n  } else if (num >= -0x8000 && num <= 0x7fff) {\r\n    this.bufferBuilder.append(0xd1);\r\n    this.pack_int16(num);\r\n  } else if (num >= 0x00000000 && num <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xce);\r\n    this.pack_uint32(num);\r\n  } else if (num >= -0x80000000 && num <= 0x7fffffff) {\r\n    this.bufferBuilder.append(0xd2);\r\n    this.pack_int32(num);\r\n  } else if (num >= -0x8000000000000000 && num <= 0x7FFFFFFFFFFFFFFF) {\r\n    this.bufferBuilder.append(0xd3);\r\n    this.pack_int64(num);\r\n  } else if (num >= 0x0000000000000000 && num <= 0xFFFFFFFFFFFFFFFF) {\r\n    this.bufferBuilder.append(0xcf);\r\n    this.pack_uint64(num);\r\n  } else {\r\n    throw new Error('Invalid integer');\r\n  }\r\n};\r\n\r\nPacker.prototype.pack_double = function (num) {\r\n  var sign = 0;\r\n  if (num < 0) {\r\n    sign = 1;\r\n    num = -num;\r\n  }\r\n  var exp = Math.floor(Math.log(num) / Math.LN2);\r\n  var frac0 = num / Math.pow(2, exp) - 1;\r\n  var frac1 = Math.floor(frac0 * Math.pow(2, 52));\r\n  var b32 = Math.pow(2, 32);\r\n  var h32 = (sign << 31) | ((exp + 1023) << 20) |\r\n    (frac1 / b32) & 0x0fffff;\r\n  var l32 = frac1 % b32;\r\n  this.bufferBuilder.append(0xcb);\r\n  this.pack_int32(h32);\r\n  this.pack_int32(l32);\r\n};\r\n\r\nPacker.prototype.pack_object = function (obj) {\r\n  var keys = Object.keys(obj);\r\n  var length = keys.length;\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0x80 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xde);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xdf);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  for (var prop in obj) {\r\n    if (obj.hasOwnProperty(prop)) {\r\n      this.pack(prop);\r\n      this.pack(obj[prop]);\r\n    }\r\n  }\r\n};\r\n\r\nPacker.prototype.pack_uint8 = function (num) {\r\n  this.bufferBuilder.append(num);\r\n};\r\n\r\nPacker.prototype.pack_uint16 = function (num) {\r\n  this.bufferBuilder.append(num >> 8);\r\n  this.bufferBuilder.append(num & 0xff);\r\n};\r\n\r\nPacker.prototype.pack_uint32 = function (num) {\r\n  var n = num & 0xffffffff;\r\n  this.bufferBuilder.append((n & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((n & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((n & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((n & 0x000000ff));\r\n};\r\n\r\nPacker.prototype.pack_uint64 = function (num) {\r\n  var high = num / Math.pow(2, 32);\r\n  var low = num % Math.pow(2, 32);\r\n  this.bufferBuilder.append((high & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((high & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((high & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((high & 0x000000ff));\r\n  this.bufferBuilder.append((low & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((low & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((low & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((low & 0x000000ff));\r\n};\r\n\r\nPacker.prototype.pack_int8 = function (num) {\r\n  this.bufferBuilder.append(num & 0xff);\r\n};\r\n\r\nPacker.prototype.pack_int16 = function (num) {\r\n  this.bufferBuilder.append((num & 0xff00) >> 8);\r\n  this.bufferBuilder.append(num & 0xff);\r\n};\r\n\r\nPacker.prototype.pack_int32 = function (num) {\r\n  this.bufferBuilder.append((num >>> 24) & 0xff);\r\n  this.bufferBuilder.append((num & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((num & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((num & 0x000000ff));\r\n};\r\n\r\nPacker.prototype.pack_int64 = function (num) {\r\n  var high = Math.floor(num / Math.pow(2, 32));\r\n  var low = num % Math.pow(2, 32);\r\n  this.bufferBuilder.append((high & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((high & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((high & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((high & 0x000000ff));\r\n  this.bufferBuilder.append((low & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((low & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((low & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((low & 0x000000ff));\r\n};\r\n\r\nfunction _utf8Replace (m) {\r\n  var code = m.charCodeAt(0);\r\n\r\n  if (code <= 0x7ff) return '00';\r\n  if (code <= 0xffff) return '000';\r\n  if (code <= 0x1fffff) return '0000';\r\n  if (code <= 0x3ffffff) return '00000';\r\n  return '000000';\r\n}\r\n\r\nfunction utf8Length (str) {\r\n  if (str.length > 600) {\r\n    // Blob method faster for large strings\r\n    return (new Blob([str])).size;\r\n  } else {\r\n    return str.replace(/[^\\u0000-\\u007F]/g, _utf8Replace).length;\r\n  }\r\n}\r\n\n},{\"./bufferbuilder\":\"EgBh\"}],\"iSxC\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.extractVersion = extractVersion;\nexports.wrapPeerConnectionEvent = wrapPeerConnectionEvent;\nexports.disableLog = disableLog;\nexports.disableWarnings = disableWarnings;\nexports.log = log;\nexports.deprecated = deprecated;\nexports.detectBrowser = detectBrowser;\nexports.compactObject = compactObject;\nexports.walkStats = walkStats;\nexports.filterStats = filterStats;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function (obj) { return typeof obj; }; } else { _typeof = function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar logDisabled_ = true;\nvar deprecationWarnings_ = true;\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\n\nfunction extractVersion(uastring, expr, pos) {\n  var match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n} // Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\n\n\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  var proto = window.RTCPeerConnection.prototype;\n  var nativeAddEventListener = proto.addEventListener;\n\n  proto.addEventListener = function (nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n\n    var wrappedCallback = function (e) {\n      var modifiedEvent = wrapper(e);\n\n      if (modifiedEvent) {\n        cb(modifiedEvent);\n      }\n    };\n\n    this._eventMap = this._eventMap || {};\n    this._eventMap[cb] = wrappedCallback;\n    return nativeAddEventListener.apply(this, [nativeEventName, wrappedCallback]);\n  };\n\n  var nativeRemoveEventListener = proto.removeEventListener;\n\n  proto.removeEventListener = function (nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap || !this._eventMap[cb]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n\n    var unwrappedCb = this._eventMap[cb];\n    delete this._eventMap[cb];\n    return nativeRemoveEventListener.apply(this, [nativeEventName, unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get: function () {\n      return this['_on' + eventNameToWrap];\n    },\n    set: function (cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap, this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n\n      if (cb) {\n        this.addEventListener(eventNameToWrap, this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nfunction disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + _typeof(bool) + '. Please use a boolean.');\n  }\n\n  logDisabled_ = bool;\n  return bool ? 'adapter.js logging disabled' : 'adapter.js logging enabled';\n}\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\n\n\nfunction disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + _typeof(bool) + '. Please use a boolean.');\n  }\n\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nfunction log() {\n  if ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\n\n\nfunction deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod + ' instead.');\n}\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\n\n\nfunction detectBrowser(window) {\n  var {\n    navigator: navigator\n  } = window; // Returned result object.\n\n  var result = {\n    browser: null,\n    version: null\n  }; // Fail early if it's not a browser\n\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  if (navigator.mozGetUserMedia) {\n    // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent, /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia || window.isSecureContext === false && window.webkitRTCPeerConnection && !window.RTCIceGatherer) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices && navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n    // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent, /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection && navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n    // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent, /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver && 'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else {\n    // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\n\n\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\n\n\nfunction compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function (accumulator, key) {\n    var isObj = isObject(data[key]);\n    var value = isObj ? compactObject(data[key]) : data[key];\n    var isEmptyObject = isObj && !Object.keys(value).length;\n\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n\n    return Object.assign(accumulator, _defineProperty({}, key, value));\n  }, {});\n}\n/* iterates the stats graph recursively. */\n\n\nfunction walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(function (name) {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(function (id) {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n/* filter getStats for a sender/receiver track. */\n\n\nfunction filterStats(result, track, outbound) {\n  var streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  var filteredResult = new Map();\n\n  if (track === null) {\n    return filteredResult;\n  }\n\n  var trackStats = [];\n  result.forEach(function (value) {\n    if (value.type === 'track' && value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(function (trackStat) {\n    result.forEach(function (stats) {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n},{}],\"s6SN\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetUserMedia = shimGetUserMedia;\n\nvar utils = _interopRequireWildcard(require(\"../utils.js\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function (obj) { return typeof obj; }; } else { _typeof = function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar logging = utils.log;\n\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  var browserDetails = utils.detectBrowser(window);\n\n  var constraintsToChrome_ = function (c) {\n    if (_typeof(c) !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n\n    var cc = {};\n    Object.keys(c).forEach(function (key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n\n      var r = _typeof(c[key]) === 'object' ? c[key] : {\n        ideal: c[key]\n      };\n\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n\n      var oldname_ = function (prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n\n        return name === 'deviceId' ? 'sourceId' : name;\n      };\n\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function (mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n\n    return cc;\n  };\n\n  var shimConstraints_ = function (constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n\n    constraints = JSON.parse(JSON.stringify(constraints));\n\n    if (constraints && _typeof(constraints.audio) === 'object') {\n      var remap = function (obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n\n    if (constraints && _typeof(constraints.video) === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      var face = constraints.video.facingMode;\n      face = face && (_typeof(face) === 'object' ? face : {\n        ideal: face\n      });\n      var getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if (face && (face.exact === 'user' || face.exact === 'environment' || face.ideal === 'user' || face.ideal === 'environment') && !(navigator.mediaDevices.getSupportedConstraints && navigator.mediaDevices.getSupportedConstraints().facingMode && !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        var matches;\n\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n            devices = devices.filter(function (d) {\n              return d.kind === 'videoinput';\n            });\n            var dev = devices.find(function (d) {\n              return matches.some(function (match) {\n                return d.label.toLowerCase().includes(match);\n              });\n            });\n\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {\n                exact: dev.deviceId\n              } : {\n                ideal: dev.deviceId\n              };\n            }\n\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function (e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString: function () {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function (constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function (c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function (e) {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n\n  navigator.getUserMedia = getUserMedia_.bind(navigator); // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n\n  if (navigator.mediaDevices.getUserMedia) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n\n    navigator.mediaDevices.getUserMedia = function (cs) {\n      return shimConstraints_(cs, function (c) {\n        return origGetUserMedia(c).then(function (stream) {\n          if (c.audio && !stream.getAudioTracks().length || c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function (track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n\n          return stream;\n        }, function (e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n}\n},{\"../utils.js\":\"iSxC\"}],\"VHa8\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = shimGetDisplayMedia;\n\nfunction shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n\n  if (!window.navigator.mediaDevices) {\n    return;\n  } // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n\n\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' + 'a function');\n    return;\n  }\n\n  window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n    return getSourceId(constraints).then(function (sourceId) {\n      var widthSpecified = constraints.video && constraints.video.width;\n      var heightSpecified = constraints.video && constraints.video.height;\n      var frameRateSpecified = constraints.video && constraints.video.frameRate;\n      constraints.video = {\n        mandatory: {\n          chromeMediaSource: 'desktop',\n          chromeMediaSourceId: sourceId,\n          maxFrameRate: frameRateSpecified || 3\n        }\n      };\n\n      if (widthSpecified) {\n        constraints.video.mandatory.maxWidth = widthSpecified;\n      }\n\n      if (heightSpecified) {\n        constraints.video.mandatory.maxHeight = heightSpecified;\n      }\n\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    });\n  };\n}\n},{}],\"uI5X\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimMediaStream = shimMediaStream;\nexports.shimOnTrack = shimOnTrack;\nexports.shimGetSendersWithDtmf = shimGetSendersWithDtmf;\nexports.shimGetStats = shimGetStats;\nexports.shimSenderReceiverGetStats = shimSenderReceiverGetStats;\nexports.shimAddTrackRemoveTrackWithNative = shimAddTrackRemoveTrackWithNative;\nexports.shimAddTrackRemoveTrack = shimAddTrackRemoveTrack;\nexports.shimPeerConnection = shimPeerConnection;\nexports.fixNegotiationNeeded = fixNegotiationNeeded;\nObject.defineProperty(exports, \"shimGetUserMedia\", {\n  enumerable: true,\n  get: function () {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\nObject.defineProperty(exports, \"shimGetDisplayMedia\", {\n  enumerable: true,\n  get: function () {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\n\nvar utils = _interopRequireWildcard(require(\"../utils.js\"));\n\nvar _getusermedia = require(\"./getusermedia\");\n\nvar _getdisplaymedia = require(\"./getdisplaymedia\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function (obj) { return typeof obj; }; } else { _typeof = function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nfunction shimOnTrack(window) {\n  if (_typeof(window) === 'object' && window.RTCPeerConnection && !('ontrack' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get: function () {\n        return this._ontrack;\n      },\n      set: function (f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      var _this = this;\n\n      if (!this._ontrackpoly) {\n        this._ontrackpoly = function (e) {\n          // onaddstream does not fire when a track is added to an existing\n          // stream. But stream.onaddtrack is implemented so we use that.\n          e.stream.addEventListener('addtrack', function (te) {\n            var receiver;\n\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = _this.getReceivers().find(function (r) {\n                return r.track && r.track.id === te.track.id;\n              });\n            } else {\n              receiver = {\n                track: te.track\n              };\n            }\n\n            var event = new Event('track');\n            event.track = te.track;\n            event.receiver = receiver;\n            event.transceiver = {\n              receiver: receiver\n            };\n            event.streams = [e.stream];\n\n            _this.dispatchEvent(event);\n          });\n          e.stream.getTracks().forEach(function (track) {\n            var receiver;\n\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = _this.getReceivers().find(function (r) {\n                return r.track && r.track.id === track.id;\n              });\n            } else {\n              receiver = {\n                track: track\n              };\n            }\n\n            var event = new Event('track');\n            event.track = track;\n            event.receiver = receiver;\n            event.transceiver = {\n              receiver: receiver\n            };\n            event.streams = [e.stream];\n\n            _this.dispatchEvent(event);\n          });\n        };\n\n        this.addEventListener('addstream', this._ontrackpoly);\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver', {\n          value: {\n            receiver: e.receiver\n          }\n        });\n      }\n\n      return e;\n    });\n  }\n}\n\nfunction shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (_typeof(window) === 'object' && window.RTCPeerConnection && !('getSenders' in window.RTCPeerConnection.prototype) && 'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    var shimSenderWithDtmf = function (pc, track) {\n      return {\n        track: track,\n\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n\n          return this._dtmf;\n        },\n\n        _pc: pc\n      };\n    }; // augment addTrack when getSenders is not available.\n\n\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n\n      var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n\n      window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n        var sender = origAddTrack.apply(this, arguments);\n\n        if (!sender) {\n          sender = shimSenderWithDtmf(this, track);\n\n          this._senders.push(sender);\n        }\n\n        return sender;\n      };\n\n      var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n\n      window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n        origRemoveTrack.apply(this, arguments);\n\n        var idx = this._senders.indexOf(sender);\n\n        if (idx !== -1) {\n          this._senders.splice(idx, 1);\n        }\n      };\n    }\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this2 = this;\n\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(function (track) {\n        _this2._senders.push(shimSenderWithDtmf(_this2, track));\n      });\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this3 = this;\n\n      this._senders = this._senders || [];\n      origRemoveStream.apply(this, [stream]);\n      stream.getTracks().forEach(function (track) {\n        var sender = _this3._senders.find(function (s) {\n          return s.track === track;\n        });\n\n        if (sender) {\n          // remove sender\n          _this3._senders.splice(_this3._senders.indexOf(sender), 1);\n        }\n      });\n    };\n  } else if (_typeof(window) === 'object' && window.RTCPeerConnection && 'getSenders' in window.RTCPeerConnection.prototype && 'createDTMFSender' in window.RTCPeerConnection.prototype && window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      var _this4 = this;\n\n      var senders = origGetSenders.apply(this, []);\n      senders.forEach(function (sender) {\n        return sender._pc = _this4;\n      });\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get: function () {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nfunction shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  var origGetStats = window.RTCPeerConnection.prototype.getStats;\n\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    var _this5 = this;\n\n    var [selector, onSucc, onErr] = arguments; // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    } // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n\n\n    if (origGetStats.length === 0 && (arguments.length === 0 || typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    var fixChromeStats_ = function (response) {\n      var standardReport = {};\n      var reports = response.result();\n      reports.forEach(function (report) {\n        var standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(function (name) {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n      return standardReport;\n    }; // shim getStats with maplike support\n\n\n    var makeMapStats = function (stats) {\n      return new Map(Object.keys(stats).map(function (key) {\n        return [key, stats[key]];\n      }));\n    };\n\n    if (arguments.length >= 2) {\n      var successCallbackWrapper_ = function (response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_, selector]);\n    } // promise-support\n\n\n    return new Promise(function (resolve, reject) {\n      origGetStats.apply(_this5, [function (response) {\n        resolve(makeMapStats(fixChromeStats_(response)));\n      }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderReceiverGetStats(window) {\n  if (!(_typeof(window) === 'object' && window.RTCPeerConnection && window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  } // shim sender stats.\n\n\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        var _this6 = this;\n\n        var senders = origGetSenders.apply(this, []);\n        senders.forEach(function (sender) {\n          return sender._pc = _this6;\n        });\n        return senders;\n      };\n    }\n\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        var sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      var sender = this;\n      return this._pc.getStats().then(function (result) {\n        return (\n          /* Note: this will include stats of all senders that\n           *   send a track with the same id as sender.track as\n           *   it is not possible to identify the RTCRtpSender.\n           */\n          utils.filterStats(result, sender.track, true)\n        );\n      });\n    };\n  } // shim receiver stats.\n\n\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n        var _this7 = this;\n\n        var receivers = origGetReceivers.apply(this, []);\n        receivers.forEach(function (receiver) {\n          return receiver._pc = _this7;\n        });\n        return receivers;\n      };\n    }\n\n    utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      var receiver = this;\n      return this._pc.getStats().then(function (result) {\n        return utils.filterStats(result, receiver.track, false);\n      });\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype && 'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  } // shim RTCPeerConnection.getStats(track).\n\n\n  var origGetStats = window.RTCPeerConnection.prototype.getStats;\n\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 && arguments[0] instanceof window.MediaStreamTrack) {\n      var track = arguments[0];\n      var sender;\n      var receiver;\n      var err;\n      this.getSenders().forEach(function (s) {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(function (r) {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n\n        return r.track === track;\n      });\n\n      if (err || sender && receiver) {\n        return Promise.reject(new DOMException('There are more than one sender or receiver for the track.', 'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n\n      return Promise.reject(new DOMException('There is no sender or receiver for the track.', 'InvalidAccessError'));\n    }\n\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nfunction shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n    var _this8 = this;\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    return Object.keys(this._shimmedLocalStreams).map(function (streamId) {\n      return _this8._shimmedLocalStreams[streamId][0];\n    });\n  };\n\n  var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n\n  window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n    if (!stream) {\n      return origAddTrack.apply(this, arguments);\n    }\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    var sender = origAddTrack.apply(this, arguments);\n\n    if (!this._shimmedLocalStreams[stream.id]) {\n      this._shimmedLocalStreams[stream.id] = [stream, sender];\n    } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n      this._shimmedLocalStreams[stream.id].push(sender);\n    }\n\n    return sender;\n  };\n\n  var origAddStream = window.RTCPeerConnection.prototype.addStream;\n\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    var _this9 = this;\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    stream.getTracks().forEach(function (track) {\n      var alreadyExists = _this9.getSenders().find(function (s) {\n        return s.track === track;\n      });\n\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.', 'InvalidAccessError');\n      }\n    });\n    var existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    var newSenders = this.getSenders().filter(function (newSender) {\n      return existingSenders.indexOf(newSender) === -1;\n    });\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    delete this._shimmedLocalStreams[stream.id];\n    return origRemoveStream.apply(this, arguments);\n  };\n\n  var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n\n  window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n    var _this10 = this;\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    if (sender) {\n      Object.keys(this._shimmedLocalStreams).forEach(function (streamId) {\n        var idx = _this10._shimmedLocalStreams[streamId].indexOf(sender);\n\n        if (idx !== -1) {\n          _this10._shimmedLocalStreams[streamId].splice(idx, 1);\n        }\n\n        if (_this10._shimmedLocalStreams[streamId].length === 1) {\n          delete _this10._shimmedLocalStreams[streamId];\n        }\n      });\n    }\n\n    return origRemoveTrack.apply(this, arguments);\n  };\n}\n\nfunction shimAddTrackRemoveTrack(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  var browserDetails = utils.detectBrowser(window); // shim addTrack and removeTrack.\n\n  if (window.RTCPeerConnection.prototype.addTrack && browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  } // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n\n\n  var origGetLocalStreams = window.RTCPeerConnection.prototype.getLocalStreams;\n\n  window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n    var _this11 = this;\n\n    var nativeStreams = origGetLocalStreams.apply(this);\n    this._reverseStreams = this._reverseStreams || {};\n    return nativeStreams.map(function (stream) {\n      return _this11._reverseStreams[stream.id];\n    });\n  };\n\n  var origAddStream = window.RTCPeerConnection.prototype.addStream;\n\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    var _this12 = this;\n\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n    stream.getTracks().forEach(function (track) {\n      var alreadyExists = _this12.getSenders().find(function (s) {\n        return s.track === track;\n      });\n\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.', 'InvalidAccessError');\n      }\n    }); // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n\n    if (!this._reverseStreams[stream.id]) {\n      var newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n\n    origAddStream.apply(this, [stream]);\n  };\n\n  var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n    origRemoveStream.apply(this, [this._streams[stream.id] || stream]);\n    delete this._reverseStreams[this._streams[stream.id] ? this._streams[stream.id].id : stream.id];\n    delete this._streams[stream.id];\n  };\n\n  window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n    var _this13 = this;\n\n    if (this.signalingState === 'closed') {\n      throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n    }\n\n    var streams = [].slice.call(arguments, 1);\n\n    if (streams.length !== 1 || !streams[0].getTracks().find(function (t) {\n      return t === track;\n    })) {\n      // this is not fully correct but all we can manage without\n      // [[associated MediaStreams]] internal slot.\n      throw new DOMException('The adapter.js addTrack polyfill only supports a single ' + ' stream which is associated with the specified track.', 'NotSupportedError');\n    }\n\n    var alreadyExists = this.getSenders().find(function (s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw new DOMException('Track already exists.', 'InvalidAccessError');\n    }\n\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n    var oldStream = this._streams[stream.id];\n\n    if (oldStream) {\n      // this is using odd Chrome behaviour, use with caution:\n      // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n      // Note: we rely on the high-level addTrack/dtmf shim to\n      // create the sender with a dtmf sender.\n      oldStream.addTrack(track); // Trigger ONN async.\n\n      Promise.resolve().then(function () {\n        _this13.dispatchEvent(new Event('negotiationneeded'));\n      });\n    } else {\n      var newStream = new window.MediaStream([track]);\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      this.addStream(newStream);\n    }\n\n    return this.getSenders().find(function (s) {\n      return s.track === track;\n    });\n  }; // replace the internal stream id with the external one and\n  // vice versa.\n\n\n  function replaceInternalStreamId(pc, description) {\n    var sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n      var externalStream = pc._reverseStreams[internalId];\n      var internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'), externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp: sdp\n    });\n  }\n\n  function replaceExternalStreamId(pc, description) {\n    var sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n      var externalStream = pc._reverseStreams[internalId];\n      var internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'), internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp: sdp\n    });\n  }\n\n  ['createOffer', 'createAnswer'].forEach(function (method) {\n    var nativeMethod = window.RTCPeerConnection.prototype[method];\n\n    var methodObj = _defineProperty({}, method, function () {\n      var _this14 = this;\n\n      var args = arguments;\n      var isLegacyCall = arguments.length && typeof arguments[0] === 'function';\n\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [function (description) {\n          var desc = replaceInternalStreamId(_this14, description);\n          args[0].apply(null, [desc]);\n        }, function (err) {\n          if (args[1]) {\n            args[1].apply(null, err);\n          }\n        }, arguments[2]]);\n      }\n\n      return nativeMethod.apply(this, arguments).then(function (description) {\n        return replaceInternalStreamId(_this14, description);\n      });\n    });\n\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n  var origSetLocalDescription = window.RTCPeerConnection.prototype.setLocalDescription;\n\n  window.RTCPeerConnection.prototype.setLocalDescription = function setLocalDescription() {\n    if (!arguments.length || !arguments[0].type) {\n      return origSetLocalDescription.apply(this, arguments);\n    }\n\n    arguments[0] = replaceExternalStreamId(this, arguments[0]);\n    return origSetLocalDescription.apply(this, arguments);\n  }; // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n\n  var origLocalDescription = Object.getOwnPropertyDescriptor(window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype, 'localDescription', {\n    get: function () {\n      var description = origLocalDescription.get.apply(this);\n\n      if (description.type === '') {\n        return description;\n      }\n\n      return replaceInternalStreamId(this, description);\n    }\n  });\n\n  window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n    var _this15 = this;\n\n    if (this.signalingState === 'closed') {\n      throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n    } // We can not yet check for sender instanceof RTCRtpSender\n    // since we shim RTPSender. So we check if sender._pc is set.\n\n\n    if (!sender._pc) {\n      throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' + 'does not implement interface RTCRtpSender.', 'TypeError');\n    }\n\n    var isLocal = sender._pc === this;\n\n    if (!isLocal) {\n      throw new DOMException('Sender was not created by this connection.', 'InvalidAccessError');\n    } // Search for the native stream the senders track belongs to.\n\n\n    this._streams = this._streams || {};\n    var stream;\n    Object.keys(this._streams).forEach(function (streamid) {\n      var hasTrack = _this15._streams[streamid].getTracks().find(function (track) {\n        return sender.track === track;\n      });\n\n      if (hasTrack) {\n        stream = _this15._streams[streamid];\n      }\n    });\n\n    if (stream) {\n      if (stream.getTracks().length === 1) {\n        // if this is the last track of the stream, remove the stream. This\n        // takes care of any shimmed _senders.\n        this.removeStream(this._reverseStreams[stream.id]);\n      } else {\n        // relying on the same odd chrome behaviour as above.\n        stream.removeTrack(sender.track);\n      }\n\n      this.dispatchEvent(new Event('negotiationneeded'));\n    }\n  };\n}\n\nfunction shimPeerConnection(window) {\n  var browserDetails = utils.detectBrowser(window);\n\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n\n  if (!window.RTCPeerConnection) {\n    return;\n  } // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n\n\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n\n      var methodObj = _defineProperty({}, method, function () {\n        arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n        return nativeMethod.apply(this, arguments);\n      });\n\n      window.RTCPeerConnection.prototype[method] = methodObj[method];\n    });\n  } // support for addIceCandidate(null or undefined)\n\n\n  var nativeAddIceCandidate = window.RTCPeerConnection.prototype.addIceCandidate;\n\n  window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\n    if (!arguments[0]) {\n      if (arguments[1]) {\n        arguments[1].apply(null);\n      }\n\n      return Promise.resolve();\n    } // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n    // in older versions. Native support planned for Chrome M77.\n\n\n    if (browserDetails.version < 78 && arguments[0] && arguments[0].candidate === '') {\n      return Promise.resolve();\n    }\n\n    return nativeAddIceCandidate.apply(this, arguments);\n  };\n}\n\nfunction fixNegotiationNeeded(window) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', function (e) {\n    var pc = e.target;\n\n    if (pc.signalingState !== 'stable') {\n      return;\n    }\n\n    return e;\n  });\n}\n},{\"../utils.js\":\"iSxC\",\"./getusermedia\":\"s6SN\",\"./getdisplaymedia\":\"VHa8\"}],\"NZ1C\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.filterIceServers = filterIceServers;\n\nvar utils = _interopRequireWildcard(require(\"../utils\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function (server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n\n      if (server.url && !server.urls) {\n        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n      }\n\n      var isString = typeof urls === 'string';\n\n      if (isString) {\n        urls = [urls];\n      }\n\n      urls = urls.filter(function (url) {\n        // filter STUN unconditionally.\n        if (url.indexOf('stun:') === 0) {\n          return false;\n        }\n\n        var validTurn = url.startsWith('turn') && !url.startsWith('turn:[') && url.includes('transport=udp');\n\n        if (validTurn && !hasTurn) {\n          hasTurn = true;\n          return true;\n        }\n\n        return validTurn && !hasTurn;\n      });\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n},{\"../utils\":\"iSxC\"}],\"YHvh\":[function(require,module,exports) {\n/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(parts) {\n      return parts.attribute === 'cname';\n    });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(function(line) {\n      var parts = line.substr(17).split(' ');\n      return parts.map(function(part) {\n        return parseInt(part, 10);\n      });\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(obj) {\n      return obj.attribute === 'cname';\n    })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(msidParts) {\n      return msidParts.attribute === 'msid';\n    });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  var mline = SDPUtils.parseMLine(mediaSection);\n  var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  var maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substr(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize: maxMessageSize\n    };\n  }\n  var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    var parts = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:')[0]\n      .substr(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize: maxMessageSize\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  var output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n'\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n    transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n    transceiver.dtlsTransport.getLocalParameters(),\n    type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n\n},{}],\"NJ2u\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps); // Map ICE parameters (ufrag, pwd) to SDP.\n\n  sdp += SDPUtils.writeIceParameters(transceiver.iceGatherer.getLocalParameters()); // Map DTLS parameters to SDP.\n\n  sdp += SDPUtils.writeDtlsParameters(transceiver.dtlsTransport.getLocalParameters(), type === 'offer' ? 'actpass' : dtlsRole || 'active');\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId || transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId; // spec.\n\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' + trackId + '\\r\\n';\n    sdp += 'a=' + msid; // for Chrome. Legacy should no longer be required.\n\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc + ' ' + msid; // RTX\n\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc + ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' + transceiver.sendEncodingParameters[0].ssrc + ' ' + transceiver.sendEncodingParameters[0].rtx.ssrc + '\\r\\n';\n    }\n  } // FIXME: this should be written by writeRtpDescription.\n\n\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc + ' cname:' + SDPUtils.localCName + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc + ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n\n  return sdp;\n} // Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\n\n\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function (server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n\n      var isString = typeof urls === 'string';\n\n      if (isString) {\n        urls = [urls];\n      }\n\n      urls = urls.filter(function (url) {\n        var validTurn = url.indexOf('turn:') === 0 && url.indexOf('transport=udp') !== -1 && url.indexOf('turn:[') === -1 && !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 && url.indexOf('?transport=udp') === -1;\n      });\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n} // Determines the intersection of local and remote capabilities.\n\n\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function (pt, codecs) {\n    pt = parseInt(pt, 10);\n\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt || codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function (lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec && lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function (lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() && lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' && lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec, localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n\n        rCodec.numChannels = Math.min(lCodec.numChannels, rCodec.numChannels); // push rCodec so we reply with offerer payload type\n\n        commonCapabilities.codecs.push(rCodec); // determine common feedback mechanisms\n\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function (fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type && lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n\n          return false;\n        }); // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n\n        break;\n      }\n    }\n  });\n  localCapabilities.headerExtensions.forEach(function (lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length; i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  }); // FIXME: fecMechanisms\n\n  return commonCapabilities;\n} // is action=setLocalDescription with type allowed in signalingState\n\n\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all fieldѕ are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates().find(function (remoteCandidate) {\n    return candidate.foundation === remoteCandidate.foundation && candidate.ip === remoteCandidate.ip && candidate.port === remoteCandidate.port && candidate.priority === remoteCandidate.priority && candidate.protocol === remoteCandidate.protocol && candidate.type === remoteCandidate.type;\n  });\n\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n\n  return !alreadyAdded;\n}\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name; // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function (window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack', {\n      track: track\n    }));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack', {\n      track: track\n    }));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {\n      receiver: receiver\n    };\n    trackEvent.streams = streams;\n    window.setTimeout(function () {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function (config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n\n    ['addEventListener', 'removeEventListener', 'dispatchEvent'].forEach(function (method) {\n      pc[method] = _eventTarget[method].bind(_eventTarget);\n    });\n    this.canTrickleIceCandidates = null;\n    this.needNegotiation = false;\n    this.localStreams = [];\n    this.remoteStreams = [];\n    this._localDescription = null;\n    this._remoteDescription = null;\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n    config = JSON.parse(JSON.stringify(config || {}));\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw makeError('NotSupportedError', 'rtcpMuxPolicy \\'negotiate\\' is not supported');\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n    this._iceGatherers = [];\n\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config; // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n\n    this.transceivers = [];\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function () {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function () {\n      return this._remoteDescription;\n    }\n  }); // set up event handlers on prototype\n\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function (name, event) {\n    if (this._isClosed) {\n      return;\n    }\n\n    this.dispatchEvent(event);\n\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function () {\n    var event = new Event('icegatheringstatechange');\n\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function () {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function () {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function () {\n    return this.remoteStreams;\n  }; // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n\n\n  RTCPeerConnection.prototype._createTransceiver = function (kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function (track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError', 'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function (s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track && this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track, transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function (stream) {\n    var pc = this;\n\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function (track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function (track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function (event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function (track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function (sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError', 'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' + 'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function (t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError', 'Sender was not created by this connection.');\n    }\n\n    var stream = transceiver.stream;\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null; // remove the stream from the set of local streams\n\n    var localStreams = this.transceivers.map(function (t) {\n      return t.stream;\n    });\n\n    if (localStreams.indexOf(stream) === -1 && this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function (stream) {\n    var pc = this;\n    stream.getTracks().forEach(function (track) {\n      var sender = pc.getSenders().find(function (s) {\n        return s.track === track;\n      });\n\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function () {\n    return this.transceivers.filter(function (transceiver) {\n      return !!transceiver.rtpSender;\n    }).map(function (transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function () {\n    return this.transceivers.filter(function (transceiver) {\n      return !!transceiver.rtpReceiver;\n    }).map(function (transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n  RTCPeerConnection.prototype._createIceGatherer = function (sdpMLineIndex, usingBundle) {\n    var pc = this;\n\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state', {\n      value: 'new',\n      writable: true\n    });\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n\n    this.transceivers[sdpMLineIndex].bufferCandidates = function (event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0; // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n\n      iceGatherer.state = end ? 'completed' : 'gathering';\n\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n\n    iceGatherer.addEventListener('localcandidate', this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  }; // start gathering from an RTCIceGatherer.\n\n\n  RTCPeerConnection.prototype._gather = function (mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n\n    var bufferedCandidateEvents = this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate', this.transceivers[sdpMLineIndex].bufferCandidates);\n\n    iceGatherer.onlocalcandidate = function (evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // ѕdpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n\n      var event = new Event('icecandidate');\n      event.candidate = {\n        sdpMid: mid,\n        sdpMLineIndex: sdpMLineIndex\n      };\n      var cand = evt.candidate; // Edge emits an empty object for RTCIceCandidateComplete‥\n\n      var end = !cand || Object.keys(cand).length === 0;\n\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        } // RTCIceCandidate doesn't have a component, needs to be added\n\n\n        cand.component = 1; // also the usernameFragment. TODO: update SDP to take both variants.\n\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate, SDPUtils.parseCandidate(serializedCandidate));\n        event.candidate.candidate = serializedCandidate;\n\n        event.candidate.toJSON = function () {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      } // update local description.\n\n\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] += 'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] += 'a=end-of-candidates\\r\\n';\n      }\n\n      pc._localDescription.sdp = SDPUtils.getDescription(pc._localDescription.sdp) + sections.join('');\n      var complete = pc.transceivers.every(function (transceiver) {\n        return transceiver.iceGatherer && transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n\n        pc._emitGatheringStateChange();\n      } // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n\n\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n\n        pc.iceGatheringState = 'complete';\n\n        pc._emitGatheringStateChange();\n      }\n    }; // emit already gathered candidates.\n\n\n    window.setTimeout(function () {\n      bufferedCandidateEvents.forEach(function (e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  }; // Create ICE transport and DTLS transport.\n\n\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function () {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n\n    iceTransport.onicestatechange = function () {\n      pc._updateIceConnectionState();\n\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n\n    dtlsTransport.ondtlsstatechange = function () {\n      pc._updateConnectionState();\n    };\n\n    dtlsTransport.onerror = function () {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state', {\n        value: 'failed',\n        writable: true\n      });\n\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  }; // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n\n\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function (sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  }; // Start the RTP Sender and Receiver for a transceiver.\n\n\n  RTCPeerConnection.prototype._transceive = function (transceiver, send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities, transceiver.remoteCapabilities);\n\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n\n      transceiver.rtpSender.send(params);\n    }\n\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video' && transceiver.recvEncodingParameters && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function (p) {\n          delete p.rtx;\n        });\n      }\n\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function (description) {\n    var pc = this; // Note: pranswer is not supported.\n\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError', 'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription', description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError', 'Can not set local ' + description.type + ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function (mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n      pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart, 'a=ice-lite').length > 0;\n      sections.forEach(function (mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities; // treat bundle-only as not-rejected.\n\n        var rejected = SDPUtils.isRejected(mediaSection) && SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection, sessionpart);\n\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters, isIceLite ? 'controlling' : 'controlled');\n            }\n\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          } // Calculate intersection of capabilities.\n\n\n          var params = getCommonCapabilities(localCapabilities, remoteCapabilities); // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n\n          pc._transceive(transceiver, params.codecs.length > 0, false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function (description) {\n    var pc = this; // Note: pranswer is not supported.\n\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError', 'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription', description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError', 'Can not set remote ' + description.type + ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function (stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart, 'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart, 'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart, 'a=ice-options:')[0];\n\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ').indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function (mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection); // treat bundle-only as not-rejected.\n\n      var rejected = SDPUtils.isRejected(mediaSection) && SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier(); // Reject datachannels which are not implemented yet.\n\n      if (rejected || kind === 'application' && (protocol === 'DTLS/SCTP' || protocol === 'UDP/DTLS/SCTP')) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] && pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n      var track; // FIXME: ensure the mediaSection has rtcp-mux set.\n\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection, sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection, sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n\n      recvEncodingParameters = SDPUtils.parseRtpEncodingParameters(mediaSection);\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n      var isComplete = SDPUtils.matchPrefix(mediaSection, 'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:').map(function (cand) {\n        return SDPUtils.parseCandidate(cand);\n      }).filter(function (cand) {\n        return cand.component === 1;\n      }); // Check if we can use BUNDLE and dispose transports.\n\n      if ((description.type === 'offer' || description.type === 'answer') && !rejected && usingBundle && sdpMLineIndex > 0 && pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n\n        pc.transceivers[sdpMLineIndex].iceGatherer = pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport = pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport = pc.transceivers[0].dtlsTransport;\n\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(pc.transceivers[0].dtlsTransport);\n        }\n\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(pc.transceivers[0].dtlsTransport);\n        }\n      }\n\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] || pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex, usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function (candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind); // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(function (codec) {\n            return codec.name !== 'rtx';\n          });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }]; // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n\n        var isNewTrack = false;\n\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver || new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track; // FIXME: does not work with Plan B.\n\n            if (remoteMsid && remoteMsid.stream === '-') {// no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function () {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n\n              Object.defineProperty(track, 'id', {\n                get: function () {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n\n              stream = streams.default;\n            }\n\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function (s) {\n            var nativeTrack = s.getTracks().find(function (t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters; // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n\n        pc._transceive(pc.transceivers[sdpMLineIndex], false, isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters = recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities = remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) && (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function (candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters, 'controlling');\n          }\n\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        } // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n\n\n        var commonCapabilities = getCommonCapabilities(transceiver.localCapabilities, transceiver.remoteCapabilities);\n        var hasRtx = commonCapabilities.codecs.filter(function (c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver, direction === 'sendrecv' || direction === 'recvonly', direction === 'sendrecv' || direction === 'sendonly'); // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n\n\n        if (rtpReceiver && (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    Object.keys(streams).forEach(function (sid) {\n      var stream = streams[sid];\n\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function () {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function (item) {\n          var track = item[0];\n          var receiver = item[1];\n\n          if (stream.id !== item[2].id) {\n            return;\n          }\n\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function (item) {\n      if (item[2]) {\n        return;\n      }\n\n      fireAddTrack(pc, item[0], item[1], []);\n    }); // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n\n    window.setTimeout(function () {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n\n      pc.transceivers.forEach(function (transceiver) {\n        if (transceiver.iceTransport && transceiver.iceTransport.state === 'new' && transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' + 'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function () {\n    this.transceivers.forEach(function (transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    }); // FIXME: clean up tracks, local streams, remote streams, etc\n\n    this._isClosed = true;\n\n    this._updateSignalingState('closed');\n  }; // Update the signaling state.\n\n\n  RTCPeerConnection.prototype._updateSignalingState = function (newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n\n    this._dispatchEvent('signalingstatechange', event);\n  }; // Determine whether to fire the negotiationneeded event.\n\n\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function () {\n    var pc = this;\n\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n\n    this.needNegotiation = true;\n    window.setTimeout(function () {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  }; // Update the ice connection state.\n\n\n  RTCPeerConnection.prototype._updateIceConnectionState = function () {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function (transceiver) {\n      if (transceiver.iceTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n      }\n    });\n    newState = 'new';\n\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  }; // Update the connection state.\n\n\n  RTCPeerConnection.prototype._updateConnectionState = function () {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function (transceiver) {\n      if (transceiver.iceTransport && transceiver.dtlsTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      }\n    }); // ICETransport.completed and connected are the same for this purpose.\n\n    states.connected += states.completed;\n    newState = 'new';\n\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function () {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError', 'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function (t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function (t) {\n      return t.kind === 'video';\n    }).length; // Determine number of audio and video tracks we need to send/recv.\n\n    var offerOptions = arguments[0];\n\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError('Legacy mandatory/optional constraints not supported.');\n      }\n\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function (transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    }); // Create M-lines for recvonly streams.\n\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n\n        numAudioTracks--;\n      }\n\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId, pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex, pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind); // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(function (codec) {\n          return codec.name !== 'rtx';\n        });\n      }\n\n      localCapabilities.codecs.forEach(function (codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' && codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        } // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n\n\n        if (transceiver.remoteCapabilities && transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function (remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() && codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function (hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities && transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function (rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      }); // generate an ssrc now, to be used later in rtpSender.send\n\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' && !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    }); // always offer BUNDLE and dispose on return if not supported.\n\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function (t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n\n    sdp += 'a=ice-options:trickle\\r\\n';\n    pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities, 'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' && (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function (cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function () {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError', 'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' || pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError', 'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId, pc._sdpSessionVersion++);\n\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function (t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n\n    sdp += 'a=ice-options:trickle\\r\\n';\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') {\n            // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol + ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' + 'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' + 'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' + 'a=inactive\\r\\n' + 'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      } // FIXME: look at direction.\n\n\n      if (transceiver.stream) {\n        var localTrack;\n\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' && !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      } // Calculate intersection of capabilities.\n\n\n      var commonCapabilities = getCommonCapabilities(transceiver.localCapabilities, transceiver.remoteCapabilities);\n      var hasRtx = commonCapabilities.codecs.filter(function (c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities, 'answer', transceiver.stream, pc._dtlsRole);\n\n      if (transceiver.rtcpParameters && transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function (candidate) {\n    var pc = this;\n    var sections;\n\n    if (candidate && !(candidate.sdpMLineIndex !== undefined || candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    } // TODO: needs to go into ops queue.\n\n\n    return new Promise(function (resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError', 'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp = SDPUtils.getDescription(pc._remoteDescription.sdp) + sections.join('');\n\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n\n        var transceiver = pc.transceivers[sdpMLineIndex];\n\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n\n          var cand = Object.keys(candidate.candidate).length > 0 ? SDPUtils.parseCandidate(candidate.candidate) : {}; // Ignore Chrome's invalid candidates since Edge does not like them.\n\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          } // Ignore RTCP candidates, we assume RTCP-MUX.\n\n\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          } // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n\n\n          if (sdpMLineIndex === 0 || sdpMLineIndex > 0 && transceiver.iceTransport !== pc.transceivers[0].iceTransport) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError', 'Can not add ICE candidate'));\n            }\n          } // update the remoteDescription.\n\n\n          var candidateString = candidate.candidate.trim();\n\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' + (cand.type ? candidateString : 'end-of-candidates') + '\\r\\n';\n          pc._remoteDescription.sdp = SDPUtils.getDescription(pc._remoteDescription.sdp) + sections.join('');\n        } else {\n          return reject(makeError('OperationError', 'Can not add ICE candidate'));\n        }\n      }\n\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function (selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function (transceiver) {\n        if (transceiver.rtpSender && transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function (transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport', 'dtlsTransport'].forEach(function (method) {\n        if (transceiver[method]) {\n          promises.push(transceiver[method].getStats());\n        }\n      });\n    });\n    return Promise.all(promises).then(function (allStats) {\n      var results = new Map();\n      allStats.forEach(function (stats) {\n        stats.forEach(function (stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  }; // fix low-level stat names and return Map instead of object.\n\n\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer', 'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function (ortcObjectName) {\n    var obj = window[ortcObjectName];\n\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n\n      obj.prototype.getStats = function () {\n        return nativeGetstats.apply(this).then(function (nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function (id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  }); // legacy callback shims. Should be moved to adapter.js some days.\n\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function (method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n\n    RTCPeerConnection.prototype[method] = function () {\n      var args = arguments;\n\n      if (typeof args[0] === 'function' || typeof args[1] === 'function') {\n        // legacy\n        return nativeMethod.apply(this, [arguments[2]]).then(function (description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function (error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function (method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n\n    RTCPeerConnection.prototype[method] = function () {\n      var args = arguments;\n\n      if (typeof args[1] === 'function' || typeof args[2] === 'function') {\n        // legacy\n        return nativeMethod.apply(this, arguments).then(function () {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function (error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n\n      return nativeMethod.apply(this, arguments);\n    };\n  }); // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n\n  ['getStats'].forEach(function (method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n\n    RTCPeerConnection.prototype[method] = function () {\n      var args = arguments;\n\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments).then(function () {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n  return RTCPeerConnection;\n};\n},{\"sdp\":\"YHvh\"}],\"YdKx\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetUserMedia = shimGetUserMedia;\n\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n\n  var shimError_ = function (e) {\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString: function () {\n        return this.name;\n      }\n    };\n  }; // getUserMedia error shim.\n\n\n  var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n\n  navigator.mediaDevices.getUserMedia = function (c) {\n    return origGetUserMedia(c).catch(function (e) {\n      return Promise.reject(shimError_(e));\n    });\n  };\n}\n},{}],\"P3bV\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = shimGetDisplayMedia;\n\nfunction shimGetDisplayMedia(window) {\n  if (!('getDisplayMedia' in window.navigator)) {\n    return;\n  }\n\n  if (!window.navigator.mediaDevices) {\n    return;\n  }\n\n  if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n\n  window.navigator.mediaDevices.getDisplayMedia = window.navigator.getDisplayMedia.bind(window.navigator);\n}\n},{}],\"XRic\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimPeerConnection = shimPeerConnection;\nexports.shimReplaceTrack = shimReplaceTrack;\nObject.defineProperty(exports, \"shimGetUserMedia\", {\n  enumerable: true,\n  get: function () {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\nObject.defineProperty(exports, \"shimGetDisplayMedia\", {\n  enumerable: true,\n  get: function () {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\n\nvar utils = _interopRequireWildcard(require(\"../utils\"));\n\nvar _filtericeservers = require(\"./filtericeservers\");\n\nvar _rtcpeerconnectionShim = _interopRequireDefault(require(\"rtcpeerconnection-shim\"));\n\nvar _getusermedia = require(\"./getusermedia\");\n\nvar _getdisplaymedia = require(\"./getdisplaymedia\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction shimPeerConnection(window) {\n  var browserDetails = utils.detectBrowser(window);\n\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function RTCIceCandidate(args) {\n        return args;\n      };\n    }\n\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function RTCSessionDescription(args) {\n        return args;\n      };\n    } // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n\n\n    if (browserDetails.version < 15025) {\n      var origMSTEnabled = Object.getOwnPropertyDescriptor(window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set: function (value) {\n          origMSTEnabled.set.call(this, value);\n          var ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  } // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n\n\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get: function () {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n\n        return this._dtmf;\n      }\n    });\n  } // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n\n\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n\n  var RTCPeerConnectionShim = (0, _rtcpeerconnectionShim.default)(window, browserDetails.version);\n\n  window.RTCPeerConnection = function RTCPeerConnection(config) {\n    if (config && config.iceServers) {\n      config.iceServers = (0, _filtericeservers.filterIceServers)(config.iceServers, browserDetails.version);\n      utils.log('ICE servers after filtering:', config.iceServers);\n    }\n\n    return new RTCPeerConnectionShim(config);\n  };\n\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\n\nfunction shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender && !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack = window.RTCRtpSender.prototype.setTrack;\n  }\n}\n},{\"../utils\":\"iSxC\",\"./filtericeservers\":\"NZ1C\",\"rtcpeerconnection-shim\":\"NJ2u\",\"./getusermedia\":\"YdKx\",\"./getdisplaymedia\":\"P3bV\"}],\"GzSv\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetUserMedia = shimGetUserMedia;\n\nvar utils = _interopRequireWildcard(require(\"../utils\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function (obj) { return typeof obj; }; } else { _typeof = function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction shimGetUserMedia(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n  var MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function (constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia', 'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 && 'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    var remap = function (obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n\n    navigator.mediaDevices.getUserMedia = function (c) {\n      if (_typeof(c) === 'object' && _typeof(c.audio) === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n\n      MediaStreamTrack.prototype.getSettings = function () {\n        var obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n\n      MediaStreamTrack.prototype.applyConstraints = function (c) {\n        if (this.kind === 'audio' && _typeof(c) === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n},{\"../utils\":\"iSxC\"}],\"UuGU\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = shimGetDisplayMedia;\n\nfunction shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n\n  if (!window.navigator.mediaDevices) {\n    return;\n  }\n\n  window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n    if (!(constraints && constraints.video)) {\n      var err = new DOMException('getDisplayMedia without video ' + 'constraints is undefined');\n      err.name = 'NotFoundError'; // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n\n      err.code = 8;\n      return Promise.reject(err);\n    }\n\n    if (constraints.video === true) {\n      constraints.video = {\n        mediaSource: preferredMediaSource\n      };\n    } else {\n      constraints.video.mediaSource = preferredMediaSource;\n    }\n\n    return window.navigator.mediaDevices.getUserMedia(constraints);\n  };\n}\n},{}],\"Fzdr\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimOnTrack = shimOnTrack;\nexports.shimPeerConnection = shimPeerConnection;\nexports.shimSenderGetStats = shimSenderGetStats;\nexports.shimReceiverGetStats = shimReceiverGetStats;\nexports.shimRemoveStream = shimRemoveStream;\nexports.shimRTCDataChannel = shimRTCDataChannel;\nexports.shimAddTransceiver = shimAddTransceiver;\nexports.shimCreateOffer = shimCreateOffer;\nexports.shimCreateAnswer = shimCreateAnswer;\nObject.defineProperty(exports, \"shimGetUserMedia\", {\n  enumerable: true,\n  get: function () {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\nObject.defineProperty(exports, \"shimGetDisplayMedia\", {\n  enumerable: true,\n  get: function () {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\n\nvar utils = _interopRequireWildcard(require(\"../utils\"));\n\nvar _getusermedia = require(\"./getusermedia\");\n\nvar _getdisplaymedia = require(\"./getdisplaymedia\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function (obj) { return typeof obj; }; } else { _typeof = function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction shimOnTrack(window) {\n  if (_typeof(window) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get: function () {\n        return {\n          receiver: this.receiver\n        };\n      }\n    });\n  }\n}\n\nfunction shimPeerConnection(window) {\n  var browserDetails = utils.detectBrowser(window);\n\n  if (_typeof(window) !== 'object' || !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n\n      var methodObj = _defineProperty({}, method, function () {\n        arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n        return nativeMethod.apply(this, arguments);\n      });\n\n      window.RTCPeerConnection.prototype[method] = methodObj[method];\n    });\n  } // support for addIceCandidate(null or undefined)\n  // as well as ignoring {sdpMid, candidate: \"\"}\n\n\n  if (browserDetails.version < 68) {\n    var nativeAddIceCandidate = window.RTCPeerConnection.prototype.addIceCandidate;\n\n    window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n\n        return Promise.resolve();\n      } // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n\n\n      if (arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n\n  var modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n  var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    var [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null]).then(function (stats) {\n      if (browserDetails.version < 53 && !onSucc) {\n        // Shim only promise getStats with spec-hyphens in type names\n        // Leave callback version alone; misc old uses of forEach before Map\n        try {\n          stats.forEach(function (stat) {\n            stat.type = modernStatsTypes[stat.type] || stat.type;\n          });\n        } catch (e) {\n          if (e.name !== 'TypeError') {\n            throw e;\n          } // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n\n\n          stats.forEach(function (stat, i) {\n            stats.set(i, Object.assign({}, stat, {\n              type: modernStatsTypes[stat.type] || stat.type\n            }));\n          });\n        }\n      }\n\n      return stats;\n    }).then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderGetStats(window) {\n  if (!(_typeof(window) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n    return;\n  }\n\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n\n  var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      var _this = this;\n\n      var senders = origGetSenders.apply(this, []);\n      senders.forEach(function (sender) {\n        return sender._pc = _this;\n      });\n      return senders;\n    };\n  }\n\n  var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      var sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) : Promise.resolve(new Map());\n  };\n}\n\nfunction shimReceiverGetStats(window) {\n  if (!(_typeof(window) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n    return;\n  }\n\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n\n  var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      var _this2 = this;\n\n      var receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(function (receiver) {\n        return receiver._pc = _this2;\n      });\n      return receivers;\n    };\n  }\n\n  utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nfunction shimRemoveStream(window) {\n  if (!window.RTCPeerConnection || 'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    var _this3 = this;\n\n    utils.deprecated('removeStream', 'removeTrack');\n    this.getSenders().forEach(function (sender) {\n      if (sender.track && stream.getTracks().includes(sender.track)) {\n        _this3.removeTrack(sender);\n      }\n    });\n  };\n}\n\nfunction shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nfunction shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(_typeof(window) === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n\n  var origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver = function addTransceiver() {\n      this.setParametersPromises = [];\n      var initParameters = arguments[1];\n      var shouldPerformCheck = initParameters && 'sendEncodings' in initParameters;\n\n      if (shouldPerformCheck) {\n        // If sendEncodings params are provided, validate grammar\n        initParameters.sendEncodings.forEach(function (encodingParam) {\n          if ('rid' in encodingParam) {\n            var ridRegex = /^[a-z0-9]{0,16}$/i;\n\n            if (!ridRegex.test(encodingParam.rid)) {\n              throw new TypeError('Invalid RID value provided.');\n            }\n          }\n\n          if ('scaleResolutionDownBy' in encodingParam) {\n            if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n              throw new RangeError('scale_resolution_down_by must be >= 1.0');\n            }\n          }\n\n          if ('maxFramerate' in encodingParam) {\n            if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n              throw new RangeError('max_framerate must be >= 0.0');\n            }\n          }\n        });\n      }\n\n      var transceiver = origAddTransceiver.apply(this, arguments);\n\n      if (shouldPerformCheck) {\n        // Check if the init options were applied. If not we do this in an\n        // asynchronous way and save the promise reference in a global object.\n        // This is an ugly hack, but at the same time is way more robust than\n        // checking the sender parameters before and after the createOffer\n        // Also note that after the createoffer we are not 100% sure that\n        // the params were asynchronously applied so we might miss the\n        // opportunity to recreate offer.\n        var {\n          sender: sender\n        } = transceiver;\n        var params = sender.getParameters();\n\n        if (!('encodings' in params)) {\n          params.encodings = initParameters.sendEncodings;\n          this.setParametersPromises.push(sender.setParameters(params).catch(function () {}));\n        }\n      }\n\n      return transceiver;\n    };\n  }\n}\n\nfunction shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(_typeof(window) === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n\n  var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    var _arguments = arguments,\n        _this4 = this;\n\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises).then(function () {\n        return origCreateOffer.apply(_this4, _arguments);\n      }).finally(function () {\n        _this4.setParametersPromises = [];\n      });\n    }\n\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nfunction shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(_typeof(window) === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n\n  var origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    var _arguments2 = arguments,\n        _this5 = this;\n\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises).then(function () {\n        return origCreateAnswer.apply(_this5, _arguments2);\n      }).finally(function () {\n        _this5.setParametersPromises = [];\n      });\n    }\n\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n},{\"../utils\":\"iSxC\",\"./getusermedia\":\"GzSv\",\"./getdisplaymedia\":\"UuGU\"}],\"t1lL\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimLocalStreamsAPI = shimLocalStreamsAPI;\nexports.shimRemoteStreamsAPI = shimRemoteStreamsAPI;\nexports.shimCallbacksAPI = shimCallbacksAPI;\nexports.shimGetUserMedia = shimGetUserMedia;\nexports.shimConstraints = shimConstraints;\nexports.shimRTCIceServerUrls = shimRTCIceServerUrls;\nexports.shimTrackEventTransceiver = shimTrackEventTransceiver;\nexports.shimCreateOfferLegacy = shimCreateOfferLegacy;\n\nvar utils = _interopRequireWildcard(require(\"../utils\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function (obj) { return typeof obj; }; } else { _typeof = function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction shimLocalStreamsAPI(window) {\n  if (_typeof(window) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n\n      return this._localStreams;\n    };\n  }\n\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this = this;\n\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      } // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n\n\n      stream.getAudioTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n      stream.getVideoTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track) {\n      var stream = arguments[1];\n\n      if (stream) {\n        if (!this._localStreams) {\n          this._localStreams = [stream];\n        } else if (!this._localStreams.includes(stream)) {\n          this._localStreams.push(stream);\n        }\n      }\n\n      return _addTrack.apply(this, arguments);\n    };\n  }\n\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this2 = this;\n\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n\n      var index = this._localStreams.indexOf(stream);\n\n      if (index === -1) {\n        return;\n      }\n\n      this._localStreams.splice(index, 1);\n\n      var tracks = stream.getTracks();\n      this.getSenders().forEach(function (sender) {\n        if (tracks.includes(sender.track)) {\n          _this2.removeTrack(sender);\n        }\n      });\n    };\n  }\n}\n\nfunction shimRemoteStreamsAPI(window) {\n  if (_typeof(window) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams = function getRemoteStreams() {\n      return this._remoteStreams ? this._remoteStreams : [];\n    };\n  }\n\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get: function () {\n        return this._onaddstream;\n      },\n      set: function (f) {\n        var _this3 = this;\n\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!_this3._remoteStreams) {\n              _this3._remoteStreams = [];\n            }\n\n            if (_this3._remoteStreams.includes(stream)) {\n              return;\n            }\n\n            _this3._remoteStreams.push(stream);\n\n            var event = new Event('addstream');\n            event.stream = stream;\n\n            _this3.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      var pc = this;\n\n      if (!this._onaddstreampoly) {\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!pc._remoteStreams) {\n              pc._remoteStreams = [];\n            }\n\n            if (pc._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n\n            pc._remoteStreams.push(stream);\n\n            var event = new Event('addstream');\n            event.stream = stream;\n            pc.dispatchEvent(event);\n          });\n        });\n      }\n\n      return origSetRemoteDescription.apply(pc, arguments);\n    };\n  }\n}\n\nfunction shimCallbacksAPI(window) {\n  if (_typeof(window) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n\n  var prototype = window.RTCPeerConnection.prototype;\n  var origCreateOffer = prototype.createOffer;\n  var origCreateAnswer = prototype.createAnswer;\n  var setLocalDescription = prototype.setLocalDescription;\n  var setRemoteDescription = prototype.setRemoteDescription;\n  var addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer = function createOffer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateOffer.apply(this, [options]);\n\n    if (!failureCallback) {\n      return promise;\n    }\n\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.createAnswer = function createAnswer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateAnswer.apply(this, [options]);\n\n    if (!failureCallback) {\n      return promise;\n    }\n\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  var withCallback = function (description, successCallback, failureCallback) {\n    var promise = setLocalDescription.apply(this, [description]);\n\n    if (!failureCallback) {\n      return promise;\n    }\n\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function (description, successCallback, failureCallback) {\n    var promise = setRemoteDescription.apply(this, [description]);\n\n    if (!failureCallback) {\n      return promise;\n    }\n\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function (candidate, successCallback, failureCallback) {\n    var promise = addIceCandidate.apply(this, [candidate]);\n\n    if (!failureCallback) {\n      return promise;\n    }\n\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.addIceCandidate = withCallback;\n}\n\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    var mediaDevices = navigator.mediaDevices;\n\n    var _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n\n    navigator.mediaDevices.getUserMedia = function (constraints) {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints).then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nfunction shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({}, constraints, {\n      video: utils.compactObject(constraints.video)\n    });\n  }\n\n  return constraints;\n}\n\nfunction shimRTCIceServerUrls(window) {\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  var OrigPeerConnection = window.RTCPeerConnection;\n\n  window.RTCPeerConnection = function RTCPeerConnection(pcConfig, pcConstraints) {\n    if (pcConfig && pcConfig.iceServers) {\n      var newIceServers = [];\n\n      for (var i = 0; i < pcConfig.iceServers.length; i++) {\n        var server = pcConfig.iceServers[i];\n\n        if (!server.hasOwnProperty('urls') && server.hasOwnProperty('url')) {\n          utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n          server = JSON.parse(JSON.stringify(server));\n          server.urls = server.url;\n          delete server.url;\n          newIceServers.push(server);\n        } else {\n          newIceServers.push(pcConfig.iceServers[i]);\n        }\n      }\n\n      pcConfig.iceServers = newIceServers;\n    }\n\n    return new OrigPeerConnection(pcConfig, pcConstraints);\n  };\n\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype; // wrap static methods. Currently just generateCertificate.\n\n  if ('generateCertificate' in window.RTCPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get: function () {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nfunction shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (_typeof(window) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get: function () {\n        return {\n          receiver: this.receiver\n        };\n      }\n    });\n  }\n}\n\nfunction shimCreateOfferLegacy(window) {\n  var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n\n  window.RTCPeerConnection.prototype.createOffer = function createOffer(offerOptions) {\n    if (offerOptions) {\n      if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n      }\n\n      var audioTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'audio';\n      });\n\n      if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n        if (audioTransceiver.direction === 'sendrecv') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('sendonly');\n          } else {\n            audioTransceiver.direction = 'sendonly';\n          }\n        } else if (audioTransceiver.direction === 'recvonly') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('inactive');\n          } else {\n            audioTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveAudio === true && !audioTransceiver) {\n        this.addTransceiver('audio');\n      }\n\n      if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n      }\n\n      var videoTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'video';\n      });\n\n      if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n        if (videoTransceiver.direction === 'sendrecv') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('sendonly');\n          } else {\n            videoTransceiver.direction = 'sendonly';\n          }\n        } else if (videoTransceiver.direction === 'recvonly') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('inactive');\n          } else {\n            videoTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveVideo === true && !videoTransceiver) {\n        this.addTransceiver('video');\n      }\n    }\n\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n},{\"../utils\":\"iSxC\"}],\"GOQK\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimRTCIceCandidate = shimRTCIceCandidate;\nexports.shimMaxMessageSize = shimMaxMessageSize;\nexports.shimSendThrowTypeError = shimSendThrowTypeError;\nexports.shimConnectionState = shimConnectionState;\nexports.removeAllowExtmapMixed = removeAllowExtmapMixed;\n\nvar _sdp = _interopRequireDefault(require(\"sdp\"));\n\nvar utils = _interopRequireWildcard(require(\"./utils\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function (obj) { return typeof obj; }; } else { _typeof = function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || window.RTCIceCandidate && 'foundation' in window.RTCIceCandidate.prototype) {\n    return;\n  }\n\n  var NativeRTCIceCandidate = window.RTCIceCandidate;\n\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (_typeof(args) === 'object' && args.candidate && args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      var nativeCandidate = new NativeRTCIceCandidate(args);\n\n      var parsedCandidate = _sdp.default.parseCandidate(args.candidate);\n\n      var augmentedCandidate = Object.assign(nativeCandidate, parsedCandidate); // Add a serializer that does not serialize the extra attributes.\n\n      augmentedCandidate.toJSON = function toJSON() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment\n        };\n      };\n\n      return augmentedCandidate;\n    }\n\n    return new NativeRTCIceCandidate(args);\n  };\n\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype; // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', function (e) {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n\n    return e;\n  });\n}\n\nfunction shimMaxMessageSize(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  var browserDetails = utils.detectBrowser(window);\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get: function () {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  var sctpInDescription = function (description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n\n    var sections = _sdp.default.splitSections(description.sdp);\n\n    sections.shift();\n    return sections.some(function (mediaSection) {\n      var mLine = _sdp.default.parseMLine(mediaSection);\n\n      return mLine && mLine.kind === 'application' && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  var getRemoteFirefoxVersion = function (description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n\n    var version = parseInt(match[1], 10); // Test for NaN (yes, this is ugly)\n\n    return version !== version ? -1 : version;\n  };\n\n  var getCanSendMaxMessageSize = function (remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    var canSendMaxMessageSize = 65536;\n\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize = browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n\n    return canSendMaxMessageSize;\n  };\n\n  var getMaxMessageSize = function (description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    var maxMessageSize = 65536; // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n\n    if (browserDetails.browser === 'firefox' && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    var match = _sdp.default.matchPrefix(description.sdp, 'a=max-message-size:');\n\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' && remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n\n    return maxMessageSize;\n  };\n\n  var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n\n  window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n    this._sctp = null; // Chrome decided to not expose .sctp in plan-b mode.\n    // As usual, adapter.js has to do an 'ugly worakaround'\n    // to cover up the mess.\n\n    if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n      var {\n        sdpSemantics: sdpSemantics\n      } = this.getConfiguration();\n\n      if (sdpSemantics === 'plan-b') {\n        Object.defineProperty(this, 'sctp', {\n          get: function () {\n            return typeof this._sctp === 'undefined' ? null : this._sctp;\n          },\n          enumerable: true,\n          configurable: true\n        });\n      }\n    }\n\n    if (sctpInDescription(arguments[0])) {\n      // Check if the remote is FF.\n      var isFirefox = getRemoteFirefoxVersion(arguments[0]); // Get the maximum message size the local peer is capable of sending\n\n      var canSendMMS = getCanSendMaxMessageSize(isFirefox); // Get the maximum message size of the remote peer.\n\n      var remoteMMS = getMaxMessageSize(arguments[0], isFirefox); // Determine final maximum message size\n\n      var maxMessageSize;\n\n      if (canSendMMS === 0 && remoteMMS === 0) {\n        maxMessageSize = Number.POSITIVE_INFINITY;\n      } else if (canSendMMS === 0 || remoteMMS === 0) {\n        maxMessageSize = Math.max(canSendMMS, remoteMMS);\n      } else {\n        maxMessageSize = Math.min(canSendMMS, remoteMMS);\n      } // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n      // attribute.\n\n\n      var sctp = {};\n      Object.defineProperty(sctp, 'maxMessageSize', {\n        get: function () {\n          return maxMessageSize;\n        }\n      });\n      this._sctp = sctp;\n    }\n\n    return origSetRemoteDescription.apply(this, arguments);\n  };\n}\n\nfunction shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection && 'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  } // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n\n  function wrapDcSend(dc, pc) {\n    var origDataChannelSend = dc.send;\n\n    dc.send = function send() {\n      var data = arguments[0];\n      var length = data.length || data.size || data.byteLength;\n\n      if (dc.readyState === 'open' && pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' + pc.sctp.maxMessageSize + ' bytes)');\n      }\n\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n\n  var origCreateDataChannel = window.RTCPeerConnection.prototype.createDataChannel;\n\n  window.RTCPeerConnection.prototype.createDataChannel = function createDataChannel() {\n    var dataChannel = origCreateDataChannel.apply(this, arguments);\n    wrapDcSend(dataChannel, this);\n    return dataChannel;\n  };\n\n  utils.wrapPeerConnectionEvent(window, 'datachannel', function (e) {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\n\n\nfunction shimConnectionState(window) {\n  if (!window.RTCPeerConnection || 'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n\n  var proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get: function () {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get: function () {\n      return this._onconnectionstatechange || null;\n    },\n    set: function (cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange', this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n\n      if (cb) {\n        this.addEventListener('connectionstatechange', this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ['setLocalDescription', 'setRemoteDescription'].forEach(function (method) {\n    var origMethod = proto[method];\n\n    proto[method] = function () {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = function (e) {\n          var pc = e.target;\n\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            var newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n\n          return e;\n        };\n\n        this.addEventListener('iceconnectionstatechange', this._connectionstatechangepoly);\n      }\n\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nfunction removeAllowExtmapMixed(window) {\n  /* remove a=extmap-allow-mixed for Chrome < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  var browserDetails = utils.detectBrowser(window);\n\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n\n  var nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n\n  window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      desc.sdp = desc.sdp.split('\\n').filter(function (line) {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n    }\n\n    return nativeSRD.apply(this, arguments);\n  };\n}\n},{\"sdp\":\"YHvh\",\"./utils\":\"iSxC\"}],\"KtlG\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.adapterFactory = adapterFactory;\n\nvar utils = _interopRequireWildcard(require(\"./utils\"));\n\nvar chromeShim = _interopRequireWildcard(require(\"./chrome/chrome_shim\"));\n\nvar edgeShim = _interopRequireWildcard(require(\"./edge/edge_shim\"));\n\nvar firefoxShim = _interopRequireWildcard(require(\"./firefox/firefox_shim\"));\n\nvar safariShim = _interopRequireWildcard(require(\"./safari/safari_shim\"));\n\nvar commonShim = _interopRequireWildcard(require(\"./common_shim\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n// Browser shims.\n// Shimming starts here.\nfunction adapterFactory() {\n  var {\n    window: window\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    shimChrome: true,\n    shimFirefox: true,\n    shimEdge: true,\n    shimSafari: true\n  };\n  // Utils.\n  var logging = utils.log;\n  var browserDetails = utils.detectBrowser(window);\n  var adapter = {\n    browserDetails: browserDetails,\n    commonShim: commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  }; // Shim browser if found.\n\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection || !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n\n      logging('adapter.js shimming chrome.'); // Export to the adapter global object visible in the browser.\n\n      adapter.browserShim = chromeShim;\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      chromeShim.shimGetStats(window);\n      chromeShim.shimSenderReceiverGetStats(window);\n      chromeShim.fixNegotiationNeeded(window);\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection || !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n\n      logging('adapter.js shimming firefox.'); // Export to the adapter global object visible in the browser.\n\n      adapter.browserShim = firefoxShim;\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      firefoxShim.shimRemoveStream(window);\n      firefoxShim.shimSenderGetStats(window);\n      firefoxShim.shimReceiverGetStats(window);\n      firefoxShim.shimRTCDataChannel(window);\n      firefoxShim.shimAddTransceiver(window);\n      firefoxShim.shimCreateOffer(window);\n      firefoxShim.shimCreateAnswer(window);\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n\n      logging('adapter.js shimming edge.'); // Export to the adapter global object visible in the browser.\n\n      adapter.browserShim = edgeShim;\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimGetDisplayMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window); // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n\n      logging('adapter.js shimming safari.'); // Export to the adapter global object visible in the browser.\n\n      adapter.browserShim = safariShim;\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCreateOfferLegacy(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n},{\"./utils\":\"iSxC\",\"./chrome/chrome_shim\":\"uI5X\",\"./edge/edge_shim\":\"XRic\",\"./firefox/firefox_shim\":\"Fzdr\",\"./safari/safari_shim\":\"t1lL\",\"./common_shim\":\"GOQK\"}],\"tI1X\":[function(require,module,exports) {\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _adapter_factory = require(\"./adapter_factory.js\");\n\nvar adapter = (0, _adapter_factory.adapterFactory)({\n  window: window\n});\nvar _default = adapter;\nexports.default = _default;\n},{\"./adapter_factory.js\":\"KtlG\"}],\"sXtV\":[function(require,module,exports) {\n\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar webrtc_adapter_1 = __importDefault(require(\"webrtc-adapter\"));\n\nexports.webRTCAdapter = webrtc_adapter_1.default;\n},{\"webrtc-adapter\":\"tI1X\"}],\"I31f\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar adapter_1 = require(\"./adapter\");\n\nexports.Supports = new (\n/** @class */\nfunction () {\n  function class_1() {\n    this.isIOS = ['iPad', 'iPhone', 'iPod'].includes(navigator.platform);\n    this.supportedBrowsers = ['firefox', 'chrome', 'safari'];\n    this.minFirefoxVersion = 59;\n    this.minChromeVersion = 72;\n    this.minSafariVersion = 605;\n  }\n\n  class_1.prototype.isWebRTCSupported = function () {\n    return typeof RTCPeerConnection !== 'undefined';\n  };\n\n  ;\n\n  class_1.prototype.isBrowserSupported = function () {\n    var browser = this.getBrowser();\n    var version = this.getVersion();\n    var validBrowser = this.supportedBrowsers.includes(browser);\n    if (!validBrowser) return false;\n    if (browser === 'chrome') return version >= this.minChromeVersion;\n    if (browser === 'firefox') return version >= this.minFirefoxVersion;\n    if (browser === 'safari') return !this.isIOS && version >= this.minSafariVersion;\n    return false;\n  };\n\n  class_1.prototype.getBrowser = function () {\n    return adapter_1.webRTCAdapter.browserDetails.browser;\n  };\n\n  class_1.prototype.getVersion = function () {\n    return adapter_1.webRTCAdapter.browserDetails.version || 0;\n  };\n\n  class_1.prototype.isUnifiedPlanSupported = function () {\n    var browser = this.getBrowser();\n    var version = adapter_1.webRTCAdapter.browserDetails.version || 0;\n    if (browser === 'chrome' && version < 72) return false;\n    if (browser === 'firefox' && version >= 59) return true;\n    if (!window.RTCRtpTransceiver || !('currentDirection' in RTCRtpTransceiver.prototype)) return false;\n    var tempPc;\n    var supported = false;\n\n    try {\n      tempPc = new RTCPeerConnection();\n      tempPc.addTransceiver('audio');\n      supported = true;\n    } catch (e) {} finally {\n      if (tempPc) {\n        tempPc.close();\n      }\n    }\n\n    return supported;\n  };\n\n  class_1.prototype.toString = function () {\n    return \"Supports: \\n    browser:\" + this.getBrowser() + \" \\n    version:\" + this.getVersion() + \" \\n    isIOS:\" + this.isIOS + \" \\n    isWebRTCSupported:\" + this.isWebRTCSupported() + \" \\n    isBrowserSupported:\" + this.isBrowserSupported() + \" \\n    isUnifiedPlanSupported:\" + this.isUnifiedPlanSupported();\n  };\n\n  return class_1;\n}())();\n},{\"./adapter\":\"sXtV\"}],\"BHXf\":[function(require,module,exports) {\n\"use strict\";\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar BinaryPack = __importStar(require(\"peerjs-js-binarypack\"));\n\nvar supports_1 = require(\"./supports\");\n\nvar DEFAULT_CONFIG = {\n  iceServers: [{\n    urls: \"stun:stun.l.google.com:19302\"\n  }, {\n    urls: \"turn:0.peerjs.com:3478\",\n    username: \"peerjs\",\n    credential: \"peerjsp\"\n  }],\n  sdpSemantics: \"unified-plan\"\n};\nexports.util = new (\n/** @class */\nfunction () {\n  function class_1() {\n    this.CLOUD_HOST = \"0.peerjs.com\";\n    this.CLOUD_PORT = 443; // Browsers that need chunking:\n\n    this.chunkedBrowsers = {\n      Chrome: 1,\n      chrome: 1\n    };\n    this.chunkedMTU = 16300; // The original 60000 bytes setting does not work when sending data from Firefox to Chrome, which is \"cut off\" after 16384 bytes and delivered individually.\n    // Returns browser-agnostic default config\n\n    this.defaultConfig = DEFAULT_CONFIG;\n    this.browser = supports_1.Supports.getBrowser();\n    this.browserVersion = supports_1.Supports.getVersion(); // Lists which features are supported\n\n    this.supports = function () {\n      var supported = {\n        browser: supports_1.Supports.isBrowserSupported(),\n        webRTC: supports_1.Supports.isWebRTCSupported(),\n        audioVideo: false,\n        data: false,\n        binaryBlob: false,\n        reliable: false\n      };\n      if (!supported.webRTC) return supported;\n      var pc;\n\n      try {\n        pc = new RTCPeerConnection(DEFAULT_CONFIG);\n        supported.audioVideo = true;\n        var dc = void 0;\n\n        try {\n          dc = pc.createDataChannel(\"_PEERJSTEST\", {\n            ordered: true\n          });\n          supported.data = true;\n          supported.reliable = !!dc.ordered; // Binary test\n\n          try {\n            dc.binaryType = \"blob\";\n            supported.binaryBlob = !supports_1.Supports.isIOS;\n          } catch (e) {}\n        } catch (e) {} finally {\n          if (dc) {\n            dc.close();\n          }\n        }\n      } catch (e) {} finally {\n        if (pc) {\n          pc.close();\n        }\n      }\n\n      return supported;\n    }();\n\n    this.pack = BinaryPack.pack;\n    this.unpack = BinaryPack.unpack; // Binary stuff\n\n    this._dataCount = 1;\n  }\n\n  class_1.prototype.noop = function () {}; // Ensure alphanumeric ids\n\n\n  class_1.prototype.validateId = function (id) {\n    // Allow empty ids\n    return !id || /^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(id);\n  };\n\n  class_1.prototype.chunk = function (blob) {\n    var chunks = [];\n    var size = blob.size;\n    var total = Math.ceil(size / exports.util.chunkedMTU);\n    var index = 0;\n    var start = 0;\n\n    while (start < size) {\n      var end = Math.min(size, start + exports.util.chunkedMTU);\n      var b = blob.slice(start, end);\n      var chunk = {\n        __peerData: this._dataCount,\n        n: index,\n        data: b,\n        total: total\n      };\n      chunks.push(chunk);\n      start = end;\n      index++;\n    }\n\n    this._dataCount++;\n    return chunks;\n  };\n\n  class_1.prototype.blobToArrayBuffer = function (blob, cb) {\n    var fr = new FileReader();\n\n    fr.onload = function (evt) {\n      if (evt.target) {\n        cb(evt.target.result);\n      }\n    };\n\n    fr.readAsArrayBuffer(blob);\n    return fr;\n  };\n\n  class_1.prototype.binaryStringToArrayBuffer = function (binary) {\n    var byteArray = new Uint8Array(binary.length);\n\n    for (var i = 0; i < binary.length; i++) {\n      byteArray[i] = binary.charCodeAt(i) & 0xff;\n    }\n\n    return byteArray.buffer;\n  };\n\n  class_1.prototype.randomToken = function () {\n    return Math.random().toString(36).substr(2);\n  };\n\n  class_1.prototype.isSecure = function () {\n    return location.protocol === \"https:\";\n  };\n\n  return class_1;\n}())();\n},{\"peerjs-js-binarypack\":\"kdPp\",\"./supports\":\"I31f\"}],\"JJlS\":[function(require,module,exports) {\n'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n\n},{}],\"WOs9\":[function(require,module,exports) {\n\"use strict\";\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spread = this && this.__spread || function () {\n  for (var ar = [], i = 0; i < arguments.length; i++) {\n    ar = ar.concat(__read(arguments[i]));\n  }\n\n  return ar;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar LOG_PREFIX = 'PeerJS: ';\n/*\nPrints log messages depending on the debug level passed in. Defaults to 0.\n0  Prints no logs.\n1  Prints only errors.\n2  Prints errors and warnings.\n3  Prints all logs.\n*/\n\nvar LogLevel;\n\n(function (LogLevel) {\n  LogLevel[LogLevel[\"Disabled\"] = 0] = \"Disabled\";\n  LogLevel[LogLevel[\"Errors\"] = 1] = \"Errors\";\n  LogLevel[LogLevel[\"Warnings\"] = 2] = \"Warnings\";\n  LogLevel[LogLevel[\"All\"] = 3] = \"All\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\n\nvar Logger =\n/** @class */\nfunction () {\n  function Logger() {\n    this._logLevel = LogLevel.Disabled;\n  }\n\n  Object.defineProperty(Logger.prototype, \"logLevel\", {\n    get: function get() {\n      return this._logLevel;\n    },\n    set: function set(logLevel) {\n      this._logLevel = logLevel;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Logger.prototype.log = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (this._logLevel >= LogLevel.All) {\n      this._print.apply(this, __spread([LogLevel.All], args));\n    }\n  };\n\n  Logger.prototype.warn = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (this._logLevel >= LogLevel.Warnings) {\n      this._print.apply(this, __spread([LogLevel.Warnings], args));\n    }\n  };\n\n  Logger.prototype.error = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (this._logLevel >= LogLevel.Errors) {\n      this._print.apply(this, __spread([LogLevel.Errors], args));\n    }\n  };\n\n  Logger.prototype.setLogFunction = function (fn) {\n    this._print = fn;\n  };\n\n  Logger.prototype._print = function (logLevel) {\n    var rest = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      rest[_i - 1] = arguments[_i];\n    }\n\n    var copy = __spread([LOG_PREFIX], rest);\n\n    for (var i in copy) {\n      if (copy[i] instanceof Error) {\n        copy[i] = \"(\" + copy[i].name + \") \" + copy[i].message;\n      }\n    }\n\n    if (logLevel >= LogLevel.All) {\n      console.log.apply(console, __spread(copy));\n    } else if (logLevel >= LogLevel.Warnings) {\n      console.warn.apply(console, __spread([\"WARNING\"], copy));\n    } else if (logLevel >= LogLevel.Errors) {\n      console.error.apply(console, __spread([\"ERROR\"], copy));\n    }\n  };\n\n  return Logger;\n}();\n\nexports.default = new Logger();\n},{}],\"ZRYf\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar ConnectionEventType;\n\n(function (ConnectionEventType) {\n  ConnectionEventType[\"Open\"] = \"open\";\n  ConnectionEventType[\"Stream\"] = \"stream\";\n  ConnectionEventType[\"Data\"] = \"data\";\n  ConnectionEventType[\"Close\"] = \"close\";\n  ConnectionEventType[\"Error\"] = \"error\";\n  ConnectionEventType[\"IceStateChanged\"] = \"iceStateChanged\";\n})(ConnectionEventType = exports.ConnectionEventType || (exports.ConnectionEventType = {}));\n\nvar ConnectionType;\n\n(function (ConnectionType) {\n  ConnectionType[\"Data\"] = \"data\";\n  ConnectionType[\"Media\"] = \"media\";\n})(ConnectionType = exports.ConnectionType || (exports.ConnectionType = {}));\n\nvar PeerEventType;\n\n(function (PeerEventType) {\n  PeerEventType[\"Open\"] = \"open\";\n  PeerEventType[\"Close\"] = \"close\";\n  PeerEventType[\"Connection\"] = \"connection\";\n  PeerEventType[\"Call\"] = \"call\";\n  PeerEventType[\"Disconnected\"] = \"disconnected\";\n  PeerEventType[\"Error\"] = \"error\";\n})(PeerEventType = exports.PeerEventType || (exports.PeerEventType = {}));\n\nvar PeerErrorType;\n\n(function (PeerErrorType) {\n  PeerErrorType[\"BrowserIncompatible\"] = \"browser-incompatible\";\n  PeerErrorType[\"Disconnected\"] = \"disconnected\";\n  PeerErrorType[\"InvalidID\"] = \"invalid-id\";\n  PeerErrorType[\"InvalidKey\"] = \"invalid-key\";\n  PeerErrorType[\"Network\"] = \"network\";\n  PeerErrorType[\"PeerUnavailable\"] = \"peer-unavailable\";\n  PeerErrorType[\"SslUnavailable\"] = \"ssl-unavailable\";\n  PeerErrorType[\"ServerError\"] = \"server-error\";\n  PeerErrorType[\"SocketError\"] = \"socket-error\";\n  PeerErrorType[\"SocketClosed\"] = \"socket-closed\";\n  PeerErrorType[\"UnavailableID\"] = \"unavailable-id\";\n  PeerErrorType[\"WebRTC\"] = \"webrtc\";\n})(PeerErrorType = exports.PeerErrorType || (exports.PeerErrorType = {}));\n\nvar SerializationType;\n\n(function (SerializationType) {\n  SerializationType[\"Binary\"] = \"binary\";\n  SerializationType[\"BinaryUTF8\"] = \"binary-utf8\";\n  SerializationType[\"JSON\"] = \"json\";\n})(SerializationType = exports.SerializationType || (exports.SerializationType = {}));\n\nvar SocketEventType;\n\n(function (SocketEventType) {\n  SocketEventType[\"Message\"] = \"message\";\n  SocketEventType[\"Disconnected\"] = \"disconnected\";\n  SocketEventType[\"Error\"] = \"error\";\n  SocketEventType[\"Close\"] = \"close\";\n})(SocketEventType = exports.SocketEventType || (exports.SocketEventType = {}));\n\nvar ServerMessageType;\n\n(function (ServerMessageType) {\n  ServerMessageType[\"Heartbeat\"] = \"HEARTBEAT\";\n  ServerMessageType[\"Candidate\"] = \"CANDIDATE\";\n  ServerMessageType[\"Offer\"] = \"OFFER\";\n  ServerMessageType[\"Answer\"] = \"ANSWER\";\n  ServerMessageType[\"Open\"] = \"OPEN\";\n  ServerMessageType[\"Error\"] = \"ERROR\";\n  ServerMessageType[\"IdTaken\"] = \"ID-TAKEN\";\n  ServerMessageType[\"InvalidKey\"] = \"INVALID-KEY\";\n  ServerMessageType[\"Leave\"] = \"LEAVE\";\n  ServerMessageType[\"Expire\"] = \"EXPIRE\"; // The offer sent to a peer has expired without response.\n})(ServerMessageType = exports.ServerMessageType || (exports.ServerMessageType = {}));\n},{}],\"wJlv\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spread = this && this.__spread || function () {\n  for (var ar = [], i = 0; i < arguments.length; i++) {\n    ar = ar.concat(__read(arguments[i]));\n  }\n\n  return ar;\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar eventemitter3_1 = require(\"eventemitter3\");\n\nvar logger_1 = __importDefault(require(\"./logger\"));\n\nvar enums_1 = require(\"./enums\");\n/**\n * An abstraction on top of WebSockets to provide fastest\n * possible connection for peers.\n */\n\n\nvar Socket =\n/** @class */\nfunction (_super) {\n  __extends(Socket, _super);\n\n  function Socket(secure, host, port, path, key, pingInterval) {\n    if (pingInterval === void 0) {\n      pingInterval = 5000;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.pingInterval = pingInterval;\n    _this._disconnected = true;\n    _this._messagesQueue = [];\n    var wsProtocol = secure ? \"wss://\" : \"ws://\";\n    _this._baseUrl = wsProtocol + host + \":\" + port + path + \"peerjs?key=\" + key;\n    return _this;\n  }\n\n  Socket.prototype.start = function (id, token) {\n    var _this = this;\n\n    this._id = id;\n    var wsUrl = this._baseUrl + \"&id=\" + id + \"&token=\" + token;\n\n    if (!!this._socket || !this._disconnected) {\n      return;\n    }\n\n    this._socket = new WebSocket(wsUrl);\n    this._disconnected = false;\n\n    this._socket.onmessage = function (event) {\n      var data;\n\n      try {\n        data = JSON.parse(event.data);\n        logger_1.default.log(\"Server message received:\", data);\n      } catch (e) {\n        logger_1.default.log(\"Invalid server message\", event.data);\n        return;\n      }\n\n      _this.emit(enums_1.SocketEventType.Message, data);\n    };\n\n    this._socket.onclose = function (event) {\n      if (_this._disconnected) {\n        return;\n      }\n\n      logger_1.default.log(\"Socket closed.\", event);\n\n      _this._cleanup();\n\n      _this._disconnected = true;\n\n      _this.emit(enums_1.SocketEventType.Disconnected);\n    }; // Take care of the queue of connections if necessary and make sure Peer knows\n    // socket is open.\n\n\n    this._socket.onopen = function () {\n      if (_this._disconnected) {\n        return;\n      }\n\n      _this._sendQueuedMessages();\n\n      logger_1.default.log(\"Socket open\");\n\n      _this._scheduleHeartbeat();\n    };\n  };\n\n  Socket.prototype._scheduleHeartbeat = function () {\n    var _this = this;\n\n    this._wsPingTimer = setTimeout(function () {\n      _this._sendHeartbeat();\n    }, this.pingInterval);\n  };\n\n  Socket.prototype._sendHeartbeat = function () {\n    if (!this._wsOpen()) {\n      logger_1.default.log(\"Cannot send heartbeat, because socket closed\");\n      return;\n    }\n\n    var message = JSON.stringify({\n      type: enums_1.ServerMessageType.Heartbeat\n    });\n\n    this._socket.send(message);\n\n    this._scheduleHeartbeat();\n  };\n  /** Is the websocket currently open? */\n\n\n  Socket.prototype._wsOpen = function () {\n    return !!this._socket && this._socket.readyState === 1;\n  };\n  /** Send queued messages. */\n\n\n  Socket.prototype._sendQueuedMessages = function () {\n    var e_1, _a; //Create copy of queue and clear it,\n    //because send method push the message back to queue if smth will go wrong\n\n\n    var copiedQueue = __spread(this._messagesQueue);\n\n    this._messagesQueue = [];\n\n    try {\n      for (var copiedQueue_1 = __values(copiedQueue), copiedQueue_1_1 = copiedQueue_1.next(); !copiedQueue_1_1.done; copiedQueue_1_1 = copiedQueue_1.next()) {\n        var message = copiedQueue_1_1.value;\n        this.send(message);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (copiedQueue_1_1 && !copiedQueue_1_1.done && (_a = copiedQueue_1.return)) _a.call(copiedQueue_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n  /** Exposed send for DC & Peer. */\n\n\n  Socket.prototype.send = function (data) {\n    if (this._disconnected) {\n      return;\n    } // If we didn't get an ID yet, we can't yet send anything so we should queue\n    // up these messages.\n\n\n    if (!this._id) {\n      this._messagesQueue.push(data);\n\n      return;\n    }\n\n    if (!data.type) {\n      this.emit(enums_1.SocketEventType.Error, \"Invalid message\");\n      return;\n    }\n\n    if (!this._wsOpen()) {\n      return;\n    }\n\n    var message = JSON.stringify(data);\n\n    this._socket.send(message);\n  };\n\n  Socket.prototype.close = function () {\n    if (this._disconnected) {\n      return;\n    }\n\n    this._cleanup();\n\n    this._disconnected = true;\n  };\n\n  Socket.prototype._cleanup = function () {\n    if (!!this._socket) {\n      this._socket.onopen = this._socket.onmessage = this._socket.onclose = null;\n\n      this._socket.close();\n\n      this._socket = undefined;\n    }\n\n    clearTimeout(this._wsPingTimer);\n  };\n\n  return Socket;\n}(eventemitter3_1.EventEmitter);\n\nexports.Socket = Socket;\n},{\"eventemitter3\":\"JJlS\",\"./logger\":\"WOs9\",\"./enums\":\"ZRYf\"}],\"HCdX\":[function(require,module,exports) {\n\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = require(\"./util\");\n\nvar logger_1 = __importDefault(require(\"./logger\"));\n\nvar enums_1 = require(\"./enums\");\n/**\n * Manages all negotiations between Peers.\n */\n\n\nvar Negotiator =\n/** @class */\nfunction () {\n  function Negotiator(connection) {\n    this.connection = connection;\n  }\n  /** Returns a PeerConnection object set up correctly (for data, media). */\n\n\n  Negotiator.prototype.startConnection = function (options) {\n    var peerConnection = this._startPeerConnection(); // Set the connection's PC.\n\n\n    this.connection.peerConnection = peerConnection;\n\n    if (this.connection.type === enums_1.ConnectionType.Media && options._stream) {\n      this._addTracksToConnection(options._stream, peerConnection);\n    } // What do we need to do now?\n\n\n    if (options.originator) {\n      if (this.connection.type === enums_1.ConnectionType.Data) {\n        var dataConnection = this.connection;\n        var config = {\n          ordered: !!options.reliable\n        };\n        var dataChannel = peerConnection.createDataChannel(dataConnection.label, config);\n        dataConnection.initialize(dataChannel);\n      }\n\n      this._makeOffer();\n    } else {\n      this.handleSDP(\"OFFER\", options.sdp);\n    }\n  };\n  /** Start a PC. */\n\n\n  Negotiator.prototype._startPeerConnection = function () {\n    logger_1.default.log(\"Creating RTCPeerConnection.\");\n    var peerConnection = new RTCPeerConnection(this.connection.provider.options.config);\n\n    this._setupListeners(peerConnection);\n\n    return peerConnection;\n  };\n  /** Set up various WebRTC listeners. */\n\n\n  Negotiator.prototype._setupListeners = function (peerConnection) {\n    var _this = this;\n\n    var peerId = this.connection.peer;\n    var connectionId = this.connection.connectionId;\n    var connectionType = this.connection.type;\n    var provider = this.connection.provider; // ICE CANDIDATES.\n\n    logger_1.default.log(\"Listening for ICE candidates.\");\n\n    peerConnection.onicecandidate = function (evt) {\n      if (!evt.candidate || !evt.candidate.candidate) return;\n      logger_1.default.log(\"Received ICE candidates for \" + peerId + \":\", evt.candidate);\n      provider.socket.send({\n        type: enums_1.ServerMessageType.Candidate,\n        payload: {\n          candidate: evt.candidate,\n          type: connectionType,\n          connectionId: connectionId\n        },\n        dst: peerId\n      });\n    };\n\n    peerConnection.oniceconnectionstatechange = function () {\n      switch (peerConnection.iceConnectionState) {\n        case \"failed\":\n          logger_1.default.log(\"iceConnectionState is failed, closing connections to \" + peerId);\n\n          _this.connection.emit(enums_1.ConnectionEventType.Error, new Error(\"Negotiation of connection to \" + peerId + \" failed.\"));\n\n          _this.connection.close();\n\n          break;\n\n        case \"closed\":\n          logger_1.default.log(\"iceConnectionState is closed, closing connections to \" + peerId);\n\n          _this.connection.emit(enums_1.ConnectionEventType.Error, new Error(\"Connection to \" + peerId + \" closed.\"));\n\n          _this.connection.close();\n\n          break;\n\n        case \"disconnected\":\n          logger_1.default.log(\"iceConnectionState is disconnected, closing connections to \" + peerId);\n\n          _this.connection.emit(enums_1.ConnectionEventType.Error, new Error(\"Connection to \" + peerId + \" disconnected.\"));\n\n          _this.connection.close();\n\n          break;\n\n        case \"completed\":\n          peerConnection.onicecandidate = util_1.util.noop;\n          break;\n      }\n\n      _this.connection.emit(enums_1.ConnectionEventType.IceStateChanged, peerConnection.iceConnectionState);\n    }; // DATACONNECTION.\n\n\n    logger_1.default.log(\"Listening for data channel\"); // Fired between offer and answer, so options should already be saved\n    // in the options hash.\n\n    peerConnection.ondatachannel = function (evt) {\n      logger_1.default.log(\"Received data channel\");\n      var dataChannel = evt.channel;\n      var connection = provider.getConnection(peerId, connectionId);\n      connection.initialize(dataChannel);\n    }; // MEDIACONNECTION.\n\n\n    logger_1.default.log(\"Listening for remote stream\");\n\n    peerConnection.ontrack = function (evt) {\n      logger_1.default.log(\"Received remote stream\");\n      var stream = evt.streams[0];\n      var connection = provider.getConnection(peerId, connectionId);\n\n      if (connection.type === enums_1.ConnectionType.Media) {\n        var mediaConnection = connection;\n\n        _this._addStreamToMediaConnection(stream, mediaConnection);\n      }\n    };\n  };\n\n  Negotiator.prototype.cleanup = function () {\n    logger_1.default.log(\"Cleaning up PeerConnection to \" + this.connection.peer);\n    var peerConnection = this.connection.peerConnection;\n\n    if (!peerConnection) {\n      return;\n    }\n\n    this.connection.peerConnection = null; //unsubscribe from all PeerConnection's events\n\n    peerConnection.onicecandidate = peerConnection.oniceconnectionstatechange = peerConnection.ondatachannel = peerConnection.ontrack = function () {};\n\n    var peerConnectionNotClosed = peerConnection.signalingState !== \"closed\";\n    var dataChannelNotClosed = false;\n\n    if (this.connection.type === enums_1.ConnectionType.Data) {\n      var dataConnection = this.connection;\n      var dataChannel = dataConnection.dataChannel;\n\n      if (dataChannel) {\n        dataChannelNotClosed = !!dataChannel.readyState && dataChannel.readyState !== \"closed\";\n      }\n    }\n\n    if (peerConnectionNotClosed || dataChannelNotClosed) {\n      peerConnection.close();\n    }\n  };\n\n  Negotiator.prototype._makeOffer = function () {\n    return __awaiter(this, void 0, Promise, function () {\n      var peerConnection, provider, offer, payload, dataConnection, err_2, err_1_1;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            peerConnection = this.connection.peerConnection;\n            provider = this.connection.provider;\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 7,, 8]);\n\n            return [4\n            /*yield*/\n            , peerConnection.createOffer(this.connection.options.constraints)];\n\n          case 2:\n            offer = _a.sent();\n            logger_1.default.log(\"Created offer.\");\n\n            if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === 'function') {\n              offer.sdp = this.connection.options.sdpTransform(offer.sdp) || offer.sdp;\n            }\n\n            _a.label = 3;\n\n          case 3:\n            _a.trys.push([3, 5,, 6]);\n\n            return [4\n            /*yield*/\n            , peerConnection.setLocalDescription(offer)];\n\n          case 4:\n            _a.sent();\n\n            logger_1.default.log(\"Set localDescription:\", offer, \"for:\" + this.connection.peer);\n            payload = {\n              sdp: offer,\n              type: this.connection.type,\n              connectionId: this.connection.connectionId,\n              metadata: this.connection.metadata,\n              browser: util_1.util.browser\n            };\n\n            if (this.connection.type === enums_1.ConnectionType.Data) {\n              dataConnection = this.connection;\n              payload = __assign(__assign({}, payload), {\n                label: dataConnection.label,\n                reliable: dataConnection.reliable,\n                serialization: dataConnection.serialization\n              });\n            }\n\n            provider.socket.send({\n              type: enums_1.ServerMessageType.Offer,\n              payload: payload,\n              dst: this.connection.peer\n            });\n            return [3\n            /*break*/\n            , 6];\n\n          case 5:\n            err_2 = _a.sent(); // TODO: investigate why _makeOffer is being called from the answer\n\n            if (err_2 != \"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer\") {\n              provider.emitError(enums_1.PeerErrorType.WebRTC, err_2);\n              logger_1.default.log(\"Failed to setLocalDescription, \", err_2);\n            }\n\n            return [3\n            /*break*/\n            , 6];\n\n          case 6:\n            return [3\n            /*break*/\n            , 8];\n\n          case 7:\n            err_1_1 = _a.sent();\n            provider.emitError(enums_1.PeerErrorType.WebRTC, err_1_1);\n            logger_1.default.log(\"Failed to createOffer, \", err_1_1);\n            return [3\n            /*break*/\n            , 8];\n\n          case 8:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  Negotiator.prototype._makeAnswer = function () {\n    return __awaiter(this, void 0, Promise, function () {\n      var peerConnection, provider, answer, err_3, err_1_2;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            peerConnection = this.connection.peerConnection;\n            provider = this.connection.provider;\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 7,, 8]);\n\n            return [4\n            /*yield*/\n            , peerConnection.createAnswer()];\n\n          case 2:\n            answer = _a.sent();\n            logger_1.default.log(\"Created answer.\");\n\n            if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === 'function') {\n              answer.sdp = this.connection.options.sdpTransform(answer.sdp) || answer.sdp;\n            }\n\n            _a.label = 3;\n\n          case 3:\n            _a.trys.push([3, 5,, 6]);\n\n            return [4\n            /*yield*/\n            , peerConnection.setLocalDescription(answer)];\n\n          case 4:\n            _a.sent();\n\n            logger_1.default.log(\"Set localDescription:\", answer, \"for:\" + this.connection.peer);\n            provider.socket.send({\n              type: enums_1.ServerMessageType.Answer,\n              payload: {\n                sdp: answer,\n                type: this.connection.type,\n                connectionId: this.connection.connectionId,\n                browser: util_1.util.browser\n              },\n              dst: this.connection.peer\n            });\n            return [3\n            /*break*/\n            , 6];\n\n          case 5:\n            err_3 = _a.sent();\n            provider.emitError(enums_1.PeerErrorType.WebRTC, err_3);\n            logger_1.default.log(\"Failed to setLocalDescription, \", err_3);\n            return [3\n            /*break*/\n            , 6];\n\n          case 6:\n            return [3\n            /*break*/\n            , 8];\n\n          case 7:\n            err_1_2 = _a.sent();\n            provider.emitError(enums_1.PeerErrorType.WebRTC, err_1_2);\n            logger_1.default.log(\"Failed to create answer, \", err_1_2);\n            return [3\n            /*break*/\n            , 8];\n\n          case 8:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n  /** Handle an SDP. */\n\n\n  Negotiator.prototype.handleSDP = function (type, sdp) {\n    return __awaiter(this, void 0, Promise, function () {\n      var peerConnection, provider, self, err_4;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            sdp = new RTCSessionDescription(sdp);\n            peerConnection = this.connection.peerConnection;\n            provider = this.connection.provider;\n            logger_1.default.log(\"Setting remote description\", sdp);\n            self = this;\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 5,, 6]);\n\n            return [4\n            /*yield*/\n            , peerConnection.setRemoteDescription(sdp)];\n\n          case 2:\n            _a.sent();\n\n            logger_1.default.log(\"Set remoteDescription:\" + type + \" for:\" + this.connection.peer);\n            if (!(type === \"OFFER\")) return [3\n            /*break*/\n            , 4];\n            return [4\n            /*yield*/\n            , self._makeAnswer()];\n\n          case 3:\n            _a.sent();\n\n            _a.label = 4;\n\n          case 4:\n            return [3\n            /*break*/\n            , 6];\n\n          case 5:\n            err_4 = _a.sent();\n            provider.emitError(enums_1.PeerErrorType.WebRTC, err_4);\n            logger_1.default.log(\"Failed to setRemoteDescription, \", err_4);\n            return [3\n            /*break*/\n            , 6];\n\n          case 6:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n  /** Handle a candidate. */\n\n\n  Negotiator.prototype.handleCandidate = function (ice) {\n    return __awaiter(this, void 0, Promise, function () {\n      var candidate, sdpMLineIndex, sdpMid, peerConnection, provider, err_5;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            logger_1.default.log(\"handleCandidate:\", ice);\n            candidate = ice.candidate;\n            sdpMLineIndex = ice.sdpMLineIndex;\n            sdpMid = ice.sdpMid;\n            peerConnection = this.connection.peerConnection;\n            provider = this.connection.provider;\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , peerConnection.addIceCandidate(new RTCIceCandidate({\n              sdpMid: sdpMid,\n              sdpMLineIndex: sdpMLineIndex,\n              candidate: candidate\n            }))];\n\n          case 2:\n            _a.sent();\n\n            logger_1.default.log(\"Added ICE candidate for:\" + this.connection.peer);\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            err_5 = _a.sent();\n            provider.emitError(enums_1.PeerErrorType.WebRTC, err_5);\n            logger_1.default.log(\"Failed to handleCandidate, \", err_5);\n            return [3\n            /*break*/\n            , 4];\n\n          case 4:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  Negotiator.prototype._addTracksToConnection = function (stream, peerConnection) {\n    logger_1.default.log(\"add tracks from stream \" + stream.id + \" to peer connection\");\n\n    if (!peerConnection.addTrack) {\n      return logger_1.default.error(\"Your browser does't support RTCPeerConnection#addTrack. Ignored.\");\n    }\n\n    stream.getTracks().forEach(function (track) {\n      peerConnection.addTrack(track, stream);\n    });\n  };\n\n  Negotiator.prototype._addStreamToMediaConnection = function (stream, mediaConnection) {\n    logger_1.default.log(\"add stream \" + stream.id + \" to media connection \" + mediaConnection.connectionId);\n    mediaConnection.addStream(stream);\n  };\n\n  return Negotiator;\n}();\n\nexports.Negotiator = Negotiator;\n},{\"./util\":\"BHXf\",\"./logger\":\"WOs9\",\"./enums\":\"ZRYf\"}],\"tQFK\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar eventemitter3_1 = require(\"eventemitter3\");\n\nvar BaseConnection =\n/** @class */\nfunction (_super) {\n  __extends(BaseConnection, _super);\n\n  function BaseConnection(peer, provider, options) {\n    var _this = _super.call(this) || this;\n\n    _this.peer = peer;\n    _this.provider = provider;\n    _this.options = options;\n    _this._open = false;\n    _this.metadata = options.metadata;\n    return _this;\n  }\n\n  Object.defineProperty(BaseConnection.prototype, \"open\", {\n    get: function get() {\n      return this._open;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return BaseConnection;\n}(eventemitter3_1.EventEmitter);\n\nexports.BaseConnection = BaseConnection;\n},{\"eventemitter3\":\"JJlS\"}],\"dbHP\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = require(\"./util\");\n\nvar logger_1 = __importDefault(require(\"./logger\"));\n\nvar negotiator_1 = require(\"./negotiator\");\n\nvar enums_1 = require(\"./enums\");\n\nvar baseconnection_1 = require(\"./baseconnection\");\n/**\n * Wraps the streaming interface between two Peers.\n */\n\n\nvar MediaConnection =\n/** @class */\nfunction (_super) {\n  __extends(MediaConnection, _super);\n\n  function MediaConnection(peerId, provider, options) {\n    var _this = _super.call(this, peerId, provider, options) || this;\n\n    _this._localStream = _this.options._stream;\n    _this.connectionId = _this.options.connectionId || MediaConnection.ID_PREFIX + util_1.util.randomToken();\n    _this._negotiator = new negotiator_1.Negotiator(_this);\n\n    if (_this._localStream) {\n      _this._negotiator.startConnection({\n        _stream: _this._localStream,\n        originator: true\n      });\n    }\n\n    return _this;\n  }\n\n  Object.defineProperty(MediaConnection.prototype, \"type\", {\n    get: function get() {\n      return enums_1.ConnectionType.Media;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MediaConnection.prototype, \"localStream\", {\n    get: function get() {\n      return this._localStream;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MediaConnection.prototype, \"remoteStream\", {\n    get: function get() {\n      return this._remoteStream;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  MediaConnection.prototype.addStream = function (remoteStream) {\n    logger_1.default.log(\"Receiving stream\", remoteStream);\n    this._remoteStream = remoteStream;\n\n    _super.prototype.emit.call(this, enums_1.ConnectionEventType.Stream, remoteStream); // Should we call this `open`?\n\n  };\n\n  MediaConnection.prototype.handleMessage = function (message) {\n    var type = message.type;\n    var payload = message.payload;\n\n    switch (message.type) {\n      case enums_1.ServerMessageType.Answer:\n        // Forward to negotiator\n        this._negotiator.handleSDP(type, payload.sdp);\n\n        this._open = true;\n        break;\n\n      case enums_1.ServerMessageType.Candidate:\n        this._negotiator.handleCandidate(payload.candidate);\n\n        break;\n\n      default:\n        logger_1.default.warn(\"Unrecognized message type:\" + type + \" from peer:\" + this.peer);\n        break;\n    }\n  };\n\n  MediaConnection.prototype.answer = function (stream, options) {\n    var e_1, _a;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (this._localStream) {\n      logger_1.default.warn(\"Local stream already exists on this MediaConnection. Are you answering a call twice?\");\n      return;\n    }\n\n    this._localStream = stream;\n\n    if (options && options.sdpTransform) {\n      this.options.sdpTransform = options.sdpTransform;\n    }\n\n    this._negotiator.startConnection(__assign(__assign({}, this.options._payload), {\n      _stream: stream\n    })); // Retrieve lost messages stored because PeerConnection not set up.\n\n\n    var messages = this.provider._getMessages(this.connectionId);\n\n    try {\n      for (var messages_1 = __values(messages), messages_1_1 = messages_1.next(); !messages_1_1.done; messages_1_1 = messages_1.next()) {\n        var message = messages_1_1.value;\n        this.handleMessage(message);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (messages_1_1 && !messages_1_1.done && (_a = messages_1.return)) _a.call(messages_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    this._open = true;\n  };\n  /**\n   * Exposed functionality for users.\n   */\n\n  /** Allows user to close connection. */\n\n\n  MediaConnection.prototype.close = function () {\n    if (this._negotiator) {\n      this._negotiator.cleanup();\n\n      this._negotiator = null;\n    }\n\n    this._localStream = null;\n    this._remoteStream = null;\n\n    if (this.provider) {\n      this.provider._removeConnection(this);\n\n      this.provider = null;\n    }\n\n    if (this.options && this.options._stream) {\n      this.options._stream = null;\n    }\n\n    if (!this.open) {\n      return;\n    }\n\n    this._open = false;\n\n    _super.prototype.emit.call(this, enums_1.ConnectionEventType.Close);\n  };\n\n  MediaConnection.ID_PREFIX = \"mc_\";\n  return MediaConnection;\n}(baseconnection_1.BaseConnection);\n\nexports.MediaConnection = MediaConnection;\n},{\"./util\":\"BHXf\",\"./logger\":\"WOs9\",\"./negotiator\":\"HCdX\",\"./enums\":\"ZRYf\",\"./baseconnection\":\"tQFK\"}],\"GGp6\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar eventemitter3_1 = require(\"eventemitter3\");\n\nvar logger_1 = __importDefault(require(\"./logger\"));\n\nvar EncodingQueue =\n/** @class */\nfunction (_super) {\n  __extends(EncodingQueue, _super);\n\n  function EncodingQueue() {\n    var _this = _super.call(this) || this;\n\n    _this.fileReader = new FileReader();\n    _this._queue = [];\n    _this._processing = false;\n\n    _this.fileReader.onload = function (evt) {\n      _this._processing = false;\n\n      if (evt.target) {\n        _this.emit('done', evt.target.result);\n      }\n\n      _this.doNextTask();\n    };\n\n    _this.fileReader.onerror = function (evt) {\n      logger_1.default.error(\"EncodingQueue error:\", evt);\n      _this._processing = false;\n\n      _this.destroy();\n\n      _this.emit('error', evt);\n    };\n\n    return _this;\n  }\n\n  Object.defineProperty(EncodingQueue.prototype, \"queue\", {\n    get: function get() {\n      return this._queue;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EncodingQueue.prototype, \"size\", {\n    get: function get() {\n      return this.queue.length;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(EncodingQueue.prototype, \"processing\", {\n    get: function get() {\n      return this._processing;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  EncodingQueue.prototype.enque = function (blob) {\n    this.queue.push(blob);\n    if (this.processing) return;\n    this.doNextTask();\n  };\n\n  EncodingQueue.prototype.destroy = function () {\n    this.fileReader.abort();\n    this._queue = [];\n  };\n\n  EncodingQueue.prototype.doNextTask = function () {\n    if (this.size === 0) return;\n    if (this.processing) return;\n    this._processing = true;\n    this.fileReader.readAsArrayBuffer(this.queue.shift());\n  };\n\n  return EncodingQueue;\n}(eventemitter3_1.EventEmitter);\n\nexports.EncodingQueue = EncodingQueue;\n},{\"eventemitter3\":\"JJlS\",\"./logger\":\"WOs9\"}],\"GBTQ\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = require(\"./util\");\n\nvar logger_1 = __importDefault(require(\"./logger\"));\n\nvar negotiator_1 = require(\"./negotiator\");\n\nvar enums_1 = require(\"./enums\");\n\nvar baseconnection_1 = require(\"./baseconnection\");\n\nvar encodingQueue_1 = require(\"./encodingQueue\");\n/**\n * Wraps a DataChannel between two Peers.\n */\n\n\nvar DataConnection =\n/** @class */\nfunction (_super) {\n  __extends(DataConnection, _super);\n\n  function DataConnection(peerId, provider, options) {\n    var _this = _super.call(this, peerId, provider, options) || this;\n\n    _this.stringify = JSON.stringify;\n    _this.parse = JSON.parse;\n    _this._buffer = [];\n    _this._bufferSize = 0;\n    _this._buffering = false;\n    _this._chunkedData = {};\n    _this._encodingQueue = new encodingQueue_1.EncodingQueue();\n    _this.connectionId = _this.options.connectionId || DataConnection.ID_PREFIX + util_1.util.randomToken();\n    _this.label = _this.options.label || _this.connectionId;\n    _this.serialization = _this.options.serialization || enums_1.SerializationType.Binary;\n    _this.reliable = !!_this.options.reliable;\n\n    _this._encodingQueue.on('done', function (ab) {\n      _this._bufferedSend(ab);\n    });\n\n    _this._encodingQueue.on('error', function () {\n      logger_1.default.error(\"DC#\" + _this.connectionId + \": Error occured in encoding from blob to arraybuffer, close DC\");\n\n      _this.close();\n    });\n\n    _this._negotiator = new negotiator_1.Negotiator(_this);\n\n    _this._negotiator.startConnection(_this.options._payload || {\n      originator: true\n    });\n\n    return _this;\n  }\n\n  Object.defineProperty(DataConnection.prototype, \"type\", {\n    get: function get() {\n      return enums_1.ConnectionType.Data;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DataConnection.prototype, \"dataChannel\", {\n    get: function get() {\n      return this._dc;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DataConnection.prototype, \"bufferSize\", {\n    get: function get() {\n      return this._bufferSize;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /** Called by the Negotiator when the DataChannel is ready. */\n\n  DataConnection.prototype.initialize = function (dc) {\n    this._dc = dc;\n\n    this._configureDataChannel();\n  };\n\n  DataConnection.prototype._configureDataChannel = function () {\n    var _this = this;\n\n    if (!util_1.util.supports.binaryBlob || util_1.util.supports.reliable) {\n      this.dataChannel.binaryType = \"arraybuffer\";\n    }\n\n    this.dataChannel.onopen = function () {\n      logger_1.default.log(\"DC#\" + _this.connectionId + \" dc connection success\");\n      _this._open = true;\n\n      _this.emit(enums_1.ConnectionEventType.Open);\n    };\n\n    this.dataChannel.onmessage = function (e) {\n      logger_1.default.log(\"DC#\" + _this.connectionId + \" dc onmessage:\", e.data);\n\n      _this._handleDataMessage(e);\n    };\n\n    this.dataChannel.onclose = function () {\n      logger_1.default.log(\"DC#\" + _this.connectionId + \" dc closed for:\", _this.peer);\n\n      _this.close();\n    };\n  }; // Handles a DataChannel message.\n\n\n  DataConnection.prototype._handleDataMessage = function (_a) {\n    var _this = this;\n\n    var data = _a.data;\n    var datatype = data.constructor;\n    var isBinarySerialization = this.serialization === enums_1.SerializationType.Binary || this.serialization === enums_1.SerializationType.BinaryUTF8;\n    var deserializedData = data;\n\n    if (isBinarySerialization) {\n      if (datatype === Blob) {\n        // Datatype should never be blob\n        util_1.util.blobToArrayBuffer(data, function (ab) {\n          var unpackedData = util_1.util.unpack(ab);\n\n          _this.emit(enums_1.ConnectionEventType.Data, unpackedData);\n        });\n        return;\n      } else if (datatype === ArrayBuffer) {\n        deserializedData = util_1.util.unpack(data);\n      } else if (datatype === String) {\n        // String fallback for binary data for browsers that don't support binary yet\n        var ab = util_1.util.binaryStringToArrayBuffer(data);\n        deserializedData = util_1.util.unpack(ab);\n      }\n    } else if (this.serialization === enums_1.SerializationType.JSON) {\n      deserializedData = this.parse(data);\n    } // Check if we've chunked--if so, piece things back together.\n    // We're guaranteed that this isn't 0.\n\n\n    if (deserializedData.__peerData) {\n      this._handleChunk(deserializedData);\n\n      return;\n    }\n\n    _super.prototype.emit.call(this, enums_1.ConnectionEventType.Data, deserializedData);\n  };\n\n  DataConnection.prototype._handleChunk = function (data) {\n    var id = data.__peerData;\n    var chunkInfo = this._chunkedData[id] || {\n      data: [],\n      count: 0,\n      total: data.total\n    };\n    chunkInfo.data[data.n] = data.data;\n    chunkInfo.count++;\n    this._chunkedData[id] = chunkInfo;\n\n    if (chunkInfo.total === chunkInfo.count) {\n      // Clean up before making the recursive call to `_handleDataMessage`.\n      delete this._chunkedData[id]; // We've received all the chunks--time to construct the complete data.\n\n      var data_1 = new Blob(chunkInfo.data);\n\n      this._handleDataMessage({\n        data: data_1\n      });\n    }\n  };\n  /**\n   * Exposed functionality for users.\n   */\n\n  /** Allows user to close connection. */\n\n\n  DataConnection.prototype.close = function () {\n    this._buffer = [];\n    this._bufferSize = 0;\n    this._chunkedData = {};\n\n    if (this._negotiator) {\n      this._negotiator.cleanup();\n\n      this._negotiator = null;\n    }\n\n    if (this.provider) {\n      this.provider._removeConnection(this);\n\n      this.provider = null;\n    }\n\n    if (this.dataChannel) {\n      this.dataChannel.onopen = null;\n      this.dataChannel.onmessage = null;\n      this.dataChannel.onclose = null;\n      this._dc = null;\n    }\n\n    if (this._encodingQueue) {\n      this._encodingQueue.destroy();\n\n      this._encodingQueue.removeAllListeners();\n\n      this._encodingQueue = null;\n    }\n\n    if (!this.open) {\n      return;\n    }\n\n    this._open = false;\n\n    _super.prototype.emit.call(this, enums_1.ConnectionEventType.Close);\n  };\n  /** Allows user to send data. */\n\n\n  DataConnection.prototype.send = function (data, chunked) {\n    if (!this.open) {\n      _super.prototype.emit.call(this, enums_1.ConnectionEventType.Error, new Error(\"Connection is not open. You should listen for the `open` event before sending messages.\"));\n\n      return;\n    }\n\n    if (this.serialization === enums_1.SerializationType.JSON) {\n      this._bufferedSend(this.stringify(data));\n    } else if (this.serialization === enums_1.SerializationType.Binary || this.serialization === enums_1.SerializationType.BinaryUTF8) {\n      var blob = util_1.util.pack(data);\n\n      if (!chunked && blob.size > util_1.util.chunkedMTU) {\n        this._sendChunks(blob);\n\n        return;\n      }\n\n      if (!util_1.util.supports.binaryBlob) {\n        // We only do this if we really need to (e.g. blobs are not supported),\n        // because this conversion is costly.\n        this._encodingQueue.enque(blob);\n      } else {\n        this._bufferedSend(blob);\n      }\n    } else {\n      this._bufferedSend(data);\n    }\n  };\n\n  DataConnection.prototype._bufferedSend = function (msg) {\n    if (this._buffering || !this._trySend(msg)) {\n      this._buffer.push(msg);\n\n      this._bufferSize = this._buffer.length;\n    }\n  }; // Returns true if the send succeeds.\n\n\n  DataConnection.prototype._trySend = function (msg) {\n    var _this = this;\n\n    if (!this.open) {\n      return false;\n    }\n\n    if (this.dataChannel.bufferedAmount > DataConnection.MAX_BUFFERED_AMOUNT) {\n      this._buffering = true;\n      setTimeout(function () {\n        _this._buffering = false;\n\n        _this._tryBuffer();\n      }, 50);\n      return false;\n    }\n\n    try {\n      this.dataChannel.send(msg);\n    } catch (e) {\n      logger_1.default.error(\"DC#:\" + this.connectionId + \" Error when sending:\", e);\n      this._buffering = true;\n      this.close();\n      return false;\n    }\n\n    return true;\n  }; // Try to send the first message in the buffer.\n\n\n  DataConnection.prototype._tryBuffer = function () {\n    if (!this.open) {\n      return;\n    }\n\n    if (this._buffer.length === 0) {\n      return;\n    }\n\n    var msg = this._buffer[0];\n\n    if (this._trySend(msg)) {\n      this._buffer.shift();\n\n      this._bufferSize = this._buffer.length;\n\n      this._tryBuffer();\n    }\n  };\n\n  DataConnection.prototype._sendChunks = function (blob) {\n    var e_1, _a;\n\n    var blobs = util_1.util.chunk(blob);\n    logger_1.default.log(\"DC#\" + this.connectionId + \" Try to send \" + blobs.length + \" chunks...\");\n\n    try {\n      for (var blobs_1 = __values(blobs), blobs_1_1 = blobs_1.next(); !blobs_1_1.done; blobs_1_1 = blobs_1.next()) {\n        var blob_1 = blobs_1_1.value;\n        this.send(blob_1, true);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (blobs_1_1 && !blobs_1_1.done && (_a = blobs_1.return)) _a.call(blobs_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  DataConnection.prototype.handleMessage = function (message) {\n    var payload = message.payload;\n\n    switch (message.type) {\n      case enums_1.ServerMessageType.Answer:\n        this._negotiator.handleSDP(message.type, payload.sdp);\n\n        break;\n\n      case enums_1.ServerMessageType.Candidate:\n        this._negotiator.handleCandidate(payload.candidate);\n\n        break;\n\n      default:\n        logger_1.default.warn(\"Unrecognized message type:\", message.type, \"from peer:\", this.peer);\n        break;\n    }\n  };\n\n  DataConnection.ID_PREFIX = \"dc_\";\n  DataConnection.MAX_BUFFERED_AMOUNT = 8 * 1024 * 1024;\n  return DataConnection;\n}(baseconnection_1.BaseConnection);\n\nexports.DataConnection = DataConnection;\n},{\"./util\":\"BHXf\",\"./logger\":\"WOs9\",\"./negotiator\":\"HCdX\",\"./enums\":\"ZRYf\",\"./baseconnection\":\"tQFK\",\"./encodingQueue\":\"GGp6\"}],\"in7L\":[function(require,module,exports) {\n\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = require(\"./util\");\n\nvar logger_1 = __importDefault(require(\"./logger\"));\n\nvar API =\n/** @class */\nfunction () {\n  function API(_options) {\n    this._options = _options;\n  }\n\n  API.prototype._buildUrl = function (method) {\n    var protocol = this._options.secure ? \"https://\" : \"http://\";\n    var url = protocol + this._options.host + \":\" + this._options.port + this._options.path + this._options.key + \"/\" + method;\n    var queryString = \"?ts=\" + new Date().getTime() + \"\" + Math.random();\n    url += queryString;\n    return url;\n  };\n  /** Get a unique ID from the server via XHR and initialize with it. */\n\n\n  API.prototype.retrieveId = function () {\n    return __awaiter(this, void 0, Promise, function () {\n      var url, response, error_1, pathError;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            url = this._buildUrl(\"id\");\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , fetch(url)];\n\n          case 2:\n            response = _a.sent();\n\n            if (response.status !== 200) {\n              throw new Error(\"Error. Status:\" + response.status);\n            }\n\n            return [2\n            /*return*/\n            , response.text()];\n\n          case 3:\n            error_1 = _a.sent();\n            logger_1.default.error(\"Error retrieving ID\", error_1);\n            pathError = \"\";\n\n            if (this._options.path === \"/\" && this._options.host !== util_1.util.CLOUD_HOST) {\n              pathError = \" If you passed in a `path` to your self-hosted PeerServer, \" + \"you'll also need to pass in that same path when creating a new \" + \"Peer.\";\n            }\n\n            throw new Error(\"Could not get an ID from the server.\" + pathError);\n\n          case 4:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n  /** @deprecated */\n\n\n  API.prototype.listAllPeers = function () {\n    return __awaiter(this, void 0, Promise, function () {\n      var url, response, helpfulError, error_2;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            url = this._buildUrl(\"peers\");\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , fetch(url)];\n\n          case 2:\n            response = _a.sent();\n\n            if (response.status !== 200) {\n              if (response.status === 401) {\n                helpfulError = \"\";\n\n                if (this._options.host === util_1.util.CLOUD_HOST) {\n                  helpfulError = \"It looks like you're using the cloud server. You can email \" + \"team@peerjs.com to enable peer listing for your API key.\";\n                } else {\n                  helpfulError = \"You need to enable `allow_discovery` on your self-hosted \" + \"PeerServer to use this feature.\";\n                }\n\n                throw new Error(\"It doesn't look like you have permission to list peers IDs. \" + helpfulError);\n              }\n\n              throw new Error(\"Error. Status:\" + response.status);\n            }\n\n            return [2\n            /*return*/\n            , response.json()];\n\n          case 3:\n            error_2 = _a.sent();\n            logger_1.default.error(\"Error retrieving list peers\", error_2);\n            throw new Error(\"Could not get list peers from the server.\" + error_2);\n\n          case 4:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  return API;\n}();\n\nexports.API = API;\n},{\"./util\":\"BHXf\",\"./logger\":\"WOs9\"}],\"Hxpd\":[function(require,module,exports) {\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar eventemitter3_1 = require(\"eventemitter3\");\n\nvar util_1 = require(\"./util\");\n\nvar logger_1 = __importDefault(require(\"./logger\"));\n\nvar socket_1 = require(\"./socket\");\n\nvar mediaconnection_1 = require(\"./mediaconnection\");\n\nvar dataconnection_1 = require(\"./dataconnection\");\n\nvar enums_1 = require(\"./enums\");\n\nvar api_1 = require(\"./api\");\n\nvar PeerOptions =\n/** @class */\nfunction () {\n  function PeerOptions() {}\n\n  return PeerOptions;\n}();\n/**\n * A peer who can initiate connections with other peers.\n */\n\n\nvar Peer =\n/** @class */\nfunction (_super) {\n  __extends(Peer, _super);\n\n  function Peer(id, options) {\n    var _this = _super.call(this) || this;\n\n    _this._id = null;\n    _this._lastServerId = null; // States.\n\n    _this._destroyed = false; // Connections have been killed\n\n    _this._disconnected = false; // Connection to PeerServer killed but P2P connections still active\n\n    _this._open = false; // Sockets and such are not yet open.\n\n    _this._connections = new Map(); // All connections for this peer.\n\n    _this._lostMessages = new Map(); // src => [list of messages]\n\n    var userId; // Deal with overloading\n\n    if (id && id.constructor == Object) {\n      options = id;\n    } else if (id) {\n      userId = id.toString();\n    } // Configurize options\n\n\n    options = __assign({\n      debug: 0,\n      host: util_1.util.CLOUD_HOST,\n      port: util_1.util.CLOUD_PORT,\n      path: \"/\",\n      key: Peer.DEFAULT_KEY,\n      token: util_1.util.randomToken(),\n      config: util_1.util.defaultConfig\n    }, options);\n    _this._options = options; // Detect relative URL host.\n\n    if (_this._options.host === \"/\") {\n      _this._options.host = window.location.hostname;\n    } // Set path correctly.\n\n\n    if (_this._options.path) {\n      if (_this._options.path[0] !== \"/\") {\n        _this._options.path = \"/\" + _this._options.path;\n      }\n\n      if (_this._options.path[_this._options.path.length - 1] !== \"/\") {\n        _this._options.path += \"/\";\n      }\n    } // Set whether we use SSL to same as current host\n\n\n    if (_this._options.secure === undefined && _this._options.host !== util_1.util.CLOUD_HOST) {\n      _this._options.secure = util_1.util.isSecure();\n    } else if (_this._options.host == util_1.util.CLOUD_HOST) {\n      _this._options.secure = true;\n    } // Set a custom log function if present\n\n\n    if (_this._options.logFunction) {\n      logger_1.default.setLogFunction(_this._options.logFunction);\n    }\n\n    logger_1.default.logLevel = _this._options.debug || 0;\n    _this._api = new api_1.API(options);\n    _this._socket = _this._createServerConnection(); // Sanity checks\n    // Ensure WebRTC supported\n\n    if (!util_1.util.supports.audioVideo && !util_1.util.supports.data) {\n      _this._delayedAbort(enums_1.PeerErrorType.BrowserIncompatible, \"The current browser does not support WebRTC\");\n\n      return _this;\n    } // Ensure alphanumeric id\n\n\n    if (!!userId && !util_1.util.validateId(userId)) {\n      _this._delayedAbort(enums_1.PeerErrorType.InvalidID, \"ID \\\"\" + userId + \"\\\" is invalid\");\n\n      return _this;\n    }\n\n    if (userId) {\n      _this._initialize(userId);\n    } else {\n      _this._api.retrieveId().then(function (id) {\n        return _this._initialize(id);\n      }).catch(function (error) {\n        return _this._abort(enums_1.PeerErrorType.ServerError, error);\n      });\n    }\n\n    return _this;\n  }\n\n  Object.defineProperty(Peer.prototype, \"id\", {\n    get: function get() {\n      return this._id;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Peer.prototype, \"options\", {\n    get: function get() {\n      return this._options;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Peer.prototype, \"open\", {\n    get: function get() {\n      return this._open;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Peer.prototype, \"socket\", {\n    get: function get() {\n      return this._socket;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Peer.prototype, \"connections\", {\n    /**\n     * @deprecated\n     * Return type will change from Object to Map<string,[]>\n     */\n    get: function get() {\n      var e_1, _a;\n\n      var plainConnections = Object.create(null);\n\n      try {\n        for (var _b = __values(this._connections), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var _d = __read(_c.value, 2),\n              k = _d[0],\n              v = _d[1];\n\n          plainConnections[k] = v;\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n\n      return plainConnections;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Peer.prototype, \"destroyed\", {\n    get: function get() {\n      return this._destroyed;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Peer.prototype, \"disconnected\", {\n    get: function get() {\n      return this._disconnected;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Peer.prototype._createServerConnection = function () {\n    var _this = this;\n\n    var socket = new socket_1.Socket(this._options.secure, this._options.host, this._options.port, this._options.path, this._options.key, this._options.pingInterval);\n    socket.on(enums_1.SocketEventType.Message, function (data) {\n      _this._handleMessage(data);\n    });\n    socket.on(enums_1.SocketEventType.Error, function (error) {\n      _this._abort(enums_1.PeerErrorType.SocketError, error);\n    });\n    socket.on(enums_1.SocketEventType.Disconnected, function () {\n      if (_this.disconnected) {\n        return;\n      }\n\n      _this.emitError(enums_1.PeerErrorType.Network, \"Lost connection to server.\");\n\n      _this.disconnect();\n    });\n    socket.on(enums_1.SocketEventType.Close, function () {\n      if (_this.disconnected) {\n        return;\n      }\n\n      _this._abort(enums_1.PeerErrorType.SocketClosed, \"Underlying socket is already closed.\");\n    });\n    return socket;\n  };\n  /** Initialize a connection with the server. */\n\n\n  Peer.prototype._initialize = function (id) {\n    this._id = id;\n    this.socket.start(id, this._options.token);\n  };\n  /** Handles messages from the server. */\n\n\n  Peer.prototype._handleMessage = function (message) {\n    var e_2, _a;\n\n    var type = message.type;\n    var payload = message.payload;\n    var peerId = message.src;\n\n    switch (type) {\n      case enums_1.ServerMessageType.Open:\n        // The connection to the server is open.\n        this._lastServerId = this.id;\n        this._open = true;\n        this.emit(enums_1.PeerEventType.Open, this.id);\n        break;\n\n      case enums_1.ServerMessageType.Error:\n        // Server error.\n        this._abort(enums_1.PeerErrorType.ServerError, payload.msg);\n\n        break;\n\n      case enums_1.ServerMessageType.IdTaken:\n        // The selected ID is taken.\n        this._abort(enums_1.PeerErrorType.UnavailableID, \"ID \\\"\" + this.id + \"\\\" is taken\");\n\n        break;\n\n      case enums_1.ServerMessageType.InvalidKey:\n        // The given API key cannot be found.\n        this._abort(enums_1.PeerErrorType.InvalidKey, \"API KEY \\\"\" + this._options.key + \"\\\" is invalid\");\n\n        break;\n\n      case enums_1.ServerMessageType.Leave:\n        // Another peer has closed its connection to this peer.\n        logger_1.default.log(\"Received leave message from \" + peerId);\n\n        this._cleanupPeer(peerId);\n\n        this._connections.delete(peerId);\n\n        break;\n\n      case enums_1.ServerMessageType.Expire:\n        // The offer sent to a peer has expired without response.\n        this.emitError(enums_1.PeerErrorType.PeerUnavailable, \"Could not connect to peer \" + peerId);\n        break;\n\n      case enums_1.ServerMessageType.Offer:\n        {\n          // we should consider switching this to CALL/CONNECT, but this is the least breaking option.\n          var connectionId = payload.connectionId;\n          var connection = this.getConnection(peerId, connectionId);\n\n          if (connection) {\n            connection.close();\n            logger_1.default.warn(\"Offer received for existing Connection ID:\" + connectionId);\n          } // Create a new connection.\n\n\n          if (payload.type === enums_1.ConnectionType.Media) {\n            connection = new mediaconnection_1.MediaConnection(peerId, this, {\n              connectionId: connectionId,\n              _payload: payload,\n              metadata: payload.metadata\n            });\n\n            this._addConnection(peerId, connection);\n\n            this.emit(enums_1.PeerEventType.Call, connection);\n          } else if (payload.type === enums_1.ConnectionType.Data) {\n            connection = new dataconnection_1.DataConnection(peerId, this, {\n              connectionId: connectionId,\n              _payload: payload,\n              metadata: payload.metadata,\n              label: payload.label,\n              serialization: payload.serialization,\n              reliable: payload.reliable\n            });\n\n            this._addConnection(peerId, connection);\n\n            this.emit(enums_1.PeerEventType.Connection, connection);\n          } else {\n            logger_1.default.warn(\"Received malformed connection type:\" + payload.type);\n            return;\n          } // Find messages.\n\n\n          var messages = this._getMessages(connectionId);\n\n          try {\n            for (var messages_1 = __values(messages), messages_1_1 = messages_1.next(); !messages_1_1.done; messages_1_1 = messages_1.next()) {\n              var message_1 = messages_1_1.value;\n              connection.handleMessage(message_1);\n            }\n          } catch (e_2_1) {\n            e_2 = {\n              error: e_2_1\n            };\n          } finally {\n            try {\n              if (messages_1_1 && !messages_1_1.done && (_a = messages_1.return)) _a.call(messages_1);\n            } finally {\n              if (e_2) throw e_2.error;\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          if (!payload) {\n            logger_1.default.warn(\"You received a malformed message from \" + peerId + \" of type \" + type);\n            return;\n          }\n\n          var connectionId = payload.connectionId;\n          var connection = this.getConnection(peerId, connectionId);\n\n          if (connection && connection.peerConnection) {\n            // Pass it on.\n            connection.handleMessage(message);\n          } else if (connectionId) {\n            // Store for possible later use\n            this._storeMessage(connectionId, message);\n          } else {\n            logger_1.default.warn(\"You received an unrecognized message:\", message);\n          }\n\n          break;\n        }\n    }\n  };\n  /** Stores messages without a set up connection, to be claimed later. */\n\n\n  Peer.prototype._storeMessage = function (connectionId, message) {\n    if (!this._lostMessages.has(connectionId)) {\n      this._lostMessages.set(connectionId, []);\n    }\n\n    this._lostMessages.get(connectionId).push(message);\n  };\n  /** Retrieve messages from lost message store */\n  //TODO Change it to private\n\n\n  Peer.prototype._getMessages = function (connectionId) {\n    var messages = this._lostMessages.get(connectionId);\n\n    if (messages) {\n      this._lostMessages.delete(connectionId);\n\n      return messages;\n    }\n\n    return [];\n  };\n  /**\n   * Returns a DataConnection to the specified peer. See documentation for a\n   * complete list of options.\n   */\n\n\n  Peer.prototype.connect = function (peer, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (this.disconnected) {\n      logger_1.default.warn(\"You cannot connect to a new Peer because you called \" + \".disconnect() on this Peer and ended your connection with the \" + \"server. You can create a new Peer to reconnect, or call reconnect \" + \"on this peer if you believe its ID to still be available.\");\n      this.emitError(enums_1.PeerErrorType.Disconnected, \"Cannot connect to new Peer after disconnecting from server.\");\n      return;\n    }\n\n    var dataConnection = new dataconnection_1.DataConnection(peer, this, options);\n\n    this._addConnection(peer, dataConnection);\n\n    return dataConnection;\n  };\n  /**\n   * Returns a MediaConnection to the specified peer. See documentation for a\n   * complete list of options.\n   */\n\n\n  Peer.prototype.call = function (peer, stream, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (this.disconnected) {\n      logger_1.default.warn(\"You cannot connect to a new Peer because you called \" + \".disconnect() on this Peer and ended your connection with the \" + \"server. You can create a new Peer to reconnect.\");\n      this.emitError(enums_1.PeerErrorType.Disconnected, \"Cannot connect to new Peer after disconnecting from server.\");\n      return;\n    }\n\n    if (!stream) {\n      logger_1.default.error(\"To call a peer, you must provide a stream from your browser's `getUserMedia`.\");\n      return;\n    }\n\n    options._stream = stream;\n    var mediaConnection = new mediaconnection_1.MediaConnection(peer, this, options);\n\n    this._addConnection(peer, mediaConnection);\n\n    return mediaConnection;\n  };\n  /** Add a data/media connection to this peer. */\n\n\n  Peer.prototype._addConnection = function (peerId, connection) {\n    logger_1.default.log(\"add connection \" + connection.type + \":\" + connection.connectionId + \" to peerId:\" + peerId);\n\n    if (!this._connections.has(peerId)) {\n      this._connections.set(peerId, []);\n    }\n\n    this._connections.get(peerId).push(connection);\n  }; //TODO should be private\n\n\n  Peer.prototype._removeConnection = function (connection) {\n    var connections = this._connections.get(connection.peer);\n\n    if (connections) {\n      var index = connections.indexOf(connection);\n\n      if (index !== -1) {\n        connections.splice(index, 1);\n      }\n    } //remove from lost messages\n\n\n    this._lostMessages.delete(connection.connectionId);\n  };\n  /** Retrieve a data/media connection for this peer. */\n\n\n  Peer.prototype.getConnection = function (peerId, connectionId) {\n    var e_3, _a;\n\n    var connections = this._connections.get(peerId);\n\n    if (!connections) {\n      return null;\n    }\n\n    try {\n      for (var connections_1 = __values(connections), connections_1_1 = connections_1.next(); !connections_1_1.done; connections_1_1 = connections_1.next()) {\n        var connection = connections_1_1.value;\n\n        if (connection.connectionId === connectionId) {\n          return connection;\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (connections_1_1 && !connections_1_1.done && (_a = connections_1.return)) _a.call(connections_1);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    return null;\n  };\n\n  Peer.prototype._delayedAbort = function (type, message) {\n    var _this = this;\n\n    setTimeout(function () {\n      _this._abort(type, message);\n    }, 0);\n  };\n  /**\n   * Emits an error message and destroys the Peer.\n   * The Peer is not destroyed if it's in a disconnected state, in which case\n   * it retains its disconnected state and its existing connections.\n   */\n\n\n  Peer.prototype._abort = function (type, message) {\n    logger_1.default.error(\"Aborting!\");\n    this.emitError(type, message);\n\n    if (!this._lastServerId) {\n      this.destroy();\n    } else {\n      this.disconnect();\n    }\n  };\n  /** Emits a typed error message. */\n\n\n  Peer.prototype.emitError = function (type, err) {\n    logger_1.default.error(\"Error:\", err);\n    var error;\n\n    if (typeof err === \"string\") {\n      error = new Error(err);\n    } else {\n      error = err;\n    }\n\n    error.type = type;\n    this.emit(enums_1.PeerEventType.Error, error);\n  };\n  /**\n   * Destroys the Peer: closes all active connections as well as the connection\n   *  to the server.\n   * Warning: The peer can no longer create or accept connections after being\n   *  destroyed.\n   */\n\n\n  Peer.prototype.destroy = function () {\n    if (this.destroyed) {\n      return;\n    }\n\n    logger_1.default.log(\"Destroy peer with ID:\" + this.id);\n    this.disconnect();\n\n    this._cleanup();\n\n    this._destroyed = true;\n    this.emit(enums_1.PeerEventType.Close);\n  };\n  /** Disconnects every connection on this peer. */\n\n\n  Peer.prototype._cleanup = function () {\n    var e_4, _a;\n\n    try {\n      for (var _b = __values(this._connections.keys()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var peerId = _c.value;\n\n        this._cleanupPeer(peerId);\n\n        this._connections.delete(peerId);\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    this.socket.removeAllListeners();\n  };\n  /** Closes all connections to this peer. */\n\n\n  Peer.prototype._cleanupPeer = function (peerId) {\n    var e_5, _a;\n\n    var connections = this._connections.get(peerId);\n\n    if (!connections) return;\n\n    try {\n      for (var connections_2 = __values(connections), connections_2_1 = connections_2.next(); !connections_2_1.done; connections_2_1 = connections_2.next()) {\n        var connection = connections_2_1.value;\n        connection.close();\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (connections_2_1 && !connections_2_1.done && (_a = connections_2.return)) _a.call(connections_2);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n  };\n  /**\n   * Disconnects the Peer's connection to the PeerServer. Does not close any\n   *  active connections.\n   * Warning: The peer can no longer create or accept connections after being\n   *  disconnected. It also cannot reconnect to the server.\n   */\n\n\n  Peer.prototype.disconnect = function () {\n    if (this.disconnected) {\n      return;\n    }\n\n    var currentId = this.id;\n    logger_1.default.log(\"Disconnect peer with ID:\" + currentId);\n    this._disconnected = true;\n    this._open = false;\n    this.socket.close();\n    this._lastServerId = currentId;\n    this._id = null;\n    this.emit(enums_1.PeerEventType.Disconnected, currentId);\n  };\n  /** Attempts to reconnect with the same ID. */\n\n\n  Peer.prototype.reconnect = function () {\n    if (this.disconnected && !this.destroyed) {\n      logger_1.default.log(\"Attempting reconnection to server with ID \" + this._lastServerId);\n      this._disconnected = false;\n\n      this._initialize(this._lastServerId);\n    } else if (this.destroyed) {\n      throw new Error(\"This peer cannot reconnect to the server. It has already been destroyed.\");\n    } else if (!this.disconnected && !this.open) {\n      // Do nothing. We're still connecting the first time.\n      logger_1.default.error(\"In a hurry? We're still trying to make the initial connection!\");\n    } else {\n      throw new Error(\"Peer \" + this.id + \" cannot reconnect because it is not disconnected from the server!\");\n    }\n  };\n  /**\n   * Get a list of available peer IDs. If you're running your own server, you'll\n   * want to set allow_discovery: true in the PeerServer options. If you're using\n   * the cloud server, email team@peerjs.com to get the functionality enabled for\n   * your key.\n   */\n\n\n  Peer.prototype.listAllPeers = function (cb) {\n    var _this = this;\n\n    if (cb === void 0) {\n      cb = function cb(_) {};\n    }\n\n    this._api.listAllPeers().then(function (peers) {\n      return cb(peers);\n    }).catch(function (error) {\n      return _this._abort(enums_1.PeerErrorType.ServerError, error);\n    });\n  };\n\n  Peer.DEFAULT_KEY = \"peerjs\";\n  return Peer;\n}(eventemitter3_1.EventEmitter);\n\nexports.Peer = Peer;\n},{\"eventemitter3\":\"JJlS\",\"./util\":\"BHXf\",\"./logger\":\"WOs9\",\"./socket\":\"wJlv\",\"./mediaconnection\":\"dbHP\",\"./dataconnection\":\"GBTQ\",\"./enums\":\"ZRYf\",\"./api\":\"in7L\"}],\"iTK6\":[function(require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = require(\"./util\");\n\nvar peer_1 = require(\"./peer\");\n\nexports.peerjs = {\n  Peer: peer_1.Peer,\n  util: util_1.util\n};\nexports.default = peer_1.Peer;\nwindow.peerjs = exports.peerjs;\n/** @deprecated Should use peerjs namespace */\n\nwindow.Peer = peer_1.Peer;\n},{\"./util\":\"BHXf\",\"./peer\":\"Hxpd\"}]},{},[\"iTK6\"], null)\n","import Peer from \"./peerjs\"\r\n\r\nclass Depth2Web{\r\n\r\n    constructor(addr, port = 8000){\r\n        this.imgWidth = 320;\r\n        this.imgHeight = 240;\r\n\r\n        this.devices = [];\r\n        this.device_elems = [];\r\n        this.show_elems = false;\r\n\r\n        this.depthElems = [];\r\n        this.colorElems = [];\r\n\r\n        this.depthData = [];\r\n        this.colorData = [];\r\n\r\n        this.peer_net = {host: \"localhost\", port: 8000, path: \"/\"};\r\n        this.peer_id = \"depth2web\";\r\n        this.connection = null;\r\n\r\n        if(addr){\r\n            this.peer_net.host = addr;\r\n        }\r\n\r\n        this.peer = new Peer(this.peer_net);\r\n\r\n        this.peer.on(\"open\", function(id){\r\n            console.log(\"open connection with peer id: \", id);\r\n            this.connect();\r\n        }.bind(this));\r\n\r\n        this.peer.on(\"connection\", function(conn){\r\n            conn.on(\"open\", function(){\r\n                console.log(\"connected to peer server\");\r\n            })\r\n        });\r\n\r\n    }\r\n\r\n    connect(){\r\n        this.connection = this.peer.connect(this.peer_id);\r\n\r\n        this.connection.on(\"open\", function(data){\r\n            console.log(\"open data connection with peer server\");\r\n        });\r\n\r\n        this.connection.on(\"data\", function(sent){\r\n\r\n            if(sent.event === \"close-all\"){\r\n                this.devices = [];\r\n\r\n                for(i = 0; i < this.device_elems.length; i++){\r\n                    let toErase = this.device_elems[i];\r\n                    toErase.parentNode.removeChild(toErase);\r\n                }\r\n\r\n                this.device_elems = [];\r\n\r\n                this.depthElems = [];\r\n                this.colorElems = [];\r\n\r\n                this.depthData = [];\r\n                this.colorData = [];\r\n            }\r\n\r\n            let devicename = sent.device + \"-\" + sent.id;\r\n\r\n            let device_index = this.devices.indexOf(devicename);\r\n\r\n            if(sent.event === \"device-closed\"){\r\n\r\n                console.log(devicename + \" closed\");\r\n\r\n                this.devices.splice(device_index);\r\n                let toErase = this.device_elems[device_index];\r\n\r\n                for(let i = 0; i < this.colorElems; i++){\r\n                    if(this.colorElems[i][0] === devicename){\r\n                        this.colorElems.splice(i, 1);\r\n                    }\r\n                }\r\n\r\n                for(let i = 0; i < this.depthElems; i++){\r\n                    if(this.depthElems[i][0] === devicename){\r\n                        this.depthElems.splice(i, 1);\r\n                    }\r\n                }\r\n\r\n                toErase.parentNode.removeChild(toErase);\r\n                this.device_elems.splice(device_index);\r\n            }else{\r\n                if(device_index < 0){\r\n                    this.devices.push(devicename);\r\n\r\n                    let div = document.createElement('div');\r\n                    div.id = devicename;\r\n                    div.style.display = \"none\";\r\n                    let depth_img_elem = document.createElement('img');\r\n                    depth_img_elem.id = devicename + \"-depth\";\r\n                    let color_img_elem = document.createElement('img');\r\n                    color_img_elem.id = devicename + \"-color\";\r\n\r\n                    div.append(color_img_elem);\r\n                    div.append(depth_img_elem);\r\n                    document.body.append(div);\r\n\r\n                    this.device_elems.push(div);\r\n                }else{\r\n\r\n                    if(this.show_elems){\r\n                        for(let i = 0; i < this.device_elems.length; i++){\r\n                            if(this.device_elems[i].style.display === \"none\"){\r\n                                this.device_elems[i].style.display = \"block\";\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if(sent.event === \"depth\"){\r\n                        if(sent.data === \"stop\"){\r\n                            console.log(\"remove\");\r\n                            this.device_elems[device_index].children[1].removeAttribute(\"src\");\r\n                        }else{\r\n                            let newBlob = new Blob([sent.data], {type: 'image/webp'});\r\n                            let newURL = URL.createObjectURL(newBlob);\r\n\r\n                            this.depthData[device_index] = new Uint8Array(sent.data);\r\n                            this.device_elems[device_index].children[1].src = newURL;\r\n\r\n                            this.depthElems[device_index] = [devicename, newURL];\r\n                        }\r\n                    }\r\n\r\n                    if(sent.event === \"color\"){\r\n                        if(sent.data === \"stop\"){\r\n                            console.log(\"remove\");\r\n                            this.device_elems[device_index].children[0].removeAttribute(\"src\");\r\n                        }else{\r\n                            let newBlob = new Blob([sent.data], {type: 'image/webp'});\r\n                            let newURL = URL.createObjectURL(newBlob);\r\n\r\n                            this.colorData[device_index] = new Uint8Array(sent.data);\r\n                            this.device_elems[device_index].children[0].src = newURL;\r\n\r\n                            if(sent.device === \"azure\"){\r\n                                this.device_elems[device_index].children[0].filter = \"hue-rotate(150deg)\"\r\n                            }\r\n\r\n                            this.colorElems[device_index] = [devicename, newURL];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }.bind(this));\r\n    }\r\n\r\n    deviceCount(){\r\n        return this.devices.length;\r\n    }\r\n\r\n    depthCount(){\r\n        return this.depthElems.length;\r\n    }\r\n\r\n    colorCount(){\r\n        return this.colorElems.length;\r\n    }\r\n\r\n    getDepth(i){\r\n        return this.depthElems[i][1];\r\n    }\r\n\r\n    getDepthData(i){\r\n        return this.depthData[i];\r\n    }\r\n\r\n    getColor(i){\r\n        return this.colorElems[i][1];\r\n    }\r\n\r\n    getColorData(i){\r\n        return this.colorData[i];\r\n    }\r\n\r\n}\r\n\r\nwindow.Depth2Web = Depth2Web;"]}